"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8847],{452:(e,t,a)=>{a.d(t,{V:()=>ak});var s=a(42977),n=a(54568),l=a(90510),i=a(22529),r=a(27062),o=a(57646),d=a(32987),c=a(49645),u=a(37463),m=a(7620),p=a(46760),x=a(67455),h=a(53685),f=a(59296),g=a(7409),v=a(7386),y=a(38715);let b=e=>{let{attachments:t,files:a,syncSourceResults:s,onRemoveAttachment:l,onRemoveFile:i,onRemoveSyncSource:r,isUploadingFile:o,isUploadingSync:d}=e;return(0,n.jsxs)("div",{className:"border-border-300/25 border-t-0.5 rounded-b-2xl bg-bg-100 !p-3.5 !m-0 flex flex-row overflow-x-auto gap-3 px-3.5 py-2.5 -my-1",children:[t.map((e,t)=>(0,n.jsx)(g.NM,{file:e,size:"md",onRemoveFile:()=>l(t),isEditable:!0},t)),a.map((e,t)=>(0,n.jsx)(g.NM,{file:e,showWarnings:!0,size:"md",onRemoveFile:()=>i(t),isEditable:!0},e.file_uuid)),(0,n.jsx)(v.NG,{isShown:o}),s.map(e=>{let{syncSource:t,uuid:a}=e;return(0,n.jsx)(y.V,{uuid:a,syncSource:t,onRemove:()=>r(a),isEditable:!0},a)}),(0,n.jsx)(v.NG,{isShown:d})]})};var j=a(57383),w=a(51291),k=a(42824),M=a(66860),A=a(51121),C=a(77101),N=a(62971),_=a(85717),S=a(48676),I=a(31102);let E=()=>{let{setSyncSourceUuids:e,isAtMaxNumUploads:t,setIsUploadingDriveSync:a,prompt:s}=(0,j.o)(),l=(0,_.LP)(),{addError:i}=(0,A.Y)(),r=(0,p.A)(),{mutate:o}=(0,x.EF)({onMutate:()=>{a(!0)},onSuccess:t=>{e(e=>[...e,t.uuid]),a(!1)},onError:e=>{a(!1),i((0,I.J)(e))},meta:{noToast:!0}}),{isDriveAuthenticated:d,initDriveAuth:c}=(0,_.cI)({callerIdentifier:"chat-input",handleAuthSuccess:()=>{for(let e of s.match(/(https?:\/\/[^\s]+)/gi)||[]){let t=(0,S.$)(e);t&&u(t,!0)}}}),u=(0,m.useCallback)(function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(l||a){if(!d&&!a)return void i((0,n.jsx)("span",{children:(0,n.jsx)(N.A,{defaultMessage:"<button>Authenticate</button> to paste link as attachment",id:"85AH1hyv0s",values:{button:e=>(0,n.jsx)("button",{className:"underline",onClick:c,children:e})}})}));if(t)return void i(r.formatMessage({defaultMessage:"You can add at most {maxUploads, plural, one {# attachment} other {# attachments}} to a message.",id:"wvnM4s8976"},{maxUploads:M.Jn}));o({sync_source_type:C.v8.GDRIVE,sync_source_config:{uri:e}})}},[l,d,t,o,c,i,r]);return u};var T=a(62628),D=a(77186),O=a(1761),R=a(70825),z=a(70011);let L=()=>{let{setPrompt:e,setAttachments:t,setFiles:a}=(0,j.o)(),{failedStreamRetryData:s,setFailedStreamRetryData:n}=(0,z.x)();(0,m.useEffect)(()=>{null!==s&&(e(s.prompt),t(s.attachments),a(s.files),n(null))},[s,t,n,a,e])};var P=a(4708),U=a(23661),F=a(94390),G=a(75006),H=a(85644),Y=a(56147);let B=e=>{var t,a;let{model:s,projectUuid:l}=e,{allModelOptions:i}=(0,H.A9)(),r=(0,Y.ED)(l),o=(0,Y.Pb)(l),d=null!=(a=null==(t=i.find(e=>e.model===s))?void 0:t.slow_kb_warning_threshold)?a:155e3,c=!o&&(null!=r?r:0)>d?(0,n.jsx)("div",{className:"max-md:hidden",children:(0,n.jsx)(N.A,{defaultMessage:"Large knowledge may slow responses",id:"d6mr4c6d+8"})}):void 0;return(0,n.jsx)("div",{className:"text-text-400 text-xs ml-2",children:null!=c?c:void 0})};var V=a(9896),K=a(55554),q=a(41417),W=a(56370),X=a(29242),J=a(91961),$=a(85544),Z=a(60265),Q=a(99272),ee=a(62094),et=a(62942),ea=a(62757),es=a(35747),en=a(45078),el=a(85201),ei=a(49077),er=a(64979);function eo(){let e=(0,s._)(["\n  uppercase\n  mt-0.3\n  bg-accent-pro-100/10\n  text-accent-pro-000\n  rounded-full\n  px-2\n  ml-2\n  -mr-1\n  border-0.5\n  border-accent-pro-100/10\n  leading-4\n  h-4\n  text-[0.6rem]\n  flex-shrink-0\n"]);return eo=function(){return e},e}function ed(){let e=(0,s._)(["\n  mt-0.3\n  bg-accent-secondary-900/50\n  text-accent-secondary-000\n  rounded-3xl\n  px-1.5\n  py-0.5\n  ml-2\n  -mr-1\n  text-xs\n  flex-shrink-0\n  cursor-pointer\n  hover:bg-accent-secondary-900/60\n  transition-colors\n"]);return ed=function(){return e},e}function ec(){let e=(0,s._)(["\n  border-0.5\n  border-border-300\n  -mr-1\n  ml-2\n  translate-y-px\n  rounded-full\n  px-2\n  py-px\n  text-xs\n  text-text-500\n  tracking-tight\n  group-hover:bg-bg-100\n"]);return ec=function(){return e},e}let eu=l.J.div(eo()),em=l.J.button(ed()),ep=l.J.div(ec()),ex=(0,n.jsx)(N.A,{defaultMessage:"Upgrade to Claude Pro to use our best and latest models",id:"GFsmqWxmnh"}),eh={model:"missing-model",name:"Legacy Model",description:"",inactive:!0},ef=e=>{var t,a;let{model:s,currentModelOption:l,opensInNewChat:r,onSelect:o,hasMultiModalContent:c,tag:u,tooltip:p,onUpgradeClick:x}=e,h=(0,m.useMemo)(()=>({"haiku-3-5-description":(0,n.jsx)(N.A,{defaultMessage:"Fastest model for daily tasks",id:"75wJbzj8Tm",description:"A description of the AI model"}),"sonnet-3-7-description":(0,n.jsx)(N.A,{defaultMessage:"Our most intelligent model yet",id:"WW0Apyq96E",description:"A description of the AI model"}),"telescope-cinnamon-lampshade":(0,n.jsx)(i.YX,{id:"telescope_cinnamon_lampshade"}),"origami-glacier-marmalade":(0,n.jsx)(i.YX,{id:"origami_glacier_marmalade"})}),[]),f=s.model===(null==l?void 0:l.model),g=(0,er.t)(s.name,s.model,c);return(0,n.jsx)(X.m,{tooltipContent:p,side:"right",children:(0,n.jsxs)(W.tJ,{onClick:()=>{f||u?"Upgrade"===u&&(null==x||x()):o(s)},className:(0,d.A)("group pr-1 py-1.5","Upgrade"===u&&"cursor-pointer"),children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"flex-1 text-sm",children:(0,n.jsx)("div",{className:"flex items-center gap-1.5",children:(0,n.jsx)("div",{children:g})})}),u&&!f&&"Upgrade"===u?(0,n.jsx)(em,{onClick:e=>{e.stopPropagation(),null==x||x()},children:(0,n.jsx)(N.A,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"})}):u&&!f?(0,n.jsx)(eu,{children:u}):null,!f&&r&&!u&&(0,n.jsx)(ep,{children:(0,n.jsx)(N.A,{defaultMessage:"New chat",id:"ATDyLPIoxz"})})]}),(0,n.jsx)("div",{className:"text-text-500 pr-4 text-xs mt-1",children:null!=(a=h[null!=(t=s.description_i18n_key)?t:""])?a:s.description})]}),f&&(0,n.jsx)(Z.J,{className:"text-accent-secondary-100 mb-1 mr-1.5",size:16,weight:"bold"})]})})},eg=e=>{let{models:t,currentModelOption:a,opensInNewChat:s,redirectToUpgradePro:l,handleModelSelect:r,hasMultiModalContent:o,upsellMode:d}=e,c=(0,m.useMemo)(()=>({"velvet-bicycle-thunderstorm":(0,n.jsx)(i.YX,{id:"velvet_bicycle_thunderstorm"})}),[]),u=(0,el.Ob)(),p=()=>{window.location.href="/upgrade"},x=e=>{var t,s;return d&&e.model!==(null==a?void 0:a.model)?ex:null!=(s=c[null!=(t=e.notice_text_i18n_key)?t:""])?s:e.notice_text};return(0,n.jsx)(n.Fragment,{children:t.map(e=>(0,n.jsx)(ef,{model:e,currentModelOption:a,opensInNewChat:s,onSelect:d?l:r,hasMultiModalContent:o,tag:d&&e.model!==(null==a?void 0:a.model)&&u?"Upgrade":d&&e.model!==(null==a?void 0:a.model)?"PRO":void 0,tooltip:x(e),onUpgradeClick:p},e.model))})},ev=e=>{let{selectedModel:t,conversationUUID:a,onSelect:s,placement:l,hasMultiModalContent:i,open:o,onOpenChange:c,isNewConversation:p,hideModelNameLogo:x}=e,h=!p,f=(0,et.useRouter)(),{allModelOptions:g,mainModels:v,overflowModels:y}=(0,H.A9)(),b=(0,z.Z3)(a||null),j=null!=t?t:b,w=(0,m.useRef)(null),k=(0,en.vP)("paprika_mode"),M=(0,es.j)(),A=(0,ea.G8)(),{toggleConversationSetting:C}=(0,en.rX)(),_=g.find(e=>e.model===j);_||(_=eh);let{value:S}=(0,r.fS)("model_selector_enabled"),I=(0,O.h0)(),{selectedTier:E,shouldOverrideFeatureAccess:T,isTierSelectorEnabled:D}=(0,K.t)(),R=D&&T&&!!E,L=R?E===$.d7.FREE:!S&&!I,{setStickyModelPreference:P}=(0,V.F)(),[U,F]=(0,m.useState)(!1),G=()=>{f.push("/upgrade/pro")},Y=e=>{(S||R&&"free"!==E)&&(k&&!M(e.model)&&C("paprika_mode",null),A(e.model)||C("compass_mode",null),P(e.model),s(e))};return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(W.ms,{className:(0,d.A)("!min-w-[17rem] relative"),..."bottom"===l?{side:"top",sideOffset:4}:{side:"bottom",sideOffset:4},align:"end",unstyledTrigger:!0,onCloseAutoFocus:e=>e.preventDefault(),open:o,onOpenChange:e=>{c&&c(e),e||F(!1)},trigger:(0,n.jsx)(u.P.div,{initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},transition:{type:"spring",stiffness:700,damping:32,mass:.7},className:"overflow-hidden shrink-0 p-1 -m-1",children:(0,n.jsxs)(q.$,{ref:w,variant:"unstyled",size:"unset","data-testid":"model-selector-dropdown",className:(0,d.A)("h-7 border-0.5 text-text-100 ml-1.5 inline-flex items-start gap-[0.175em] rounded-md border-transparent text-sm opacity-80 transition hover:opacity-100 disabled:!opacity-80 hover:bg-bg-100 hover:border-border-400 px-1.5"),children:[(0,n.jsx)(ei.V,{model:_,hasMultiModalContent:i,hideModelNameLogo:x}),(0,n.jsx)(Q.a,{size:12,className:"text-text-500 shrink-0"})]})}),children:[(0,n.jsx)(eg,{models:v,currentModelOption:_,opensInNewChat:h,redirectToUpgradePro:G,handleModelSelect:Y,hasMultiModalContent:i,upsellMode:L}),y.length>0&&((0,J.Fr)()?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(W.DG,{}),(0,n.jsx)("div",{className:"text-xs text-text-500 pt-2 pb-1 px-2",children:(0,n.jsx)(N.A,{defaultMessage:"More models",id:"9yxvA9+l6B"})}),(0,n.jsx)(eg,{models:y,currentModelOption:_,opensInNewChat:h,redirectToUpgradePro:G,handleModelSelect:Y,hasMultiModalContent:i,upsellMode:L})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(W.DG,{}),(0,n.jsxs)(W.MS,{children:[(0,n.jsxs)(W.Wn,{className:"pl-2 py-1.5 gap-2",children:[(0,n.jsx)("div",{className:"group-hover:text-text-100  text-sm",children:(0,n.jsx)(N.A,{defaultMessage:"More models",id:"9yxvA9+l6B"})}),(0,n.jsx)(ee.K,{className:"text-text-500 group-hover:text-text-300 mr-1",size:16})]}),(0,n.jsx)(W.cm,{children:(0,n.jsx)(W.FV,{sideOffset:4,children:(0,n.jsx)(eg,{models:y,currentModelOption:_,opensInNewChat:h,redirectToUpgradePro:G,handleModelSelect:Y,hasMultiModalContent:i,upsellMode:L})})})]})]}))]})})};var ey=a(36881),eb=a(98715),ej=a(4705),ew=a(98682),ek=a(1524),eM=a(2881),eA=a(11091),eC=a(33562);let eN=e=>{let{hideIndicatorText:t,hideIndicators:a}=e,s=(0,p.A)();return a?null:(0,n.jsx)(ew.o,{children:(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2 min-w-0",children:[(0,n.jsx)(e_,{}),(0,n.jsx)(eT,{hideIndicatorText:t}),(0,n.jsx)(eS,{itemKey:$.xd.COMPASS,tooltip:s.formatMessage({defaultMessage:"Research mode",id:"lYf0AUt2RH"})}),(0,n.jsx)(eI,{hideIndicatorText:t}),(0,n.jsx)(eE,{hideIndicatorText:t})]})})},e_=()=>{let e=(0,p.A)(),{menuView:{rootItems:t}}=(0,eA.tl)(),a=t.find(e=>e.key===$.xd.EXTENDED_THINKING),s=(0,r.P0)("thinking_sticky_default_on","hide_thinking_chat_indicator",!1,r.e_);return!a||s?null:(0,n.jsx)(eD,{hideIndicatorText:!0,menuItem:a,icon:a.icon,tooltip:e.formatMessage({defaultMessage:"Extended thinking",id:"5j4WakKa2u"})})},eS=e=>{let{itemKey:t,tooltip:a}=e,{menuView:{rootItems:s}}=(0,eA.CH)(),{menuView:{rootItems:l}}=(0,eA.tl)(),i=[...s,...l].find(e=>e.key===t);return i?(0,n.jsx)(eD,{hideIndicatorText:!0,menuItem:i,icon:i.icon,tooltip:a}):null},eI=e=>{let{hideIndicatorText:t}=e,{menuView:{rootItems:a}}=(0,eA.tl)(),s=(0,eC.pi)(),l=a.find(e=>"styles"===e.key);return l&&"optionGroup"===l.type?(0,n.jsx)(eD,{hideIndicatorText:t,menuItem:l,icon:(0,n.jsx)(eb.P_O,{size:16}),text:l.secondaryText,buttonClassName:"!shrink",handleClick:()=>s("Default")}):null},eE=e=>{let{hideIndicatorText:t}=e,{menuView:{rootItems:a}}=(0,eA.CH)(),s=(0,eC.$V)(),l=a.find(e=>e.key===$.xd.PROJECTS);return l&&"optionGroup"===l.type?(0,n.jsx)(eD,{hideIndicatorText:t,menuItem:l,icon:(0,n.jsx)(eb.JtL,{size:16}),text:l.secondaryText,buttonClassName:"!shrink-[2]",handleClick:()=>s(void 0)}):null},eT=e=>{let{hideIndicatorText:t}=e,a=(0,ek.f)(),{menuView:{rootItems:s}}=(0,eA.tl)(),l=s.find(e=>"monkeys_in_a_barrel"===e.key);return a&&l?(0,n.jsx)(eD,{buttonClassName:"border-danger-200/70 bg-danger-100/[8%] text-danger-200/90 hover:text-danger-200/90 hover:bg-danger-100/[12%]",hideIndicatorText:!!t,menuItem:l,icon:(0,n.jsx)(ej.i,{size:16}),tooltip:"Disable preview feature"}):null},eD=e=>{let{menuItem:t,handleClick:a,...s}=e,{handleClickItem:l}=(0,eA.CH)();if(!t||t.isDisabled||"pro"===t.tag||"new chat"===t.tag||!t.indicatorActive)return null;let{indicatorActive:i}=t,r=!!t.menuItemHidden;return(0,n.jsx)(eM.O,{onClick:null!=a?a:()=>l(t),indicatorActive:i,disabled:r,showRemoveIcon:!0,...s})};var eO=a(52080),eR=a(98769),ez=a(48498),eL=a(92947);a(7726);let eP={FROM_ANCHOR:8,POINTER_OFFSET:18,POINTER_HEIGHT:16},eU=e=>{let{anchorRef:t,children:a,side:s,align:l="center",accentColor:i="default",onClose:r,className:o,introDelay:c=0,spacing:p={},buttonText:x,onClickButton:h}=e,f={...eP,...p},g=(0,m.useRef)(null),[v,y]=(0,m.useState)(s),[b,j]=(0,m.useState)(l);(0,m.useEffect)(()=>{if(!g.current||!t.current)return;let e=()=>{let{current:e}=g,{current:a}=t;if(!e||!a)return;let s=a.getBoundingClientRect(),n=e.getBoundingClientRect(),l=window.innerWidth,i=window.innerHeight,r=v,o=b,d=0,c=0,u=()=>{d="top"===r?s.top-n.height-f.FROM_ANCHOR:"bottom"===r?s.bottom+f.FROM_ANCHOR:s.top-f.POINTER_OFFSET+.5*s.height-.5*f.POINTER_HEIGHT},m=()=>{if("left"===r)c=s.left-n.width-f.FROM_ANCHOR;else if("right"===r)c=s.right+f.FROM_ANCHOR;else switch(o){case"start":c=s.left-f.FROM_ANCHOR;break;case"center":c=s.left+(s.width-n.width)/2;break;case"end":c=s.right-n.width+f.FROM_ANCHOR}};u(),m(),c<0?"top"===r||"bottom"===r?o="start":r="bottom":c+n.width>l&&("top"===r||"bottom"===r?o="end":r="bottom"),d<0?r="bottom":d+n.height>i&&(r="top"),u(),m(),e.style.top="".concat(d,"px"),e.style.left="".concat(c,"px"),r!==v&&y(r),o!==b&&j(o)};e();let a=new ResizeObserver(e);t.current&&(a.observe(t.current),t.current.parentElement&&a.observe(t.current.parentElement));let s=e=>{if(r){var t;(null==(t=g.current)?void 0:t.contains(e.target))||r()}};return window.addEventListener("resize",e),window.addEventListener("scroll",e),document.addEventListener("click",s,{capture:!0}),()=>{a.disconnect(),window.removeEventListener("resize",e),window.removeEventListener("scroll",e),document.removeEventListener("click",s,{capture:!0})}},[v,b,t,r,f.FROM_ANCHOR,f.POINTER_HEIGHT,f.POINTER_OFFSET]);let w={};switch(v){case"right":w={translateX:-f.FROM_ANCHOR,opacity:0};break;case"left":w={translateX:f.FROM_ANCHOR,opacity:0};break;case"bottom":w={translateY:-f.FROM_ANCHOR,opacity:0};break;case"top":w={translateY:f.FROM_ANCHOR,opacity:0}}return(0,n.jsxs)(u.P.div,{ref:g,initial:w,animate:{translateY:0,translateX:0,opacity:1,transition:{delay:c,type:"spring",stiffness:200,damping:20,mass:1.5,opacity:{ease:"easeOut",duration:.15}}},exit:{scale:.985,opacity:0,filter:"blur(24px)",transition:{ease:"easeIn",duration:.3,opacity:{duration:.2}}},className:(0,d.A)("font-base fixed z-tooltip rounded-xl p-4 border-0.5 shadow-sm max-w-[16.6rem]","default"===i&&"bg-bg-200 border-border-300","secondary"===i&&"text-accent-secondary-000 bg-accent-secondary-900 border-accent-secondary-100/50",o),role:"dialog",style:{willChange:"transform",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"},children:[(0,n.jsx)(eF,{side:v,align:b,accentColor:i,spacing:f}),(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[a,!!x&&!!h&&(0,n.jsx)(q.$,{variant:"outline",className:(0,d.A)("!gap-0 !text-sm !rounded-lg  !px-3 !min-w-0 !w-fit","secondary"===i&&"!text-accent-secondary-000 !border-accent-secondary-100/30 hover:!bg-accent-secondary-100 hover:!text-oncolor-100"),onClick:()=>{h(),null==r||r()},size:"sm",children:(0,n.jsx)("p",{className:"inline",children:x})})]})]})},eF=e=>{let{accentColor:t,side:a,align:s,spacing:l=eP}=e,i="fill-bg-200",r="fill-border-300";"secondary"===t&&(i="fill-accent-secondary-900",r="fill-accent-secondary-100/50");let o={};switch(a){case"top":o={top:"100%",left:"50%",marginTop:"-5px",transform:"rotate(-90deg) translateY(-25%)"};break;case"bottom":o={bottom:"100%",left:"50%",marginBottom:"-5px",transform:"rotate(90deg) translateY(25%)"};break;case"right":o={top:l.POINTER_OFFSET};break;case"left":o={top:l.POINTER_OFFSET,left:"100%",transform:"rotate(180deg)"}}if("top"===a||"bottom"===a)switch(s){case"start":o.left=l.POINTER_OFFSET;break;case"end":o.left="auto",o.right=l.POINTER_OFFSET}return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",height:l.POINTER_HEIGHT,viewBox:"0 0 6 16",className:(0,d.A)("absolute origin-center pointer-events-none","right"===a&&"right-full"),style:o,children:[(0,n.jsx)("path",{className:i,d:"M6 0h-.5v1.55c0 .55-.27 1.06-.71 1.55-.53.6-1.16 1.05-1.79 1.51-.57.42-1.15.85-1.65 1.37C.87 6.48.5 7.06.5 7.74c0 .68.37 1.26.85 1.77.5.52 1.08.94 1.65 1.36.63.47 1.26.93 1.79 1.51.44.5.71 1 .71 1.56V16H6V0Z"}),(0,n.jsx)("path",{className:r,fillRule:"evenodd",clipRule:"evenodd",d:"M6 0v1.55c0 .74-.36 1.36-.85 1.9-1.01 1.13-2.4 1.8-3.44 2.89-.45.47-.71.92-.71 1.4 0 .48.26.93.7 1.4 1.05 1.1 2.44 1.76 3.45 2.89.5.54.85 1.17.85 1.9V16h-.5v-2.06c0-.56-.27-1.06-.71-1.56-1.01-1.12-2.4-1.79-3.44-2.87C.87 9 .5 8.42.5 7.74c0-.68.37-1.26.85-1.76C2.4 4.89 3.78 4.22 4.8 3.1c.44-.5.71-1 .71-1.55V0H6Z"})]})};var eG=a(36081),eH=a(20878),eY=a(50163);function eB(e,t){let{dateAdded:a,priority:s,showAfterOthersDismiss:n}=t,l=(0,m.useContext)(eY.L),{dismiss:i,isDismissed:r}=(0,eH.W)();if(!l)throw Error("useNux must be used within a NuxProvider");let{registerNux:o,unregisterNux:d,currentlyShowing:c}=l;return(0,m.useEffect)(()=>{if(!r(e))return o(e,{dateAdded:a,priority:s,showAfterOthersDismiss:n}),()=>d(e)},[e,a,s,n,r,o,d]),{shouldShow:c===e&&!r(e),dismiss:()=>{i(e),d(e)}}}let eV=e=>{let{anchorRef:t,canShowNux:a,text:s,id:l,nuxItem:i,side:r}=e,{shouldShow:o,dismiss:d}=eB(l,i);return o&&a?(0,n.jsx)(eU,{side:r,anchorRef:t,onClose:d,accentColor:"secondary",introDelay:.5,children:(0,n.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,n.jsx)(eG.A,{size:16,className:"text-accent-secondary-200"}),(0,n.jsx)("p",{className:"-my-[2px]",children:s})]})}):null};var eK=a(21103),eq=function(e){return e[e.HIGH=30]="HIGH",e[e.MEDIUM=20]="MEDIUM",e[e.LOW=10]="LOW",e[e.NONE=0]="NONE",e}({}),eW=a(38583);let eX=e=>{let{path:t}=e,a={drive:(0,p.A)().formatMessage({defaultMessage:"Paste a Drive link in the chat to upload it",id:"ZJxjEilF0C"})},s=t&&t in a?a[t]:null;return s?(0,n.jsxs)("div",{className:"h-8 w-full bg-bg-100 border-t-0.5 border-border-300 opacity-80 text-text-500 flex flex-row items-center gap-2.5 px-3 text-[0.8125rem]",children:[(0,n.jsx)(eW.R,{size:14}),s]}):null};var eJ=a(93271),e$=a(73817),eZ=a(24871),eQ=a(14067);let e0=e=>{let{tooltip:t,text:a,tag:s,showCaretIcon:l,indicatorActive:i=!1,hideIndicatorText:r,canShowDot:o,onDoubleClick:d,menuType:c,menuView:x,inputMenuIsOpen:h,setInputMenuIsOpen:f}=e,g=(0,p.A)(),v=(0,m.useRef)(null),{rootItems:y}=x,b={indicatorActive:i,text:a||"",tooltip:t},j=(0,el.gB)(),w="tools"===c&&j;if(w){b.tooltip=g.formatMessage({defaultMessage:"Style",id:"7mL9QEUFav"});let e=y.find(e=>"option"===e.type&&e.isChecked);e&&"Default"!==e.key&&(b.indicatorActive=!0,b.text=e.label)}let k=y.filter(e=>{let{indicatorActive:t}=e;return t}).length,M=(0,n.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1",children:["plus"===c?(0,n.jsx)(u.P.div,{animate:{rotate:45*!!h},transition:{type:"spring",stiffness:650,damping:32,duration:.1},children:(0,n.jsx)(eZ.F,{size:16})}):"research"===c?(0,n.jsx)(eb.isz,{size:16}):w?(0,n.jsx)(eb.P_O,{size:16}):(0,n.jsx)(eQ.l,{size:16}),(0,n.jsx)(e1,{isShown:o&&k>0})]}),A="plus"===c?g.formatMessage({defaultMessage:"attachments",id:"whkEDsy4V6",description:"Menu heading that will be used within the string ‘Open {menuType} menu’"}):"research"===c?g.formatMessage({defaultMessage:"research",id:"PUcnDUZD0/",description:"Menu heading that will be used within the string ‘Open {menuType} menu’"}):w?g.formatMessage({defaultMessage:"styles",id:"G91kUvt+GD",description:"Menu heading that will be used within the string ‘Open {menuType} menu’"}):g.formatMessage({defaultMessage:"tools",id:"yd3KUET1r+",description:"Menu heading that will be used within the string ‘Open {menuType} menu’"});return(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(eM.O,{tag:s,showCaretIcon:l,hideIndicatorText:!!r,icon:M,id:"input-".concat(c,"-menu-trigger"),ref:v,onClick:()=>{f(!h)},onKeyDown:e=>{h||"Space"!==e.code&&"ArrowDown"!==e.code||f(!0)},onDoubleClick:d?e=>{e.preventDefault(),null==d||d()}:void 0,"aria-expanded":h,"aria-haspopup":"listbox","aria-controls":"input-menu","data-testid":"input-menu-".concat(c),"aria-label":g.formatMessage({defaultMessage:"Open {menuType} menu",id:"Larie1pvYJ"},{menuType:A}),...b})})},e1=e=>{let{isShown:t}=e;return!!t&&(0,n.jsx)(u.P.div,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},children:(0,n.jsx)("div",{className:"h-1.5 w-1.5 bg-accent-secondary-200 rounded-full mr-0.5"})})};var e2=a(73212);let e5={forward:{initial:{x:"20%",opacity:0},animate:{x:0,opacity:1}},back:{initial:{x:"-20%",opacity:0},animate:{x:0,opacity:1}},none:{initial:{x:0},animate:{x:0}}},e7=e=>{let{placement:t,canShowDot:a}=e,s=(0,m.useRef)(null),l=(0,p.A)(),i=(0,eA.tl)(),r=(0,eL.AY)(),o=(0,eL.M8)();return(0,n.jsxs)("div",{ref:s,children:[(0,n.jsx)(e8,{canShowDot:a,placement:t,menuType:"tools",...i,tooltip:l.formatMessage({defaultMessage:"Search and tools",id:"lhFEU+uT6i"})}),(0,n.jsx)(eV,{canShowNux:o,anchorRef:s,side:"bottom",text:l.formatMessage({defaultMessage:"Add your everyday tools and apps to get the best out of Claude",id:"olaMSdwPL6"}),id:"research-rmcp-tools-nux-1",nuxItem:{dateAdded:"2025-05-14",priority:eq.HIGH,showAfterOthersDismiss:!0}}),(0,n.jsx)(eV,{canShowNux:r,anchorRef:s,side:"bottom",text:l.formatMessage({defaultMessage:"MCP is here now! Access integrations in this menu.",id:"NkJar0wFk+"}),id:"mcp-tools-nux-1",nuxItem:{dateAdded:"2025-04-29",priority:eq.HIGH,showAfterOthersDismiss:!0}})]})},e6=e=>{let{placement:t,canShowDot:a}=e,s=(0,eA.CH)();return(0,n.jsx)(e8,{placement:t,menuType:"plus",canShowDot:a,...s})},e4=e=>{let t,{hideIndicatorText:a}=e,s=(0,p.A)(),{conversation:l,model:i,setModel:r}=(0,j.o)(),o=(0,en.vP)("compass_mode"),{toggleConversationSetting:d}=(0,en.rX)(),c=(0,ea.g7)(),u=(0,ea.BU)(),m=(0,ea.Gm)(l),x=(0,z.Z3)((null==l?void 0:l.id)||null),h=(0,ea.G8)()(null!=i?i:x),f=(0,ea.G8)()(x),g=!l&&!h&&f;if(!c)return null;u?m?h||g||(t=s.formatMessage({defaultMessage:"Select a different model to use this feature",id:"/9vSDy2Wm0"})):t=s.formatMessage({defaultMessage:"Enable a search integration to use research",id:"WyiVeak7w5"}):t=s.formatMessage({defaultMessage:"Your administrator must enable a search tool to use research",id:"CzjOV5rgPZ"});let v=!!t;return(0,n.jsx)(eM.O,{disabled:v,tooltip:t,hideIndicatorText:!!a,icon:(0,n.jsx)(eb.isz,{size:16}),onClick:()=>{v||(g&&r(x),d("compass_mode","advanced"===o?null:"advanced"))},indicatorActive:!v&&"advanced"===o,text:s.formatMessage({defaultMessage:"Research",id:"JEe7dVso7F"}),className:"!shrink-0"})},e3={id:"mcp-add-connectors-nux",nuxItem:{dateAdded:"2025-07-11",priority:eq.HIGH,showAfterOthersDismiss:!0}},e8=e=>{let{text:t,tag:a,showCaretIcon:s,indicatorActive:l,canShowDot:i,hideIndicatorText:r,tooltip:o,placement:p,menuType:x,path:h,menuView:f,highlightedItemKey:g,setHighlightedItemKey:v,handleClickItem:y,inputMenuIsOpen:b,setInputMenuIsOpen:j,inputMenuSearchQuery:w,setInputMenuSearchQuery:k,handleBack:M,animationDirection:A}=e,{currentItems:C}=f,_=(0,ez.L)(()=>{j(!1)},["mouseup","touchend"]),S=(0,m.useRef)(null),I=(0,m.useRef)(null),E=(0,m.useRef)(null),T=(0,m.useRef)(null),[D,O]=(0,m.useState)(void 0),[R,z]=(0,m.useState)("bottom"===p?"top":"bottom"),[L,P]=(0,m.useState)(0),U=(0,et.useSearchParams)(),{shouldShow:F}=eB(e3.id,e3.nuxItem),G="true"===U.get(eK.HU)&&F&&"tools"===x;(0,m.useEffect)(()=>{G&&(j(!0),E.current&&(E.current.scrollTop=E.current.scrollHeight))},[G,j]),(0,m.useEffect)(()=>{if(!S.current||!I.current)return;let e=S.current.getBoundingClientRect(),{updatedHeightAvailable:t,updatedDropdownSide:a}=e9({placement:p,triggerRectTop:e.top,triggerRectBottom:e.bottom});O(Math.min(432,t)),z(a);let s=I.current.getBoundingClientRect();P(Math.min(0,window.innerWidth-s.right-8))},[p,b]);let H=(0,el.Hd)(),Y=("plus"===x||"tools"===x)&&H?(0,n.jsx)(e$.s,{path:h,inputMenuSearchQuery:w,setInputMenuSearchQuery:k,handleBack:M}):null;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"relative shrink-0",onClick:e=>{e.preventDefault()},ref:_,children:[(0,n.jsx)("div",{ref:S,children:(0,n.jsx)(e0,{tag:a,tooltip:o,text:t,showCaretIcon:s,indicatorActive:l,hideIndicatorText:r,canShowDot:i,menuType:x,menuView:f,inputMenuIsOpen:b,setInputMenuIsOpen:j,onDoubleClick:"plus"===x?()=>(0,eC.U_)(p):void 0})}),(0,n.jsx)("div",{ref:I,className:(0,d.A)("w-[20rem] absolute max-w-[calc(100vw-16px)]","top"===R?"bottom-10":"top-10",b?"block":"hidden"),children:(0,n.jsx)(c.N,{children:b&&(0,n.jsx)(u.P.div,{ref:E,initial:{opacity:0,scale:.95,y:"top"===R?8:-8,x:-8},animate:{opacity:1,scale:1,y:0,x:0},exit:{opacity:0,scale:.95,y:"top"===R?8:-8,x:-8},transition:{type:"spring",stiffness:650,damping:23,mass:.6,height:{ease:"easeInOut"}},className:(0,d.A)("relative w-full will-change-transform h-auto overflow-y-auto overscroll-auto flex z-dropdown bg-bg-000 rounded-lg overflow-hidden border-border-300 border-0.5 shadow-diffused shadow-[hsl(var(--always-black)/6%)]","top"===R?"flex-col-reverse":"flex-col"),onMouseEnter:()=>v(null),style:{maxHeight:D?"".concat(D,"px"):void 0,left:L},onClick:e=>{e.stopPropagation(),(0,e2.l)()},children:(0,n.jsxs)(eO.D,{duration:100,className:(0,d.A)("flex flex-col min-h-0 w-full !ease-out","top"===R?"justify-end":"justify-start"),children:[(0,n.jsxs)("div",{className:"p-1.5 flex flex-col",children:["bottom"===R&&Y,(0,n.jsx)(u.P.div,{variants:e5[A],initial:"initial",animate:"animate",className:"flex flex-col",transition:{x:{duration:.15,ease:eR.A.outCirc},opacity:{duration:.25,ease:"easeInOut"}},children:C.filter(e=>{let{menuItemHidden:t}=e;return!t}).map(e=>"addIntegrations"===e.key?(0,n.jsx)("div",{ref:T,children:(0,n.jsx)(eJ.$,{item:e,onClick:()=>y(e),isHighlighted:g===e.key})},e.key):(0,n.jsx)(eJ.$,{item:e,onClick:()=>y(e),isHighlighted:g===e.key},e.key))},null!=h?h:"root"),"top"===R&&Y]}),(0,n.jsx)(eX,{path:h})]})})})})]}),(0,n.jsx)(eV,{canShowNux:G&&!!T.current&&b,anchorRef:T,side:"right",text:(0,n.jsx)(N.A,{defaultMessage:"Find and add more of your favorite tools in <span>Add connectors</span>.",id:"2icgWBPsqj",values:{span:e=>(0,n.jsx)("span",{className:"font-bold",children:e})}}),...e3})]})},e9=e=>{let{placement:t,triggerRectTop:a,triggerRectBottom:s}=e,n=window.innerHeight-s-8-8;if("bottom"===t){let e=a-76-8;return e<160&&n>e?{updatedDropdownSide:"bottom",updatedHeightAvailable:n}:{updatedDropdownSide:"top",updatedHeightAvailable:e}}{let e=a-8-8;return n<160&&e>n?{updatedDropdownSide:"top",updatedHeightAvailable:e}:{updatedDropdownSide:"bottom",updatedHeightAvailable:n}}},te=G.z.object({enabled:G.z.boolean(),system_prompt:G.z.string().optional()}),tt=e=>{let{placement:t,isDisabled:a}=e,s=(0,p.A)();(0,r.iW)("prompt_improver_config",{enabled:!1},te);let{projectUuid:l,prompt:i,model:o,setModel:d,attachments:c,files:u,syncSourceUuids:x,sendMessage:h,stopSampling:f,conversation:g,isSending:v,isChatSyncing:y,isProjectSyncing:b,isModelSelectorOpen:w,setIsModelSelectorOpen:k,isNewConversation:M,currentCompassTask:A,improvePrompt:C,isImprovingPrompt:N}=(0,j.o)(),_=y||b?s.formatMessage({defaultMessage:"Syncing knowledge...",id:"QuwefnZNVj"}):void 0,S=(0,m.useMemo)(()=>{var e;return[...u,...null!=(e=null==g?void 0:g.files)?e:[]].some(e=>e.file_kind===U.M.Image||e.file_kind===U.M.SanitizedDocument)},[u,g]),I=(0,m.useCallback)(e=>d(e.model),[d]),[E,T]=(0,F.w)({box:"border-box"}),D=T.width||null,O=null===D||D<480,R=null===D||D<396,z=null!==D&&D<440&&!R;return(0,n.jsxs)("div",{className:"flex gap-2.5 w-full items-center",ref:E,children:[(0,n.jsxs)("div",{className:"relative flex-1 flex items-center gap-2 shrink min-w-0",children:[(0,n.jsx)(e6,{placement:t,canShowDot:null!==D&&R}),(0,n.jsx)(e7,{placement:t,canShowDot:null!==D&&R}),"",(0,n.jsx)(e4,{hideIndicatorText:O}),null!==D&&(0,n.jsx)(eN,{hideIndicatorText:O,hideIndicators:R}),(0,n.jsx)(B,{model:o,projectUuid:l})]}),(0,n.jsx)(ev,{selectedModel:o,onSelect:I,hasMultiModalContent:S,placement:t,open:w,onOpenChange:k,isNewConversation:M,hideModelNameLogo:z}),(0,n.jsx)(ey.H,{isSending:v,isDisabled:a,disabledReason:_,prompt:i,files:u,attachments:c,syncSourceUuids:x,conversation:g,currentCompassTask:A,onSend:()=>h(),onStop:()=>f()})]})};var ta=a(82200),ts=a(29292);let tn=()=>{let{onDrop:e}=(0,j.o)();return(0,n.jsx)(ta.wC,{onDrop:e,children:(0,n.jsx)(tl,{})})},tl=()=>{let{dragState:e}=(0,ta.t1)(),t=e===ta.mq.DRAGGING_ON_TARGET;return e!==ta.mq.DRAGGING_OFF_TARGET&&e!==ta.mq.DRAGGING_ON_TARGET?null:(0,n.jsx)("div",{className:"absolute top-0 border border-dashed rounded-2xl min-h-4 h-full w-full border-accent-secondary-100 bg-bg-000 overflow-hidden z-10",children:(0,n.jsx)("div",{className:(0,d.A)("flex items-center justify-center h-full w-full transition-colors",t?"bg-accent-secondary-900":"bg-accent-secondary-900/50"),children:(0,n.jsxs)("p",{className:"text-accent-secondary-100 flex flex-row items-center gap-2.5",children:[(0,n.jsx)(ts._,{size:20,className:"opacity-50"}),(0,n.jsx)(N.A,{defaultMessage:"Drop files here to add to chat",id:"IYBR/J+nuA"})]})})})};var ti=a(45727),tr=a(9537),to=a(37076),td=a(45986),tc=a.n(td),tu=a(73347),tm=a(59448);function tp(e){var t,a;let{isOpen:s,onClose:l,client:i,prompt:r}=e,o=(0,p.A)(),d=(0,m.useCallback)(()=>{x({}),l()},[l]),c=(0,tm.f$)(d),[u,x]=(0,m.useState)({}),h=null==r||null==(t=r.arguments)?void 0:t.some(e=>e.required&&!u[e.name]);return r&&i?(0,n.jsxs)(to.aF,{title:o.formatMessage({defaultMessage:"Enter prompt inputs",id:"zDs90mJ5UJ"}),subtitle:(0,n.jsxs)("div",{className:"flex flex-col gap-1 mt-1",children:[r.name,(0,n.jsx)(tu.M,{text:r.description})]}),isOpen:s,onClose:d,modalSize:"lg",children:[(0,n.jsx)("div",{className:"flex flex-col gap-4 max-h-[500px] mb-4 overflow-y-auto",children:null==(a=r.arguments)?void 0:a.map(e=>(0,n.jsx)("div",{className:"flex flex-col gap-1",children:(0,n.jsx)(tr.ks,{required:e.required,label:"".concat(tc()(e.name.toLowerCase())).concat(e.required?"*":""),placeholder:e.description,value:u[e.name]||"",onValueChange:t=>x(a=>({...a,[e.name]:null!=t?t:""})),onBlur:()=>{x(t=>{var a;return{...t,[e.name]:(null!=(a=t[e.name])?a:"").trim()}})},error:e.required&&""===u[e.name]},e.name)},e.name))}),(0,n.jsxs)(to.vW,{children:[(0,n.jsx)(q.$,{disabled:h,onClick:()=>void c(i,r,u),children:(0,n.jsx)(N.A,{defaultMessage:"Add prompt",id:"8UhdEv01LN"})}),(0,n.jsx)(q.$,{variant:"secondary",onClick:d,children:(0,n.jsx)(N.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]}):null}var tx=a(76761),th=a(41932),tf=a(52909),tg=a(91768),tv=a(15957),ty=a(51699);let tb=e=>{let{moveAttachments:t=!1,handleProjectCreated:a,isOpen:s,handleClose:l,syncSources:i=[],attachments:r=[],setSyncSourceUuids:o,setAttachments:d}=e,[c,u]=(0,m.useState)(null),{addError:p}=(0,A.Y)(),x=(0,tv.n)();return tj({project:c,syncSources:i,attachments:r,setSyncSourceUuids:o,setAttachments:d}),(0,n.jsxs)(to.aF,{isOpen:s,onClose:l,modalSize:"xl",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsx)("h1",{className:"font-heading text-text-200 mb-4",children:t?(0,n.jsx)(N.A,{defaultMessage:"Create a project with attachments",id:"wSxz4Q9mjA"}):(0,n.jsx)(N.A,{defaultMessage:"Create a project",id:"HR5A+UPiIu"})}),(0,n.jsx)(q.$,{onClick:l,size:"icon",variant:"ghost",children:(0,n.jsx)(tx.X,{size:16})})]}),s&&(0,n.jsx)(ty.Kk,{syncSources:t?i:void 0,onProjectCreated:e=>{t&&u(e),a(e)},onError:p,onCancel:l,strings:x})]})},tj=e=>{let{project:t,syncSources:a,attachments:s,setSyncSourceUuids:n,setAttachments:l}=e,i=(0,m.useRef)(!1),{addSuccess:r}=(0,A.Y)(),o=(0,p.A)(),{mutate:d}=(0,th.fh)(null==t?void 0:t.uuid),{mutate:c}=(0,tf.pz)(null==t?void 0:t.uuid),u=(0,m.useCallback)(()=>{t&&(s.length||a.length&&t.is_private)&&(s.forEach(e=>{let{file_name:t,extracted_content:a}=e;d({file_name:t,content:a})}),t.is_private&&(a.forEach(e=>{let t=(0,tg.tS)(e);t&&c(t)}),n([])),l([]),r(o.formatMessage({defaultMessage:"Attachments successfully added to {projectName}",id:"xw8MJ6Kd/h"},{projectName:t.name||"your project"})))},[t,r,s,d,l,c,n,a,o]);(0,m.useEffect)(()=>{t&&!i.current&&(i.current=!0,u())},[t,u])};var tw=a(98518),tk=a(90517),tM=a(43989),tA=a(37790),tC=a(17423),tN=a(61125),t_=a(3975),tS=a(7033),tI=a(99778),tE=a(54556),tT=a(53357),tD=a(91039),tO=a(29585);let tR=()=>{let{addError:e}=(0,A.Y)();return{handleRateLimitError:(t,a)=>{t instanceof tO.LG&&429===t.statusCode?e("You’ve reached the limit for Claude messages at this time. Please wait before trying again."):e(a)}}},tz=(0,tD.default)(()=>a.e(2342).then(a.bind(a,52342)).then(e=>({default:e.WritingAnimation})),{loadableGenerated:{webpack:()=>[52342]},ssr:!1}),tL={default:{type:"spring",stiffness:650,damping:60},opacity:{type:"tween",ease:"easeOut",duration:.35}},tP=(0,m.forwardRef)((e,t)=>{let{setScreen:a,onStyleChange:s,animateBoolRef:l}=e,i=(0,p.A)(),r=(0,tw.st)(),[o,d]=(0,m.useState)(!1),[x,h]=(0,m.useState)(""),{handleRateLimitError:f}=tR(),{mutateAsync:g}=(0,tC.f$)(),v=(0,m.useRef)(null),y=(0,m.useRef)(null);(0,m.useEffect)(()=>{o&&setTimeout(()=>{var e;return null==(e=y.current)?void 0:e.focus()},50)},[o]);let[b,j]=(0,m.useState)(!1),[w,k]=(0,m.useState)(!1),M=(0,m.useRef)(null),C=(0,m.useRef)(null),_=4e3,{handleFileUpload:S,handleTextUpload:I}=function(e){let[t,a]=(0,m.useState)(!1),{activeOrganization:s}=(0,O.YL)(),{addError:n}=(0,A.Y)(),l=(0,D.mn)();return{handleFileUpload:async i=>{if(t||!s)return;if(a(!0),!(0,tN.eT)(i))try{let t=await (0,tN.F9)(i);await e(t),a(!1);return}catch(e){}let r=new FormData;r.append("file",i);try{let t=await l("/api/organizations/".concat(s.uuid,"/convert_document"),{method:"POST",body:r});if(!t.ok)throw Error("Document conversion failed");let a=await t.json();if(!(null==a?void 0:a.extracted_content))throw Error("Document conversion failed: No extracted content");await e(a.extracted_content)}catch(e){n(e instanceof Error?e.message:"Error uploading file")}finally{a(!1)}},handleTextUpload:async n=>{!t&&s&&0!==n.trim().length&&(a(!0),await e(n),a(!1))},isUploading:t}}(async e=>{try{M.current=await g({content_example:e})}catch(e){f(e,i.formatMessage({defaultMessage:"Failed to create style. Please try again.",id:"GF2W10J5zb"})),j(!1)}}),E=()=>{M.current?s(M.current,!0):C.current=setTimeout(E,_=1e3)},T=async()=>{L(),await I(x)},R=async e=>{let t=Array.from(e.dataTransfer.files);t&&(k(!0),setTimeout(L,20),await S(t[0]))},z=async e=>{let t=e.target.files;t&&(L(),await S(Array.from(t)[0])),e.target.value=""},L=()=>{j(!0),C.current=setTimeout(E,_)};return(0,n.jsx)(u.P.div,{ref:t,className:"w-full h-full grid place-items-center",exit:{opacity:0,scale:.8},transition:l.current?tL:{duration:0},children:(0,n.jsxs)(c.N,{mode:"popLayout",children:[b&&(0,n.jsx)(u.P.div,{className:"w-full h-full grid place-items-center",initial:{opacity:0},animate:{opacity:1},transition:tL,children:(0,n.jsx)(tF,{})},"CreateStyleAnalyzingContentScreen"),!b&&(0,n.jsxs)(u.P.div,{className:"w-full h-full pt-1 flex flex-col sm:grid sm:grid-cols-2 sm:gap-4",children:[(0,n.jsxs)(u.P.div,{exit:{opacity:0,y:40,transition:tL},className:"sm:h-full text-center flex flex-col gap-2 items-center justify-center px-2 pt-8 pb-8 sm:pt-14 sm:pb-20",children:[(0,n.jsx)("div",{className:"relative pb-2 w-full flex items-center justify-center",children:(0,n.jsx)(tz,{})}),(0,n.jsx)("p",{className:"text-text-300 font-claude-response sm:text-lg",children:(0,n.jsx)(N.A,{defaultMessage:"Share a writing example or describe your style and Claude will make a custom writing style tailored just for you.",id:"2qm6Zfzfx3"})})]},"CreatStyleStartScreenExplainer"),(0,n.jsx)(u.P.div,{className:"h-full flex-1",exit:{opacity:0,x:0,scale:.8,transition:{basicTransition:tL}},children:o?(0,n.jsxs)("div",{className:"h-full flex flex-col gap-2 p-2 rounded-xl border-0.5 border-border-300",children:[(0,n.jsx)("textarea",{ref:y,className:" flex-1 min-h-0 bg-bg-000 border border-border-200 p-3 leading-5 rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:i.formatMessage({defaultMessage:"Paste at least a few paragraphs of example writing, including from multiple various sources if you’d like, for Claude to analyze and the match style of...",id:"mC+9IzmmMY"}),value:x,onChange:e=>h(e.target.value),required:!0}),(0,n.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,n.jsx)(q.$,{variant:"secondary",onClick:()=>d(!1),children:(0,n.jsx)(N.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,n.jsx)(q.$,{onClick:T,children:(0,n.jsx)(N.A,{defaultMessage:"Create style",id:"OC52fhpn7g"})})]})]}):(0,n.jsxs)(ta.wC,{className:"w-full h-full text-center border-dashed border border-border-300 bg-bg-000 rounded-xl relative grid place-items-center",onDrop:R,children:[(0,n.jsx)(tU,{showDropCover:w},"DropZoneOverlay"),(0,n.jsx)("input",{ref:v,type:"file",className:"hidden",accept:(0,tN.cm)({imagesEnabled:!1}).join(","),onChange:z,multiple:!0}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(W.ms,{trigger:(0,n.jsx)(q.$,{variant:"flat",className:"mt-2 font-medium !text-accent-secondary-100 bg-accent-secondary-900 hover:!bg-accent-secondary-100/15 gap-2",prepend:(0,n.jsx)(t_.C,{weight:"bold"}),children:(0,n.jsx)(N.A,{defaultMessage:"Add writing example",id:"EhXT0lXWRc"})}),children:[(0,n.jsx)(W.tJ,{children:(0,n.jsxs)("div",{className:"flex items-center gap-2",onClick:()=>{v.current&&v.current.click()},children:[(0,n.jsx)(tS.x,{size:16}),(0,n.jsx)(N.A,{defaultMessage:"Upload from device",id:"vMaZk5Jcnv"})]})}),(0,n.jsx)(W.tJ,{onClick:()=>d(!0),children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(tI.v,{size:16}),(0,n.jsx)(N.A,{defaultMessage:"Paste text content",id:"nVQ9XcjUIh"})]})})]}),(0,n.jsxs)("div",{className:"text-xs text-text-400 mt-3 flex flex-col gap-1 max-sm:pb-8",children:[(0,n.jsx)("p",{children:window.innerWidth<=640?(0,n.jsx)(N.A,{defaultMessage:"Select or paste existing doc, post, message, etc.",id:"7oFd31Vmu3"}):(0,n.jsx)(N.A,{defaultMessage:"Select, drop, or paste existing doc, post, message, etc.",id:"ugXnNZ7Ix/"})}),(0,n.jsx)("p",{children:(0,n.jsx)(N.A,{defaultMessage:"Content is not stored after matching style.",id:"bLEGIyr72h"})})]})]}),(0,n.jsx)("div",{className:"absolute w-full bottom-6",children:(0,n.jsx)(q.$,{variant:"underline",size:"inline",className:"text-sm gap-1.5",prepend:(0,n.jsx)(tE.u,{}),onClick:()=>{r.track({event_key:"styles.custom.describe_clicked"}),a(tk.I.CREATE_MANUALLY)},children:(0,n.jsx)(N.A,{defaultMessage:"Describe style instead",id:"p6hP+KeXkD"})})})]})},"CreatStyleStartScreenDropZone")]},"CreatStyleStartScreen")]})})});tP.displayName="CreateStyle";let tU=e=>{let{showDropCover:t}=e,{dragState:a}=(0,ta.t1)(),s=a===ta.mq.DRAGGING_OFF_TARGET||a===ta.mq.DRAGGING_ON_TARGET||t;return(0,n.jsx)(c.N,{children:s&&(0,n.jsx)(u.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:(0,d.A)("absolute -inset-px z-10 flex flex-col justify-center rounded-xl border border-dashed transition-colors",a===ta.mq.DRAGGING_ON_TARGET||t?"bg-accent-secondary-900 border-accent-secondary-200 text-accent-secondary-000":"bg-bg-100 border-border-200 text-text-300"),children:(0,n.jsxs)("div",{className:"py-1.5 text-center",children:[(0,n.jsx)("div",{className:"relative inline-block opacity-60",children:(0,n.jsx)(tT.p,{size:36,weight:"thin"})}),(0,n.jsx)("div",{className:"font-claude-response pt-2 pb-4 italic tracking-tight",children:(0,n.jsx)(N.A,{defaultMessage:"Drop example writing here to match the style",id:"VcDT1Dt8dq"})})]})},"drop-zone-overlay")})},tF=()=>(0,n.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,n.jsx)(tz,{animate:!0}),(0,n.jsx)(u.P.div,{className:"font-claude-response italic text-lg",initial:{opacity:0,y:-15},animate:{opacity:1,y:0},transition:{opacity:{delay:.2,ease:"easeOut",duraation:.6},y:{delay:.2,type:"spring",stiffness:230,damping:20}},children:(0,n.jsx)(N.A,{defaultMessage:"Analyzing your writing...",id:"AnDnGKCn6M"})})]});var tG=a(46770),tH=a(29125),tY=a(88999),tB=a(31887);let tV={objective:{label:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tG.W,{})," ",(0,n.jsx)(N.A,{defaultMessage:"Define style objective",id:"gJB/90MGQ7"})]}),description:"Describe the main purpose and goal of this writing style — whether to teach, analyze, persuade, inspire, etc.",placeholder:"Try something like:\nI want to teach complex topics step-by-step, with a focus on building understanding.",promptPrepend:"I’d like the writing to serve this purpose:"},audience:{label:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tB.t,{})," ",(0,n.jsx)(N.A,{defaultMessage:"Tailor to an audience",id:"TYdBxyl/f3"})]}),description:"Describe details of the target audience you’d like Claude to write for including relevant information, needs, or preferences.",placeholder:"Try something like:\nWrite for marketing professionals. They’re tech-savvy and appreciate a dash of humor with their data.",promptPrepend:"I’d like to tailor this style to a specific audience:"},voicetone:{label:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tH.r,{})," ",(0,n.jsx)(N.A,{defaultMessage:"Use specific voice & tone",id:"1Vo908p7lJ"})]}),description:"Think about characteristics like formality, emotion, personality, and how you want the written responses to feel.",placeholder:"Try something like:\nWrite in a warm, approachable tone with light professional humor - like a friendly mentor.",promptPrepend:"I’d like to write in this voice and tone:"},general:{label:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tE.u,{})," ",(0,n.jsx)(N.A,{defaultMessage:"Describe generally",id:"f3JnPS+B3+"})]}),description:"Describe in detail how you would like Claude to write. Be as specific as you can.",placeholder:"Try something like:\nWrite like an excited scientist explaining fascinating discoveries - technical but energetic.",promptPrepend:"I’d like to write like this:"},custom:{label:(0,n.jsx)(N.A,{defaultMessage:"Use custom instructions (advanced)",id:"hSfu0Sz47T"}),description:"Write exact custom instructions for this style instead of generating a style prompt automatically. Claude will ignore instructions that don’t follow our guidelines.",placeholder:"Write style custom instructions here...",promptPrepend:""}},tK=(0,m.forwardRef)((e,t)=>{let{setScreen:a,onStyleChange:s}=e,l=(0,p.A)(),i=(0,tw.st)(),[r,o]=(0,m.useState)(!1),[x,h]=(0,m.useState)(""),[f,g]=(0,m.useState)(Object.keys(tV)[0]),{handleRateLimitError:v}=tR(),{mutateAsync:y}=(0,tC.f$)(),b=(0,m.useRef)(null);(0,m.useEffect)(()=>{setTimeout(()=>{var e;return null==(e=b.current)?void 0:e.focus()},50)},[f]);let j=x.replace(/\s/g,"").length>24,w=async()=>{if(!r&&j){o(!0);try{let e="custom"===f?{prompt:x}:{input_text:tV[f].promptPrepend+"\n"+x},t=await y(e);s(t,!1)}catch(e){v(e,l.formatMessage({defaultMessage:"Failed to create style. Please try again.",id:"GF2W10J5zb"}))}finally{o(!1)}}},k=e=>{i.track({event_key:"styles.custom.describe_selected",key:e}),g(e)};return(0,n.jsxs)(u.P.div,{ref:t,className:"w-full h-full flex flex-col sm:grid sm:grid-cols-2 gap-4 pt-3",children:[(0,n.jsxs)("div",{className:"flex flex-col sm:h-full sm:pr-3",children:[(0,n.jsxs)("div",{className:"flex-1 text-text-300",children:[(0,n.jsx)("p",{className:"mb-1 sm:mb-2 text-sm font-medium",children:(0,n.jsx)(N.A,{defaultMessage:"Generate style from a starting point:",id:"cz09/5alWg"})}),(0,n.jsx)("ul",{className:"hidden sm:flex flex-col gap-1.5",children:Object.keys(tV).map(e=>(0,n.jsx)("li",{children:(0,n.jsxs)("button",{className:(0,d.A)("flex gap-1.5 items-center font-ui tracking-tight h-11 rounded-lg border border-border-400 hover:border-border-300 px-3 w-full text-left transition active:scale-[1.015] hover:bg-bg-200",f===e&&"!bg-accent-secondary-900 text-accent-secondary-000 !border-accent-secondary-100/80","custom"===e&&"mt-2 text-sm"),onClick:()=>k(e),children:[(0,n.jsx)("div",{className:"w-4 h-4 rounded-full bg-bg-100 grid place-items-center border border-border-300 mr-1",children:f===e&&(0,n.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-accent-secondary-100"})}),tV[e].label]})},e))}),(0,n.jsx)("div",{className:"sm:hidden",children:(0,n.jsx)(W.ms,{trigger:(0,n.jsx)(q.$,{variant:"ghost",append:(0,n.jsx)(Q.a,{}),className:"w-full !border !border-border-300",children:(0,n.jsx)("div",{className:"flex-1 text-left flex items-center gap-1",children:tV[f].label})}),children:Object.keys(tV).map(e=>(0,n.jsx)(W.tJ,{onSelect:()=>k(e),children:(0,n.jsx)("div",{className:"flex items-center gap-1",children:tV[e].label})},e))})})]}),(0,n.jsx)("div",{className:"mb-4 max-sm:hidden",children:(0,n.jsx)(q.$,{variant:"underline",size:"inline",className:"text-sm gap-1",onClick:()=>a(tk.I.CREATE),prepend:(0,n.jsx)(tY.f,{}),children:(0,n.jsx)(N.A,{defaultMessage:"Never mind, I’ll add an example",id:"PpPoeCEz4X"})})})]}),(0,n.jsxs)("form",{className:"flex flex-col h-full rounded-xl border-0.5 border-border-300 bg-bg-200 px-3 py-2 gap-2",onSubmit:e=>{e.preventDefault(),w()},children:[(0,n.jsx)("p",{className:"pt-0 p-1 text-text-300 font-claude-response max-sm:text-sm",children:tV[f].description}),(0,n.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,n.jsx)("textarea",{ref:b,className:" min-h-0 w-full h-full bg-bg-000 border border-border-200 p-3 leading-snug rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:tV[f].placeholder,value:x,required:!0,onChange:e=>h(e.target.value)}),(0,n.jsx)(c.N,{children:x.length>0&&!j&&(0,n.jsx)(u.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:.1},className:"absolute bottom-1 right-1 left-1 py-2 px-2 rounded-md text-sm bg-accent-secondary-900 text-text-200 text-center",children:(0,n.jsx)(N.A,{defaultMessage:"Be as descriptive as possible to help Claude generate the best possible style for you",id:"3ObAHHjHgF"})})})]}),(0,n.jsx)(X.m,{tooltipContent:j?"":l.formatMessage({defaultMessage:"More description needed in order to generate style",id:"vX4dBOsKs3"}),side:"bottom",className:"text-center",children:(0,n.jsx)("div",{className:"flex items-center w-full justify-center pb-1",children:(0,n.jsx)(q.$,{className:"w-full",type:"submit",loading:r,disabled:!j,children:"custom"===f?(0,n.jsx)(N.A,{defaultMessage:"Create style",id:"OC52fhpn7g"}):(0,n.jsx)(N.A,{defaultMessage:"Generate style",id:"tILvvoBa87"})})})})]})]})});tK.displayName="CreateStyleManually";var tq=a(9946),tW=a(61547),tX=a(21777),tJ=a(63965),t$=a(29035),tZ=a(11439),tQ=a(97240),t0=a(35687),t1=a(16566),t2=a(75032),t5=a(49194),t7=a(19125);function t6(){let[e,t]=(0,t7.V)("userHiddenStyles",[]),a=(0,m.useCallback)(e=>{let a=(0,t5.X)(e);t(e=>[...e,a])},[t]),s=(0,m.useCallback)(()=>{t([])},[t]),n=(0,m.useCallback)(t=>t.filter(t=>{let a=(0,t5.X)(t);return!e.includes(a)}),[e]);return{hiddenPresetStyles:e,setHiddenPresetStyles:t,addHiddenPresetStyle:a,resetHiddenPresetStyles:s,filterHiddenStyles:n}}var t4=function(e){return e.VIEW="view",e.EDIT="edit",e.EDIT_MANUALLY="edit_manually",e}(t4||{});let t3=G.z.array(G.z.object({key:G.z.string(),name:G.z.string(),nameKey:G.z.string().optional(),text:G.z.string(),textKey:G.z.string().optional()})),t8=[],t9=()=>(0,r.T9)("claude_style_previews","previewExamples",t8,t3),ae=e=>{let{isSaveButton:t,children:a}=e;return(0,n.jsx)("div",{className:(0,d.A)("flex gap-1.5",t?"sm:absolute sm:top-5 sm:right-16 max-sm:mt-3 max-sm:-mb-2":"absolute top-5 right-16"),children:a})},at=(0,m.forwardRef)((e,t)=>{let{animateBoolRef:a,style:s,setCurrentStyle:l,returnToListScreen:i,setChatStyle:r,setIsEditing:o,setIsEditingName:d}=e,c=(0,p.A)(),x=(0,t5.X)(s),h="default"===s.type,[f,g]=(0,m.useState)("view"),{mutateAsync:v}=(0,tC.lo)(x,h),{handleRateLimitError:y}=tR(),b=async e=>{let{prompt:t,editInput:a}=e;try{let e=await v({prompt:t,edit_instructions:a});e&&l(e)}catch(e){throw y(e,c.formatMessage({defaultMessage:"Failed to edit style. Please try again.",id:"1WkY08RVLW"})),Error}},j=e=>{o("edit"===e||"edit_manually"===e),g(e)};return(0,n.jsxs)(u.P.div,{className:"flex-1 min-h-0 grid sm:grid-cols-2 gap-3 pt-3",ref:t,children:["view"===f&&(0,n.jsxs)(ae,{children:[(0,n.jsx)(q.$,{variant:"secondary",className:"text-sm max-sm:hidden",onClick:()=>r(s),children:(0,n.jsx)(N.A,{defaultMessage:"Use style",id:"f7VY0ldE+0"})}),(0,n.jsx)(ai,{style:s,returnToListScreen:i,onRename:()=>d(!0),setStateToManualEdit:()=>j("edit_manually")})]}),(0,n.jsxs)(u.P.div,{className:"min-h-0",initial:!!a.current&&{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{scale:{type:"spring",stiffness:230,damping:15,delay:.1},opacity:{duration:.3,delay:.1}},children:["view"===f&&(0,n.jsx)(an,{style:s,onClick:()=>j("edit")}),"edit"===f&&(0,n.jsx)(aa,{style:s,updateStyle:b,onClose:()=>j("view")}),"edit_manually"===f&&(0,n.jsx)(as,{style:s,updateStyle:b,onClose:()=>j("view")})]}),(0,n.jsx)(al,{style:s,animateBoolRef:a})]})});at.displayName="EditStyle";let aa=e=>{let{style:t,updateStyle:a,onClose:s}=e,l=(0,p.A)(),i=(0,m.useRef)(t.prompt),r=(0,m.useRef)(null),[o,x]=(0,m.useState)(!1),[h,f]=(0,m.useState)(!1),[g,v]=(0,m.useState)([]),[y,b]=(0,m.useState)(""),j=async e=>{if(e.preventDefault(),o||h)return!1;await w(y)},w=async e=>{b(""),x(!0),v([...g,e]);try{await a({editInput:e})}catch(e){b(y),v(e=>e.slice(0,-1))}x(!1)},k=async()=>{g.length&&(f(!0),await a({prompt:i.current}),f(!1)),s()},M=(0,m.useMemo)(()=>{if(!t.attributes)return[];let e=Math.floor(Math.random()*t.attributes.length),a=e+1<t.attributes.length?e+1:e-1;return[l.formatMessage({defaultMessage:"A bit more {attribute}",id:"au1WTQvqDg"},{attribute:t.attributes[e].name.toLowerCase()}),l.formatMessage({defaultMessage:"Much less {attribute}",id:"dIbq/Ow8Zn"},{attribute:t.attributes[a].name.toLowerCase()})]},[t.attributes,l]);return(0,m.useEffect)(()=>{if(g.length>0){var e;null==(e=r.current)||e.scrollTo({top:r.current.scrollHeight,behavior:"smooth"})}},[g,t.summary]),(0,n.jsxs)("div",{className:"h-full flex flex-col",children:[(0,n.jsxs)("div",{className:"flex-1 min-h-0 flex flex-col gap-2 p-2.5 rounded-xl border border-accent-secondary-100/50 bg-bg-100 ",children:[(0,n.jsxs)("div",{className:(0,d.A)("border-0.5 rounded-lg p-3 pt-2.5 mb-2 relative transition bg-gradient-to-b",o?"border-border-300 from-accent-secondary-900/50 to-accent-secondary-900/10":"border-accent-secondary-100/50 from-accent-secondary-900/75 to-accent-secondary-900/25"),children:[(0,n.jsx)("div",{className:(0,d.A)("font-claude-response font-normal text-pretty leading-snug tracking-tight text-text-200 transition",o?"opacity-0 scale-[0.975]":"delay-150 duration-150 ease-out"),children:t.summary}),(0,n.jsx)(c.N,{children:o&&(0,n.jsx)(u.P.div,{className:"absolute inset-0 grid place-items-center",initial:{scale:.75,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.75,opacity:0},children:(0,n.jsx)(tW.a,{state:"thinking"})})})]}),(0,n.jsx)("ul",{ref:r,className:"flex-1 min-h-0 overflow-y-auto flex flex-col gap-2",children:g.map(e=>(0,n.jsx)("li",{children:(0,n.jsx)("div",{className:"inline-block py-2 px-3 rounded-lg bg-bg-300 text-sm",children:e})},e))}),g.length>0?(0,n.jsx)("div",{className:"text-sm text-center text-text-500",children:(0,n.jsx)(N.A,{defaultMessage:"Ask for more edits, save, or discard changes",id:"zOxoAYYCog"})}):(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsx)("div",{className:"text-sm text-text-500 mb-2",children:(0,n.jsx)(N.A,{defaultMessage:"Describe how you’d like to edit the style, like:",id:"PRDvfjUkNA"})}),(0,n.jsx)("ul",{className:"flex flex-col gap-2",children:M.map((e,t)=>(0,n.jsx)("li",{children:(0,n.jsx)("button",{onClick:t=>{t.preventDefault(),w(e)},className:"text-sm font-medium h-8 px-3 rounded-full border-0.5 border-border-200 text-text-200 bg-gradient-to-b hover:text-text-000 hover:from-bg-400/0 hover:to-bg-400/50 hover:border-border-100 active:scale-x-[0.985] active:scale-y-[0.995] transition",children:e})},t))})]}),(0,n.jsx)("form",{className:"mb-1.5 mx-0.5",onSubmit:e=>j(e),children:(0,n.jsx)(tr.ks,{autoFocus:!0,className:"w-full",name:"inputText",placeholder:l.formatMessage({defaultMessage:"Ask Claude to edit the style...",id:"5D1Fao75P8"}),size:"lg",value:y,onChange:e=>b(e.target.value),append:(0,n.jsx)(c.N,{children:y.length>0&&(0,n.jsx)(u.P.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.85,opacity:0,transition:{ease:"easeIn",duration:.1}},children:(0,n.jsx)(q.$,{type:"submit",size:"icon_sm",variant:"flat",disabled:o||h,children:(0,n.jsx)(tJ.D,{})})})})})})]}),(0,n.jsxs)(ae,{isSaveButton:!0,children:[(0,n.jsx)(q.$,{onClick:s,disabled:o||h||y.length>0||0===g.length,children:(0,n.jsx)(N.A,{defaultMessage:"Save changes",id:"X0ha1a+WYV"})}),(0,n.jsx)(q.$,{onClick:k,disabled:o,loading:h,variant:"secondary",children:g.length>0?(0,n.jsx)(N.A,{defaultMessage:"Discard",id:"nmpevlUATU"}):(0,n.jsx)(N.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})},as=e=>{let{style:t,updateStyle:a,onClose:s}=e,[l,i]=(0,m.useState)(!1),[r,o]=(0,m.useState)(t.prompt),d=(0,p.A)(),c=async e=>{e.preventDefault(),i(!0),await a({prompt:r}),i(!1),s()};return(0,n.jsxs)("form",{className:"flex flex-col gap-2 h-full min-h-0 p-3 pt-2 rounded-xl border-0.5 border-border-200",onSubmit:e=>c(e),children:[(0,n.jsx)("div",{className:"text-center text-sm text-text-200 font-medium",children:(0,n.jsx)(N.A,{defaultMessage:"Edit style instructions manually",id:"+qSf1b/LLJ"})}),(0,n.jsx)("textarea",{className:" flex-1 min-h-0 bg-bg-000 border border-border-200 p-3 leading-5 rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:d.formatMessage({defaultMessage:"Describe your style instructions",id:"nk7EX3l+b4"}),value:r,disabled:l,onChange:e=>o(e.target.value),autoFocus:!0}),(0,n.jsxs)(ae,{isSaveButton:!0,children:[(0,n.jsx)(q.$,{type:"submit",loading:l,children:(0,n.jsx)(N.A,{defaultMessage:"Save changes",id:"X0ha1a+WYV"})}),(0,n.jsx)(q.$,{onClick:()=>{o(t.prompt),s()},disabled:l,variant:"secondary",children:(0,n.jsx)(N.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})},an=e=>{let{style:t,onClick:a}=e,s="default"===t.type;return(0,n.jsxs)("div",{className:(0,d.A)("flex flex-col items-center h-full px-6 gap-4 rounded-lg sm:rounded-xl max-sm:mx-1.5",!s&&"bg-gradient-to-b from-accent-secondary-900/75 to-accent-secondary-900/25 border border-accent-secondary-100/50",s&&"bg-bg-300 border border-border-300"),children:[(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)("div",{className:(0,d.A)("w-fit px-4 py-2 pb-2.5 gap-2.5 rounded-b-lg font-medium text-xs tracking-tight",s?"bg-bg-400 text-text-300":"bg-accent-secondary-200/10 text-accent-secondary-100"),children:s?(0,n.jsx)(N.A,{defaultMessage:"Preset style",id:"qwpRSZtBAV"}):(0,n.jsx)(N.A,{defaultMessage:"Your custom style",id:"o/vLK7B7mw"})})}),(0,n.jsxs)("div",{className:"flex flex-col items-center gap-1.5 pb-4",children:[!s&&(0,n.jsx)(X.m,{className:"text-center",tooltipContent:(0,n.jsx)(N.A,{defaultMessage:"Full style instructions are generated and include more than shown in summary. You can edit instructions manually from the options menu",id:"R5PMcY1ELo"}),children:(0,n.jsxs)("div",{className:"flex items-center gap-1 cursor-help opacity-50 hover:opacity-60",children:[(0,n.jsx)("span",{className:"text-sm font-medium",children:(0,n.jsx)(N.A,{defaultMessage:"Style summary",id:"hVmQ4DO8io"})}),(0,n.jsx)(eW.R,{size:12,className:"translate-y-px",weight:"bold"})]})}),(0,n.jsx)("div",{"data-testid":"style-summary",className:"font-claude-response text-xl font-normal text-pretty leading-snug tracking-tight text-center flex-1 flex items-center",children:"default"===t.type&&t.summaryKey?(0,n.jsx)(i.X5,{id:t.summaryKey}):t.summary})]}),(0,n.jsx)("div",{className:"flex-1 flex items-center text-sm",children:s?(0,n.jsx)(N.A,{defaultMessage:"Preset styles are not editable",id:"qjKy0s/reb"}):(0,n.jsx)(q.$,{variant:"outline",onClick:a,className:"!border-accent-secondary-200 !text-accent-secondary-000 hover:!bg-accent-secondary-100/10",prepend:(0,n.jsx)(t1.f,{weight:"bold"}),children:(0,n.jsx)(N.A,{defaultMessage:"Edit with Claude",id:"wdKoWlVN+G"})})})]})},al=e=>{let{style:t,animateBoolRef:a}=e,s=(0,p.A)(),[l,o]=(0,m.useState)(""),[x,h]=(0,m.useState)(),f=(0,m.useRef)(t.prompt),g=(0,m.useRef)(x),v=t9(),{handleRateLimitError:y}=tR(),{isPending:b,mutateAsync:j}=(0,tC.n7)(),w=(0,m.useCallback)(async()=>{if(x)try{let e=await j({style_prompt:t.prompt,example_key:x.key,example_text:x.textKey?(0,i.fl)({id:x.textKey,intl:s}):x.text});o(e)}catch(e){y(e,s.formatMessage({defaultMessage:"Failed to preview style. Please try again.",id:"B2A4x/wbTg"}))}},[y,j,x,t.prompt,s]);(0,m.useEffect)(()=>{var e;(f.current!==t.prompt||(null==(e=g.current)?void 0:e.key)!==(null==x?void 0:x.key))&&(f.current=t.prompt,g.current=x,w())},[w,x,t.prompt]);let{value:k}=(0,r.fS)("use_in_house_latex_transformer");return(0,n.jsx)(u.P.div,{className:(0,d.A)("max-sm:hidden flex flex-col gap-2 h-full min-h-0 p-2 rounded-xl border-0.5 border-border-300 transition-colors",x?"bg-bg-000/70":"bg-bg-000/20"),initial:!!a.current&&{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{scale:{type:"spring",stiffness:230,damping:15,delay:.2},opacity:{duration:.3,delay:.2}},children:x?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex items-center text-sm px-2 font-medium text-text-200",children:[(0,n.jsx)(N.A,{defaultMessage:"Previewing with",id:"tNFdPqESDT"}),(0,n.jsx)(W.ms,{align:"center",trigger:(0,n.jsx)(q.$,{variant:"ghost",size:"unset",className:"!px-1 !py-0.5 gap-0.5 !text-accent-secondary-100 hover:!bg-accent-secondary-900",append:(0,n.jsx)(t2.a,{className:"translate-y-px"}),children:x?x.nameKey?(0,n.jsx)(i.X5,{id:x.nameKey}):x.name:(0,n.jsx)(N.A,{defaultMessage:"Example",id:"xrCRnH/mKK"})}),children:v.map(e=>(0,n.jsx)(W.tJ,{disabled:b,onClick:()=>h(e),children:e.nameKey?(0,n.jsx)(i.X5,{id:e.nameKey}):e.name},e.key))})]}),(0,n.jsxs)(tX.E,{className:"p-2 pt-0 min-h-0 overflow-y-scroll",children:[(0,n.jsx)("div",{className:"bg-bg-300 -mx-0.5 mb-2 py-1.5 px-2 text-sm rounded-lg text-pretty",children:x.textKey?(0,n.jsx)(i.X5,{id:x.textKey}):x.text}),(0,n.jsx)(c.N,{children:b?(0,n.jsx)("div",{className:"pt-2",children:(0,n.jsx)(tW.a,{state:"writing"})}):(0,n.jsx)(u.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{ease:"easeIn",duration:.25},children:(0,n.jsx)(tq.fP,{className:"font-claude-response flex-1 flex flex-col gap-2",text:l,useInHouseLatexPlugin:k})})})]})]}):(0,n.jsx)("div",{className:"flex-1 grid place-items-center text-center",children:(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("div",{className:"text-sm text-text-500 font-medium mb-4",children:(0,n.jsx)(N.A,{defaultMessage:"Preview with an example...",id:"YdUmd5z6YL"})}),(0,n.jsx)("div",{className:"flex flex-wrap justify-center gap-2 w-full",children:v.map(e=>(0,n.jsx)("button",{onClick:()=>h(e),className:"\n                    rounded-full\n                    border-0.5\n                    border-border-300\n                    text-sm\n                    text-text-400\n                    font-medium\n                    h-8\n                    px-3\n                    flex\n                    items-center\n                    bg-gradient-to-b\n                    from-always-black/0\n                    to-always-black/5\n                    hover:bg-accent-secondary-900\n                    hover:text-accent-secondary-000\n                    hover:border-accent-secondary-100/50\n                    transition-colors",children:e.nameKey?(0,n.jsx)(i.X5,{id:e.nameKey}):e.name},e.key))})]})})})},ai=e=>{let{style:t,returnToListScreen:a,onRename:s,setStateToManualEdit:l}=e,i=(0,t5.X)(t),r="default"===t.type,{isPending:o,mutateAsync:d}=(0,tC.M$)(i),{addHiddenPresetStyle:c}=t6(),{clearStoredStyle:u,storedStyle:m}=(0,ti.p)(),{addError:x}=(0,A.Y)(),h=(0,p.A)(),f=async()=>{if(r)c(t),setTimeout(()=>{a()},500);else try{await d(),m&&"uuid"in m&&m.uuid===t.uuid&&u(),a()}catch(e){x(h.formatMessage({defaultMessage:"Failed to delete style. Please try again.",id:"4eIHICfKCI"}))}};return(0,n.jsxs)(W.ms,{align:"end",unstyledTrigger:!0,trigger:(0,n.jsxs)(q.$,{variant:"ghost",className:"max-sm:min-w-8 max-sm:px-2 sm:pl-3 sm:pr-2",children:[(0,n.jsxs)("span",{className:"hidden sm:flex items-center gap-1",children:[(0,n.jsx)(N.A,{defaultMessage:"Options",id:"NDV5MqT9ww"}),"\xa0",(0,n.jsx)(t2.a,{})]}),(0,n.jsx)("span",{className:"sm:hidden",children:(0,n.jsx)(t$.L,{weight:"bold",size:20})})]}),children:[!r&&(0,n.jsx)(W.tJ,{disabled:o,onClick:()=>{s()},children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(tZ.g,{className:"mr-2"}),(0,n.jsx)(N.A,{defaultMessage:"Rename style",id:"sEO8vFphTF"})]})}),"Concise"===i?(0,n.jsx)(W.q,{className:"text-sm",children:(0,n.jsx)(N.A,{defaultMessage:"Concise style can’t be hidden",id:"zTztS+Om9I"})}):(0,n.jsx)(W.tJ,{className:"pr-0 !text-danger-000",disabled:o,onClick:f,children:r?(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(tQ.C,{}),(0,n.jsx)(N.A,{defaultMessage:"Hide preset style",id:"z44N28JZYv"})]}):(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(t0.l,{}),(0,n.jsx)(N.A,{defaultMessage:"Delete style",id:"fAqSoPl78t"})]})}),!r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(W.DG,{}),(0,n.jsx)(W.tJ,{onClick:l,children:(0,n.jsx)(N.A,{defaultMessage:"Edit style manually",id:"H+z4uo2Wfn"})})]})]})},ar=e=>{let{size:t=16,className:a}=e;return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",width:t,height:t,viewBox:"0 0 16 16",className:a,strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{d:"M8.5 4.5c-3 2-4.5 4-5.5 8L2.5 15l1-1.5"}),(0,n.jsx)("path",{d:"M3 4.5c-.5 1.3-.1 5 .4 6.5 0 0 1.9-2 4.1-3 1.8-.8 3.8-.6 4.5-2 .6-1.2-.2-1.7-1.5-1 1.2-.7 4-2 3-3.5-1-1.4-3.5-.1-4.5.8C9 1.9 9 .9 8 1c-1 .1-2 1.5-2.3 2.8 0 0 0-.7-.7-.8-.7-.1-1.6.5-2 1.5Z"}),(0,n.jsx)("path",{d:"M10.5 11v4m-2-2h4"})]})};var ao=a(26505),ad=a(88869),ac=a(17938),au=a(99115),am=a(21139);let ap=(0,m.forwardRef)((e,t)=>{let{setScreen:a,styles:s,onStyleChange:l}=e,{hiddenPresetStyles:i,resetHiddenPresetStyles:r}=t6(),{sortStyles:o,setOrder:d}=function(){let[e,t]=(0,t7.V)("userStylesOrder",[]);return{sortStyles:(0,m.useCallback)(t=>[...t].sort((t,a)=>{let s=(0,t5.X)(t),n=(0,t5.X)(a);if("Default"===s)return -1;if("Default"===n)return 1;let l=e.indexOf(s),i=e.indexOf(n);return -1===l&&-1===i?0:-1===l?1:-1===i?-1:l-i}),[e]),stylesOrder:e,setOrder:(0,m.useCallback)(e=>{t(e.map(e=>(0,t5.X)(e)))},[t])}}(),[c,p]=(0,m.useState)([]),x=(0,m.useCallback)(e=>{let t=[...i,"Default"];return o(e.filter(e=>!t.includes((0,t5.X)(e))))},[i,o]);(0,m.useEffect)(()=>{p(x(s))},[s,x]);let h=(0,m.useCallback)(e=>{Array.isArray(e)&&(p(e),d(e))},[d]),f=(0,m.useMemo)(()=>s.some(e=>"custom"===e.type),[s]);return(0,n.jsxs)(u.P.div,{exit:{opacity:0,transition:{duration:0}},ref:t,className:"flex-1 min-h-0 flex flex-col -mx-3",children:[(0,n.jsxs)("div",{className:"flex-1 min-h-0",children:[(0,n.jsx)(ac.x,{as:"ul",axis:"y",values:c,onReorder:h,layoutScroll:!0,className:"pl-3 pr-3 pb-2 overflow-y-auto max-h-full [mask-image:linear-gradient(to_top,hsl(var(--always-black)/0%)_0%,_hsl(var(--always-black)/100%)_3%)]",children:c.map(e=>(0,n.jsx)(ax,{style:e,onClick:()=>l(e,!1)},(0,t5.X)(e)))}),!f&&(0,n.jsxs)(u.P.div,{initial:{opacity:0,scale:.985},animate:{opacity:1,scale:1,transition:{delay:.3,ease:"easeOut",duration:.3}},exit:{opacity:0},className:"flex bg-gradient-to-b from-accent-pro-900/20 to-accent-pro-900/50 py-3 pl-3.5 pr-5 mx-3 rounded-lg border-0.5 border-border-300 text-text-300 text-sm",children:[(0,n.jsx)("div",{className:"font-ui-serif font-medium mr-4 text-accent-pro-000 mt-px whitespace-nowrap",children:(0,n.jsx)(N.A,{defaultMessage:"Tip",id:"4j1TGZubAJ"})}),(0,n.jsx)("p",{children:(0,n.jsx)(N.A,{defaultMessage:"Choose from preset styles or create your own custom style to tailor elements of Claude’s written responses such as tone, voice, vocabulary, detail level, and more. <link>Learn about styles</link>",id:"pwT6iI4QV7",values:{link:e=>(0,n.jsx)("a",{href:"https://support.anthropic.com/en/articles/10181068-configuring-and-using-styles",className:"underline hover:text-text-000",target:"_blank",children:e})}})})]})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center mt-4 mx-3",children:[(0,n.jsx)(q.$,{onClick:()=>a(tk.I.CREATE),prepend:(0,n.jsx)(ar,{}),children:(0,n.jsx)(N.A,{defaultMessage:"Create custom style",id:"9y/YEanHck"})}),i.length>0&&(0,n.jsx)(q.$,{variant:"underline",onClick:r,children:(0,n.jsx)(N.A,{defaultMessage:"Reset preset styles",id:"EITqrHaUNi"})})]})]})});ap.displayName="ListStyles";let ax=e=>{let{style:t,onClick:a}=e,s="default"===t.type,l=(0,au.m)(),[r,o]=(0,m.useState)(!1);return(0,n.jsxs)(am.N,{value:t,dragListener:!1,dragControls:l,dragTransition:{bounceStiffness:500,bounceDamping:40},onDragStart:()=>o(!0),onDragEnd:()=>o(!1),className:"relative my-2 min-w-0",children:[(0,n.jsxs)("button",{className:(0,d.A)("\n          flex\n          items-center\n          w-full\n          h-11\n          py-4\n          pl-1\n          pr-3\n          min-w-0\n          rounded-lg\n          transition\n          border-0.5\n          border-border-300\n          bg-bg-100\n          bg-gradient-to-b\n          from-bg-300/0\n          to-bg-300/50\n          select-none\n          relative\n        ",r?"scale-y-[1.015] scale-x-[1.0025] shadow-md":"group hover:enabled:from-accent-secondary-200/0 hover:enabled:to-accent-secondary-200/10 hover:enabled:border-accent-secondary-200/50"),onClick:a,children:[(0,n.jsx)("div",{className:"flex min-w-0 items-center flex-1 pl-7 truncate",children:"default"===t.type&&t.nameKey?(0,n.jsx)(i.X5,{id:t.nameKey}):t.name}),s&&(0,n.jsx)("div",{className:"mr-0.5 rounded-full px-2 py-0.5 bg-text-300/5 text-text-400 font-medium text-[0.625rem]",children:(0,n.jsx)(N.A,{defaultMessage:"Preset",id:"EucS2pAMVS"})}),(0,n.jsx)("div",{className:"text-accent-secondary-200 opacity-0 scale-50 transition group-hover:scale-100 group-hover:opacity-100",children:s?(0,n.jsx)(ao.Q,{}):(0,n.jsx)(tZ.g,{})})]}),(0,n.jsx)("div",{onPointerDown:e=>l.start(e),onClick:e=>e.stopPropagation(),className:"w-7 h-7 absolute left-1 top-1/2 -translate-y-1/2 grid place-items-center cursor-move text-text-500 hover:text-accent-secondary-000",children:(0,n.jsx)(ad.H,{size:16,weight:"bold"})})]})},ah=e=>{let{openWithScreen:t,onClose:a,styles:s,setChatStyle:l}=e,r=(0,p.A)(),o=!!t,d=(0,tw.st)(),[u,x]=(0,m.useState)(t||tk.I.LIST),[h,f]=(0,m.useState)(),[g,v]=(0,m.useState)(!1),[y,b]=(0,m.useState)(!1),j=(0,m.useRef)(!1);(0,m.useEffect)(()=>{t&&x(t)},[t]);let w=()=>{j.current=!1,x(tk.I.LIST),v(!1),b(!1)},k=()=>{(!g||window.confirm(r.formatMessage({defaultMessage:"Are you sure? Closing while editing may not synchronize changes.",id:"0XdWZrmwXu"})))&&(d.track({event_key:"styles.modal",open:!1}),w(),a())},M=(e,t)=>{j.current=t,f(e),x(tk.I.EDIT),v(!1),b(!1)};return(0,n.jsx)(to.aF,{modalSize:"xl",title:(e=>{switch(e){case tk.I.CREATE:return(0,n.jsx)("div",{className:"font-ui-serif font-normal",children:(0,n.jsx)(N.A,{defaultMessage:"Create a style",id:"/pKvFi9Ak4"})});case tk.I.CREATE_MANUALLY:return(0,n.jsx)("div",{className:"font-ui-serif font-normal",children:(0,n.jsx)(N.A,{defaultMessage:"Describe your style",id:"Ntblq5cSRe"})});case tk.I.LIST:return(0,n.jsx)("div",{className:"font-ui-serif font-normal",children:(0,n.jsx)(N.A,{defaultMessage:"Customize your styles",id:"dn3MiW/vUH"})});case tk.I.EDIT:return(0,n.jsx)("div",{className:"w-10/12 sm:w-5/12 md:w-7/12",children:y?(0,n.jsx)(af,{style:h,onClose:e=>{e&&f(e),b(!1)}}):(0,n.jsx)("button",{title:h.name,className:"w-full font-ui-serif font-normal text-left truncate cursor-text h-9 pr-4 leading-none translate-y-px text-text-200 hover:text-text-000",onClick:()=>!g&&b(!0),children:g?(0,n.jsx)(N.A,{defaultMessage:"Edit {name}",id:"s3IOQQ+nJU",values:{name:h.name}}):"default"===h.type&&h.nameKey?(0,n.jsx)(i.X5,{id:h.nameKey}):h.name})})}})(u),icon:(e=>{switch(e){case tk.I.CREATE:case tk.I.EDIT:return(0,n.jsx)(q.$,{variant:"ghost",size:"icon_sm",disabled:g,onClick:()=>w(),children:(0,n.jsx)(tM.n,{})});case tk.I.CREATE_MANUALLY:return(0,n.jsx)(q.$,{variant:"ghost",size:"icon_sm",onClick:()=>x(tk.I.CREATE),children:(0,n.jsx)(tM.n,{})});case tk.I.LIST:return null}})(u),isOpen:o,onClose:k,className:"h-[35rem] !bg-gradient-to-b from-bg-100 to-bg-200 !pt-5 !pb-7",prependBeforeCloseButton:(0,n.jsx)(n.Fragment,{children:u===tk.I.LIST&&(0,n.jsx)(X.m,{tooltipContent:r.formatMessage({defaultMessage:"Learn more about styles ↗",id:"nuhnis5YtY"}),children:(0,n.jsx)("div",{className:"mr-1",children:(0,n.jsx)(q.$,{href:"https://support.anthropic.com/en/articles/10181068-configuring-and-using-styles",variant:"ghost",className:"text-text-300",size:"icon",target:"_blank",children:(0,n.jsx)(tA.v,{size:18})})})})}),hasCloseButton:!0,children:(0,n.jsxs)(c.N,{mode:"popLayout",children:[u===tk.I.CREATE&&(0,n.jsx)(tP,{onStyleChange:M,setScreen:x,animateBoolRef:j},"CreateStyleScreen"),u===tk.I.CREATE_MANUALLY&&(0,n.jsx)(tK,{onStyleChange:M,setScreen:x},"CreateStyleManuallyScreen"),u===tk.I.LIST&&(0,n.jsx)(ap,{setScreen:x,styles:s,onStyleChange:M},"ListStylesScreen"),u===tk.I.EDIT&&h&&(0,n.jsx)(at,{animateBoolRef:j,style:h,returnToListScreen:w,setIsEditingName:b,setCurrentStyle:f,setIsEditing:v,setChatStyle:e=>{l(e),k()}},"EditStyleScreen")]})})},af=e=>{let{style:t,onClose:a}=e,s=(0,t5.X)(t),l="default"===t.type,r=(0,p.A)(),[o,d]=(0,m.useState)("default"===t.type&&t.nameKey?(0,i.fl)({id:t.nameKey,intl:r}):t.name),{isPending:c,mutateAsync:u}=(0,tC.lo)(s,l),x=async()=>{a(await u({name:o}))};return(0,n.jsx)("form",{className:"w-full",onSubmit:async e=>{e.preventDefault(),await x()},children:(0,n.jsx)(tr.ks,{autoFocus:!0,className:"w-full",value:o,maxLength:64,onChange:e=>d(e.target.value),error:0===o.length,append:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.$,{variant:"ghost",type:"button",size:"unset",className:"w-7 h-7 rounded-md mr-1",onClick:()=>a(),disabled:c,children:(0,n.jsx)(tx.X,{})}),(0,n.jsx)(q.$,{variant:"flat",size:"unset",className:"w-7 h-7 rounded-md",type:"submit",loading:c,children:(0,n.jsx)(Z.J,{weight:"bold"})})]})})})};var ag=a(56566),av=a(96533);let ay=()=>{let{projectUuid:e,setProjectUuid:t,setSyncSourceUuids:a,setIsUploadingGithubSync:s,syncSourceUuids:l,attachments:i,setAttachments:r}=(0,j.o)(),{styleModalOpenWithScreen:o,setStyleModalOpenWithScreen:d,createProjectModalIsOpen:c,setCreateProjectModalIsOpen:u,githubModalIsOpen:p,setGithubModalIsOpen:h,gmailAuthModalIsOpen:f,setGmailAuthModalIsOpen:g,createPromptArgumentModalIsOpen:v,setCreatePromptArgumentModalIsOpen:y}=(0,eA.CH)(),{mcpDirectoryModalIsOpen:b,setMcpDirectoryModalIsOpen:w}=(0,eA.tl)(),{personalizedStyleOptions:k}=(0,ti.p)(),M=(0,eL.sb)(),A=(0,eC.pi)(),C=(0,m.useCallback)(e=>{a(t=>[...t,e.uuid]),s(!1)},[a,s]),N=(0,x.NY)(l),_=(0,D.B7)(N);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ah,{openWithScreen:o,onClose:()=>d(null),styles:k,setChatStyle:e=>A(e.key)}),(0,n.jsx)(av.r,{isOpen:!!f,onClose:()=>g(!1),callerIdentifier:"inputMenu"}),(0,n.jsx)(tb,{moveAttachments:!!(null==c?void 0:c.moveAttachments),isOpen:!!(null==c?void 0:c.isOpen),handleClose:()=>u(null),handleProjectCreated:e=>{t(e.uuid),u(null)},syncSources:_,attachments:i,setSyncSourceUuids:a,setAttachments:r}),(0,n.jsx)(ag.s,{location:"chat",projectUuid:e,isOpen:p,onClose:()=>h(!1),onCreated:C,setIsUploadingGithubSync:s}),v&&(0,n.jsx)(tp,{isOpen:v.isOpen,onClose:()=>y(null),client:v.client,prompt:v.prompt}),M&&(0,n.jsx)(eK.TY,{isOpen:b,setIsOpen:w,showManageButton:!0})]})};function ab(){let e=(0,s._)(["\n  flex\n  flex-col\n  bg-bg-000\n  border-0.5\n  border-border-300\n  mx-2\n  md:mx-0\n  items-stretch\n  transition-all\n  duration-200\n  relative\n  shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/3.5%)]\n  focus-within:shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/7.5%)]\n  hover:border-border-200\n  focus-within:border-border-200\n  cursor-text\n  z-10\n  rounded-2xl\n"]);return ab=function(){return e},e}function aj(){let e=(0,s._)(["\n  bg-bg-100 \n  w-full \n  h-2\n"]);return aj=function(){return e},e}function aw(){let e=(0,s._)(["\n  flex \n  w-full \n  min-w-0 \n  flex-col\n"]);return aw=function(){return e},e}let ak=(0,m.forwardRef)((e,t)=>{var a,s,l,g;let{disabled:v,placement:y,placeholder:C,onSubmit:_}=e,I=(0,p.A)(),{prompt:z,tipTapEditorState:U,projectUuid:F,setPrompt:G,setTipTapEditorState:H,setAttachments:Y,setFiles:B,attachments:V,files:K,syncSourceUuids:q,isUploadingDriveSync:W,isUploadingGithubSync:X,sendMessage:J,conversation:$,isChatSyncing:Z,isProjectSyncing:Q,setSyncSourceUuids:ee,isSending:et,focusInput:ea,isFocused:es,setIsFocused:en,promptInputRef:el,willRedirectOnSubmit:ei,hasBlockingWarning:er,isUploadingFile:eo,setIsUploadingFile:ed,validateMaxUploadLimit:ec,onPasteFiles:eu,uploadInputProps:em,hasAttachments:ep,isNewConversation:ex,isImprovingPrompt:eh}=(0,j.o)();(0,m.useImperativeHandle)(t,()=>({setContent:(e,t,a)=>{G(e,{forceUpdateTiptap:!0}),Y("function"==typeof t?t(V):t),B("function"==typeof a?a(K):a)},sendMessage:J,setAttachments:e=>{Y("function"==typeof e?e(V):e)},getAttachments:()=>V})),L();let{fetchInputAutocompletion:ef}=(0,h.$z)(null==$?void 0:$.id),eg=function(e,t,a,s,l,i){let o=function(e,t,a,s){let{addError:l}=(0,A.Y)(),i=(0,m.useCallback)(e=>{a(!1),e&&l(e)},[l,a]),{activeOrganization:o}=(0,O.YL)(),d=null==o?void 0:o.uuid,c=(0,D.mn)(),u=(0,m.useCallback)(async e=>{let t;if(!d)return i((0,n.jsx)(N.A,{defaultMessage:"Invalid login",id:"m0+xd2UWTk"}));new URL("/api/organizations/".concat(d,"/fetch_url"),window.location.origin).searchParams.set("url",e);try{t=await c("/api/organizations/".concat(d,"/fetch_url?url=").concat(encodeURIComponent(e)))}catch(e){return(0,R.Cp)(e),i((0,n.jsx)(N.A,{defaultMessage:"One or more fetches have failed. Try again.",id:"anYsv8zeLR"}))}if(429===t.status)return i("Too many fetch attempts. Please wait and try again later.");if(!t.ok)return"fetch_unsupported_filetype"===(await t.json()).error.code?i():i((0,n.jsx)(N.A,{defaultMessage:"Fetching failed for one of the URLs. Please try again.",id:"Evnb9+Woth"}));let a=await t.json();return a&&0!==Object.keys(a).length&&a.extracted_content?a:i((0,n.jsx)(N.A,{defaultMessage:"Text extraction failed for one of the URLs.",id:"Pl7Qm8W+aN"}))},[c,d,i]),{value:p}=(0,r.fS)("hatch_use_web_fetcher");return(0,m.useCallback)(async n=>{if(!p)return;let l=[],i=(0,T.q6)(n);if(0!==i.length&&s({numNewPotentialAttachments:i.length})){for(let t=0;t<i.length;t++){let s=i[t];if(e.some(e=>s.endsWith(e.file_name)))continue;a(!0);let n=await u(s);if(!n)return;l.push(n)}l.forEach(e=>(0,M.pD)(e)),l.length>0&&t(e=>[...e,...l]),a(!1)}},[p,s,u,a,t,e])}(e,t,a,s),[d,c]=(0,m.useState)(!1);return(0,m.useEffect)(()=>{let e=e=>{"Shift"===e.key&&c(!0)},t=e=>{"Shift"===e.key&&c(!1)};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]),(0,m.useCallback)(e=>{var a,n,r;let c=null==(n=e.clipboardData)||null==(a=n.files)?void 0:a.length,u=null==(r=e.clipboardData)?void 0:r.getData("text/plain"),m=null==u?void 0:u.length;if(m&&!c){let e=(0,S.$)(u);e&&i(e)}if(c&&!m){s({newUploads:Array.from(e.clipboardData.files)})&&l(e.clipboardData.files),e.preventDefault();return}s({numNewPotentialAttachments:1,showError:!1})&&(o(u).catch(console.error),!m||u.length<4e3||d||(e.preventDefault(),t(e=>{let t="paste.txt",a=1;for(;e.some(e=>e.file_name===t);)a+=1,t="paste-".concat(a,".txt");return[...e,{file_name:t,file_size:u.length,file_type:"txt",extracted_content:u}]})))},[s,t,o,l,i,d])}(V,Y,ed,ec,eu,E()),ev=null!=(a=null==$?void 0:$.projectKnowledgebaseTokens)?a:0,[ey]=(0,P.q)({projectUuid:F,conversationUUID:null!=(s=null==$?void 0:$.id)?s:null,conversationTokensSoFar:null!=(l=null==$?void 0:$.tokensSoFar)?l:0,conversationFiles:null!=(g=null==$?void 0:$.files)?g:[],projectKnowledgebaseTokens:ev,input:z,attachments:V,syncSourceUuids:q}),eb=(0,k.U)(F),{value:ej}=(0,r.fS)("test_gated_strings"),ew=(0,o.q)(),ek=v||0===z.length&&0===V.length&&0===K.length&&0===q.length||eo||W||X||Z||Q||er||"will-exceed"===ey||eb||(null==$?void 0:$.isSampling)===!0,eM=(0,m.useCallback)(async()=>{!ek&&(await J(),_&&_())},[ek,_,J]),eC=(0,m.useCallback)(()=>{en(!0)},[en]),eN=(0,m.useCallback)(()=>{en(!1)},[en]),e_=(0,m.useCallback)(e=>{let t=e.target;"BUTTON"===t.tagName||t.closest("button")||t.closest("[role]")||t.closest("a")||t.closest("input")||t.closest("select")||t.closest("textarea")||ea()},[ea]),eS=(0,m.useRef)(null),eI=(0,x.NY)(q).map((e,t)=>{let{data:a}=e;return{syncSource:a,uuid:q[t]}}),eE=(0,n.jsx)(c.N,{initial:!1,children:ep&&(0,n.jsx)(u.P.div,{className:"overflow-hidden rounded-b-2xl",initial:{height:0},animate:{height:"auto"},exit:{height:0},children:(0,n.jsx)(b,{isUploadingFile:eo,isUploadingSync:W||X,attachments:V,files:K,syncSourceResults:eI,onRemoveAttachment:e=>{Y(t=>t.filter((t,a)=>a!==e))},onRemoveFile:e=>{B(t=>t.filter((t,a)=>a!==e))},onRemoveSyncSource:e=>{ee(t=>t.filter(t=>t!==e))}})},"attachments")});return ew?(0,n.jsxs)(eA.Xx,{placement:y,children:[(0,n.jsxs)(aC,{onPasteCapture:e=>{es&&eg(e)},children:[(0,n.jsx)("input",{ref:eS,id:"chat-input-file-upload-".concat(y),"data-testid":"file-upload","aria-hidden":"true",tabIndex:-1,className:"absolute -z-10 h-0 w-0 overflow-hidden opacity-0 select-none",...em}),"bottom"===y&&(0,n.jsx)("div",{className:"px-3 md:px-2",children:(0,n.jsx)(f.Q,{placement:y})}),(0,n.jsxs)(aM,{onClick:e_,className:(0,d.A)(ei&&et&&"animated-loading-background",eh?"transition-all duration-500 ring-1 ring-border-300/50 dark:ring-border-300/50":""),children:[(0,n.jsxs)("div",{className:"flex flex-col gap-3.5 m-3.5",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(w.P,{ref:el,prompt:z,setPrompt:G,tipTapEditorState:U,setTipTapEditorState:H,onSubmit:eM,onFocus:eC,onBlur:eN,placement:y,placeholder:null!=C?C:ex?ej?(0,i.O)({id:"spread_attempt_mind",intl:I}):I.formatMessage({defaultMessage:"How can I help you today?",id:"XLcM6WHfQR"}):ej?(0,i.O)({id:"window_edge_kiwi",intl:I}):I.formatMessage({defaultMessage:"Reply to Claude...",id:"kSt28+RchS"}),fetchInputAutocompletion:ef}),eh&&z&&(0,n.jsx)(c.N,{children:(0,n.jsx)(u.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 pointer-events-none overflow-hidden rounded",children:(0,n.jsx)(u.P.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-always-white/20 dark:via-always-white/10 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:1.5,ease:"easeInOut",repeat:1/0}})})})]}),(0,n.jsx)(tt,{placement:y,isDisabled:ek})]}),(0,n.jsx)(tn,{}),eE]}),"bottom"!==y&&(0,n.jsx)("div",{className:"px-3 md:px-2",children:(0,n.jsx)(f.Q,{placement:y})}),"bottom"===y&&(0,n.jsx)(aA,{})]}),(0,n.jsx)(ay,{})]}):(0,n.jsxs)(aC,{children:[(0,n.jsx)(aM,{className:"bottom"===y?"h-[99px]":"h-[123px]"}),"bottom"===y&&(0,n.jsx)(aA,{})]})});ak.displayName="ChatInput";let aM=l.J.div(ab()),aA=l.J.div(aj()),aC=l.J.fieldset(aw())},1524:(e,t,a)=>{a.d(t,{f:()=>l,u:()=>n});var s=a(27062);function n(){let{value:e}=(0,s.fS)("trials_and_tribulations_of_high_school_football");return!1}function l(){let{value:e}=(0,s.fS)("trials_and_tribulations_of_high_school_football");return e}},4708:(e,t,a)=>{a.d(t,{q:()=>d});var s=a(23661),n=a(21036),l=a(67455),i=a(56147),r=a(53573),o=a(6568);let d=e=>{let{projectUuid:t,conversationUUID:a,conversationTokensSoFar:d,conversationFiles:c,projectKnowledgebaseTokens:u,input:m,attachments:p,syncSourceUuids:x,chatInputModel:h}=e,f=(0,n.useStatsigClient)(),g=(0,i.Pb)(t);u=u&&!g?u:0;let v=c.filter(e=>e.file_kind===s.M.Image),y=d+(0,o.ED)(v)+c.filter(e=>e.file_kind===s.M.SanitizedDocument).reduce((e,t)=>e+(0,o.n2)(t),0)+u,b=(0,o.fO)(m,v,p),j=y+b+(0,l.YO)(x),w=(0,r.D)(a,h),k=null;y>w?k="exceeded":j>w&&(k="will-exceed");let M=f.getExperiment("conversation_truncation_max");return void 0===t&&M.get("truncate",!1)&&null!==k&&b<w?[null,{conversationTokens:y,msgTokens:b,totalTokens:j,maxConversationTokens:w}]:[k,{conversationTokens:y,msgTokens:b,totalTokens:j,maxConversationTokens:w}]}},7409:(e,t,a)=>{a.d(t,{Dk:()=>r,NM:()=>i,lD:()=>d,sv:()=>o});var s=a(54568),n=a(61125),l=a(7386);let i=e=>{let{file:t,size:a,showWarnings:n,onRemoveFile:i,onClick:r,isEditable:o}=e;return"xxs"===a?(0,s.jsx)(l.M1,{file:t}):(0,s.jsx)(l.NM,{file:t,showWarnings:n,handleRemove:i,handleClick:r,isEditable:o})};function r(e){let t=e.match(/\.[^/.]+$/);return t&&(0,n.cm)({imagesEnabled:!0}).includes(t[0].toLowerCase())?e.replace(/\.[^/.]+$/,""):e}let o=()=>(0,s.jsx)(l.Iq,{title:"Images hidden in shared chats",isError:!0}),d=()=>(0,s.jsx)(l.Iq,{title:"Files hidden in shared chats",isError:!0})},11091:(e,t,a)=>{a.d(t,{Xx:()=>J,_9:()=>X,CH:()=>$,tl:()=>Z});var s=a(54568),n=a(89256),l=a.n(n),i=a(7620),r=a(36769),o=a(8027),d=a(11515),c=a(34059),u=a(98715),m=a(91961),p=a(77101),x=a(85544),h=a(90119),f=a(46760),g=a(81527),v=a(85717),y=a(71436),b=a(92947),j=a(80731),w=a(57383),k=a(59448),M=a(85201),A=a(33562);let C=e=>{let{placement:t,actions:a,inputMenuIsOpen:n}=e,l=(0,f.A)(),i=N({actions:a}),r=I({actions:a}),o=S({actions:a,inputMenuIsOpen:n}),d=_({actions:a,inputMenuIsOpen:n}),c=E({actions:a});return[{key:x.xd.UPLOAD,type:"button",icon:(0,s.jsx)(u.o3O,{size:16}),label:l.formatMessage({defaultMessage:"Upload a file",id:"Zc9xq9TzDD"}),onClick:()=>(0,A.U_)(t)},...i?[i]:[],...r?[r]:[],...o?[o]:[],...c,...d?[{key:"divider1",type:"divider",label:""},d]:[]]},N=e=>{let{actions:t}=e,a=(0,f.A)();return(0,h.V)()||(0,m.fJ)()?null:{key:x.xd.ADD_SCREENSHOT,type:"button",icon:(0,s.jsx)(u.i7d,{size:16}),label:a.formatMessage({defaultMessage:"Take a screenshot",id:"aTaOpCB71M"}),onClick:t.onAddScreenshot}},_=e=>{let{inputMenuIsOpen:t,actions:a}=e,n=(0,f.A)(),l=(0,M.Hd)(),{projectUuid:i,isProjectLocked:r}=(0,w.o)(),o=(0,j.K)(),{data:d}=(0,g.CB)({enabled:t&&o,limit:8}),{data:c}=(0,g.fo)(i),m=(null==d?void 0:d.slice(0,8).map(e=>({key:e.uuid,type:"option",label:e.name,onClick:()=>a.onSelectProject(e.uuid),icon:(0,s.jsx)(u.JtL,{size:16}),isChecked:e.uuid===i})))||[];if(r||!o)return null;let p=n.formatMessage({defaultMessage:"Use a project",id:"H/dsl+Px2v"});return{key:x.xd.PROJECTS,type:"optionGroup",icon:(0,s.jsx)(u.JtL,{size:16}),label:p,secondaryText:null==c?void 0:c.name,children:[...l?[]:[{type:"back",key:"projects-back",label:p}],...m,{key:"divider1",type:"divider",label:""},{key:"add",type:"button",variant:"primary",icon:(0,s.jsx)(u.OMN,{size:16}),label:n.formatMessage({defaultMessage:"Start a new project",id:"0y7bg6nA29"}),onClick:()=>a.onCreateProject(!1),nonSearchable:!0}],indicatorActive:!!c}},S=e=>{let{actions:t,inputMenuIsOpen:a}=e,n=(0,f.A)(),l=(0,M.Hd)(),i=(0,v.LP)(),{isDriveAuthenticated:r,initDriveAuth:o}=(0,v.cI)(),{recentDriveDocs:d,isLoading:u}=(0,v.zH)(a);if(!i)return null;let m=n.formatMessage({defaultMessage:"Add from {drive}",id:"hwJ50OkM/9"},{drive:"Google Drive"}),h={key:x.xd.DRIVE,icon:(0,s.jsx)(c.A9,{type:p.v8.GDRIVE,size:16}),label:m};if(!r)return{...h,type:"button",isExternal:!0,secondaryText:n.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:o};let g=u?[{key:"drive-loading",type:"button",label:n.formatMessage({defaultMessage:"{drive} documents loading...",id:"PjuSZ/7RIb"},{drive:"Drive"}),isDisabled:!0}]:d.length?d.slice(0,8).map(e=>{var a;return{key:e.uri,type:"button",label:null!=(a=e.title)?a:"Untitled",icon:(0,s.jsx)(c.A9,{type:p.v8.GDRIVE,variant:c.UF.DOCS,size:16}),onClick:()=>{t.createDriveSyncSource(e.uri)}}}):[{key:"empty",type:"button",label:n.formatMessage({defaultMessage:"No recent {drive} documents",id:"XepM9W1Mo/"},{drive:"Drive"}),isDisabled:!0}];return{...h,type:"buttonGroup",children:[...l?[]:[{type:"back",key:"drive-back",label:m}],...g]}},I=e=>{let{actions:t}=e,a=(0,f.A)();return(0,y.Cq)()?{key:x.xd.GITHUB,type:"button",icon:(0,s.jsx)(c.A9,{type:p.v8.GITHUB,size:16}),label:a.formatMessage({defaultMessage:"Add from {github}",id:"h3J3E4bRfj"},{github:"GitHub"}),onClick:t.openGithubModal}:null},E=e=>{let{actions:t}=e,a=(0,f.A)(),{servers:n}=(0,b.gt)(),l=(0,k.Bz)(),i=(0,k.f$)();return n.filter(e=>e.client&&(e.prompts.length>0||e.resources.length>0)).map(e=>{let n=e.prompts.map(a=>({key:"prompt-".concat(e.name,"-").concat(a.name),type:"button",icon:(0,s.jsx)(u.ryu,{size:16}),label:a.name,onClick:()=>{var s;return(null==(s=a.arguments)?void 0:s.length)?t.onEnterPromptArguments(e.client,a):void i(e.client,a,{})}})),r=e.resources.map(t=>({key:"resource-".concat(e.name,"-").concat(t.uri),type:"button",icon:(0,s.jsx)(u.ZHH,{size:16}),label:t.name,onClick:()=>void l(e.client,t)}));return{key:"mcp-server-".concat(e.name),type:"buttonGroup",label:a.formatMessage({defaultMessage:"Add from {server}",id:"qEj6u51OfR"},{server:e.name}),icon:(0,s.jsx)(d.d,{url:e.url,fallbackSvg:(0,s.jsx)(o.B,{letter:e.name,size:16}),size:16}),children:[...n,...r]}})};var T=a(62942),D=a(73212);let O=e=>{let{currentItems:t,inputMenuIsOpen:a,setInputMenuIsOpen:s,inputMenuSearchQuery:n,setInputMenuSearchQuery:l,path:r,handleUpdatePath:o,highlightedItemKey:d,setHighlightedItemKey:c}=e,u=(0,T.useRouter)(),m=(0,i.useCallback)(e=>{if("toggleGroup"===e.type||"optionGroup"===e.type||"buttonGroup"===e.type)s(!0),o(e.key,!0);else if("button"===e.type||"switch"===e.type||"toggle"===e.type||"option"===e.type){var t;null==(t=e.onClick)||t.call(e)}},[s,o]),p=(0,i.useCallback)(e=>{r&&(null==e||e.preventDefault(),o(null),c(r),(0,D.l)())},[r,c,o]),x=(0,i.useCallback)(e=>{let a,s=t.filter(e=>!["subheader","divider"].includes(e.type)&&!e.isDisabled&&!e.menuItemHidden),n=s.findIndex(e=>{let{key:t}=e;return t===d});a="ArrowUp"===e?n>0?n-1:s.length-1:n<s.length-1?n+1:0,c(s[a].key)},[t,d,c]),h=(0,i.useCallback)(e=>{var t,n,i;if(!a)return void m(e);if(!e.isDisabled){if("pro"===e.tag)return void u.push("/upgrade/pro");if(l(""),"back"===e.type)return void p();if("button"===e.type){null==(t=e.onClick)||t.call(e),e.skipCloseOnClick||s(!1);return}if("toggleGroup"===e.type||"optionGroup"===e.type||"buttonGroup"===e.type){o(e.key),c(null),(0,D.l)();return}"option"===e.type&&(null==(n=e.onClick)||n.call(e),e.skipCloseOnClick||s(!1,{withDelay:!0})),("toggleAll"===e.type||"toggle"===e.type||"switch"===e.type)&&(null==(i=e.onClick)||i.call(e),(0,D.l)())}},[p,m,o,a,l,u,s,c]),f=(0,i.useCallback)((e,a)=>{if(!d)return;let s=t.find(e=>{let{key:t}=e;return t===d});s&&("Enter"===e||["optionGroup","toggleGroup","buttonGroup"].includes(s.type))&&(a.preventDefault(),h(s))},[d,t,h]);return(0,i.useEffect)(()=>{if(!a)return;let e=e=>{"Tab"===e.key?e.preventDefault():"Escape"===e.key?(e.preventDefault(),s(!1)):"ArrowUp"===e.key||"ArrowDown"===e.key?(e.preventDefault(),x(e.key)):"ArrowRight"===e.key||"Enter"===e.key?f(e.key,e):"ArrowLeft"!==e.key||n||p(e)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a,s,n,x,f,p]),{handleClickItem:h,handleBack:p}};var R=a(65400),z=a(16430),L=a(20591),P=a.n(L);let U={includeScore:!0,isCaseSensitive:!1,ignoreLocation:!0,threshold:.4},F=e=>{let{actions:t,inputMenuSearchQuery:a,inputMenuIsOpen:n,pathItems:l,path:r,menuType:o}=e,d=(0,f.A)(),c=(0,i.useRef)(a),{handleSearchDrive:u,searchedDriveItems:m}=Y({path:r,actions:t,inputMenuSearchQuery:a,inputMenuIsOpen:n,menuType:o}),{handleSearchProjects:p,searchedProjectItems:x}=H({path:r,actions:t,inputMenuSearchQuery:a,inputMenuIsOpen:n,menuType:o,pathItems:l}),{handleFilterMenuItems:h,filteredMenuItems:g}=G({path:r,inputMenuSearchQuery:a,pathItems:l}),v=(0,i.useCallback)(()=>{h(),p(),u()},[h,p,u]),y=(0,i.useMemo)(()=>P()(()=>{v()},100),[v]);return((0,i.useEffect)(()=>{if(a&&n&&a!==c.current)return c.current=a,y(),()=>{y.cancel()}},[n,a,y]),g.length||x.length||m.length)?[g,x,m].reduce((e,t,a)=>[...e,...e.length&&t.length?[{key:"divider".concat(a+1),type:"divider",label:""}]:[],...t],[]):[{key:"loading",type:"button",label:d.formatMessage({defaultMessage:"No results found",id:"hX5PAbCTOR"}),icon:(0,s.jsx)(R.e,{size:16}),onClick:()=>void 0,isDisabled:!0}]},G=e=>{let{path:t,inputMenuSearchQuery:a,pathItems:s}=e,n=s.filter(e=>{let{menuItemHidden:t}=e;return!t}),[l,r]=(0,i.useState)([]);return"projects"===t||"drive"===t?{handleFilterMenuItems:()=>[],filteredMenuItems:[]}:{handleFilterMenuItems:()=>{let e=a.toLowerCase();if(!e)return n;let t=[];for(let e of n)t.push(e),!e.isDisabled&&"projects"!==e.key&&"drive"!==e.key&&"children"in e&&e.children&&t.push(...e.children);r(t.filter(t=>!t.nonSearchable&&"toggleAll"!==t.type&&"back"!==t.type&&"divider"!==t.type&&"string"==typeof t.label&&t.label.toLowerCase().includes(e)).slice(0,7))},filteredMenuItems:l}},H=e=>{let{path:t,actions:a,inputMenuSearchQuery:n,inputMenuIsOpen:l,menuType:r,pathItems:o}=e,d="projects",c=(0,j.K)(),m=o.map(e=>{let{key:t}=e;return t}).indexOf("projects")>-1||"projects"===t,p=!!(n&&m&&(t===d||!t)&&l&&c&&"plus"===r),[x,h]=(0,i.useState)([]),{data:f}=(0,g.CB)({enabled:p,limit:g.dx}),v=(0,i.useMemo)(()=>new z.A(f||[],{...U,keys:["name","description"]}),[f]);return p?{handleSearchProjects:()=>{let e=n.toLowerCase();if(!e||!f)return[];h(v.search(e,{limit:t===d?10:5}).map(e=>({type:"button",key:e.item.uuid,label:e.item.name,icon:(0,s.jsx)(u.JtL,{size:16}),onClick:()=>a.onSelectProject(e.item.uuid)})))},searchedProjectItems:x}:{handleSearchProjects:()=>[],searchedProjectItems:[]}},Y=e=>{let{path:t,actions:a,inputMenuSearchQuery:n,inputMenuIsOpen:l,menuType:r}=e,o="drive",d=(t===o||!t)&&l&&"plus"===r,u=(0,v.LP)(),[m,x]=(0,i.useState)([]),{recentDriveDocs:h}=(0,v.zH)(d),f=(0,i.useMemo)(()=>new z.A(h,{...U,keys:["title"]}),[h]);return u&&d?{handleSearchDrive:()=>{let e=n.toLowerCase();if(!e||!h)return[];x(f.search(e,{limit:t===o?10:5}).map(e=>({key:e.item.uri,type:"button",label:e.item.title||"",icon:(0,s.jsx)(c.A9,{type:p.v8.GDRIVE,variant:c.UF.DOCS,size:16}),onClick:()=>{a.createDriveSyncSource(e.item.uri)}})))},searchedDriveItems:m}:{handleSearchDrive:()=>[],searchedDriveItems:[]}},B={path:null,inputMenuSearchQuery:"",setInputMenuSearchQuery:l(),inputMenuIsOpen:!1,setInputMenuIsOpen:l(),menuView:{rootItems:[],currentItems:[]},handleClickItem:l(),handleBack:l(),highlightedItemKey:null,setHighlightedItemKey:l(),animationDirection:"none"},V={...B,styleModalOpenWithScreen:null,setStyleModalOpenWithScreen:l(),createProjectModalIsOpen:null,setCreateProjectModalIsOpen:l(),githubModalIsOpen:!1,setGithubModalIsOpen:l(),gmailAuthModalIsOpen:!1,setGmailAuthModalIsOpen:l(),createPromptArgumentModalIsOpen:null,setCreatePromptArgumentModalIsOpen:l()},K={...B,mcpDirectoryModalIsOpen:!1,setMcpDirectoryModalIsOpen:l()},q=(0,i.createContext)(V),W=(0,i.createContext)(K),X=e=>{let{actions:t,rootItems:a,menuType:s,inputMenuIsOpen:n,setInputMenuIsOpen:l}=e,r=(0,i.useRef)(null),[o,d]=(0,i.useState)(null),[c,u]=(0,i.useState)(null),[m,p]=(0,i.useState)(""),x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!n&&e)return void l(!0);if(n&&!e){p("");let e=()=>{var e;h(null,!0),u(null),l(!1),null==(e=document.getElementById("input-".concat(s,"-menu-trigger")))||e.focus()};t.withDelay?setTimeout(e,200):e()}},h=(e,t)=>{t?r.current=e:r.current=o,d(e)},f=(()=>{if(o){let e=a.find(e=>e.key===o);if(e&&"children"in e)return e.children}return a})(),g=F({actions:t,inputMenuSearchQuery:m,inputMenuIsOpen:n,pathItems:f,path:o,menuType:s}),v=m.trim().length?g:f,{handleClickItem:y,handleBack:b}=O({currentItems:v,inputMenuIsOpen:n,setInputMenuIsOpen:x,inputMenuSearchQuery:m,setInputMenuSearchQuery:p,path:o,handleUpdatePath:h,highlightedItemKey:c,setHighlightedItemKey:u}),j=r.current&&!o?"back":!r.current&&o?"forward":"none";return{path:o,inputMenuSearchQuery:m,setInputMenuSearchQuery:p,inputMenuIsOpen:n,setInputMenuIsOpen:x,menuView:{rootItems:a,currentItems:v},handleClickItem:y,handleBack:b,highlightedItemKey:c,setHighlightedItemKey:u,animationDirection:j}};function J(e){let{placement:t,children:a}=e,[n,l]=(0,i.useState)(!1),[o,d]=(0,i.useState)(!1),[c,u]=(0,i.useState)(null),[m,p]=(0,i.useState)(!1),[x,h]=(0,i.useState)(!1),[f,g]=(0,i.useState)(!1),[v,y]=(0,i.useState)(null),[b,j]=(0,i.useState)(null),w=(0,A.Cn)({setMcpDirectoryModalIsOpen:g,setStyleModalOpenWithScreen:y,setCreateProjectModalIsOpen:u,setGithubModalIsOpen:p,setGmailAuthModalIsOpen:h,setCreatePromptArgumentModalIsOpen:j}),k=C({placement:t,actions:w,inputMenuIsOpen:n}),M=X({actions:w,rootItems:k,menuType:"plus",inputMenuIsOpen:n,setInputMenuIsOpen:l}),N=(0,r.ey)({actions:w}),_=X({actions:w,rootItems:N,menuType:"tools",inputMenuIsOpen:o,setInputMenuIsOpen:d});return(0,s.jsx)(q.Provider,{value:{...M,styleModalOpenWithScreen:v,setStyleModalOpenWithScreen:y,createProjectModalIsOpen:c,setCreateProjectModalIsOpen:u,githubModalIsOpen:m,setGithubModalIsOpen:p,gmailAuthModalIsOpen:x,setGmailAuthModalIsOpen:h,createPromptArgumentModalIsOpen:b,setCreatePromptArgumentModalIsOpen:j},children:(0,s.jsx)(W.Provider,{value:{..._,mcpDirectoryModalIsOpen:f,setMcpDirectoryModalIsOpen:g},children:a})})}function $(){return(0,i.useContext)(q)}function Z(){return(0,i.useContext)(W)}},14786:(e,t,a)=>{a.d(t,{q:()=>o});var s=a(54568),n=a(4705),l=a(32987),i=a(7620),r=a(57383);let o=e=>{let{children:t,actionButton:a,title:o,minimalUi:d}=e,{hasBlockingWarning:c,setHasBlockingWarning:u}=(0,r.o)();return(0,i.useEffect)(()=>(u(!0),()=>{u(!1)}),[c,u]),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsxs)("div",{className:"flex w-full flex-col items-center md:flex-row gap-2",children:[(0,s.jsxs)("div",{className:(0,l.A)("flex flex-row items-center gap-2 md:w-full",d?null:"text-danger-000"),children:[d?null:(0,s.jsx)(n.N,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,s.jsxs)("div",{children:[o&&(0,s.jsx)("div",{className:"text-sm font-medium",children:o}),(0,s.jsx)("div",{className:"text-sm",children:t})]})]}),!!a&&(0,s.jsx)("div",{className:"-mt-px w-full whitespace-nowrap md:w-fit",children:a})]})})}},22529:(e,t,a)=>{a.d(t,{ClientIntlProvider:()=>p,O:()=>g,X5:()=>h,YX:()=>x,fl:()=>f});var s=a(54568),n=a(55428),l=a(68864),i=a(7620),r=a(88982),o=a(62971),d=a(18483);let c=new Set,u=e=>{if(e.message.includes("MISSING_TRANSLATION")){if(c.has(e.message))return;c.add(e.message)}console.error(e)},m=()=>void 0;function p(e){let{locale:t,messages:a,children:o,hideErrors:d}=e;return(0,i.useEffect)(()=>{l.wB.defaultLocale=t},[t]),(0,s.jsx)(r.A,{locale:t,messages:a,onError:d?m:(0,n.O0)()?u:void 0,fallbackOnEmptyString:!1,children:(0,s.jsx)(s.Fragment,{children:o})})}function x(e){let{id:t}=e;return(0,s.jsx)(o.A,{id:(0,d.ey)(t),defaultMessage:" "})}function h(e){let{id:t}=e;return(0,s.jsx)(o.A,{id:(0,d.lK)(t),defaultMessage:" "})}function f(e){let{id:t,intl:a}=e;return a.formatMessage({id:(0,d.lK)(t),defaultMessage:" "})}function g(e){let{id:t,intl:a}=e;return a.formatMessage({id:(0,d.ey)(t),defaultMessage:" "})}},33562:(e,t,a)=>{async function s(e){let t,a="CaptureController"in window?new CaptureController:null;null==a||a.setFocusBehavior("no-focus-change");try{t=await navigator.mediaDevices.getDisplayMedia({video:!0,controller:a})}catch(e){if(e instanceof DOMException&&"NotAllowedError"===e.name)return null;throw e}let s=document.createElement("video");s.srcObject=t,await new Promise((e,t)=>{s.onloadedmetadata=()=>{s.play().then(e,t)}});let n=document.createElement("canvas");if(e){let t=Math.min(e.width/Math.min(s.videoWidth,e.width),e.height/Math.min(s.videoHeight,e.height));n.width=s.videoWidth*t,n.height=s.videoHeight*t}else n.width=s.videoWidth,n.height=s.videoHeight;let l=n.getContext("2d");if(!l)throw Error("Could not create 2D context");l.drawImage(s,0,0,n.width,n.height);let i=n.toDataURL("image/png");return t.getTracks().forEach(e=>e.stop()),{imageDataUrl:i}}a.d(t,{U_:()=>b,pi:()=>k,$V:()=>j,Cn:()=>v});var n=a(98518),l=a(51121),i=a(90517),r=a(77101),o=a(70825),d=a(46760),c=a(67455),u=a(85717),m=a(71436),p=a(57383),x=a(45727),h=a(80047),f=a(49194),g=a(31102);let v=e=>{let{setMcpDirectoryModalIsOpen:t,setStyleModalOpenWithScreen:a,setCreateProjectModalIsOpen:s,setGithubModalIsOpen:n,setGmailAuthModalIsOpen:l,setCreatePromptArgumentModalIsOpen:r}=e,o=w(),d=k(),c=j(),{openFeaturePreviewModal:p}=(0,h.go)(),{checkIsGithubAuthenticated:x,initGithubAuth:f}=(0,m.nB)(),{initDriveAuth:g}=(0,u.cI)();return{onAddScreenshot:()=>{o()},openGithubModal:()=>{x().then(e=>{if(!e)return void f();n(!0)})},openGmailAuthModal:()=>{l(!0)},openMcpDirectoryModal:()=>{t(!0)},initDriveAuth:g,createDriveSyncSource:y(),onStyleChange:e=>{d(e)},openStyleModal:()=>{a(i.I.LIST)},onSelectProject:c,onCreateProject:e=>{s({isOpen:!0,moveAttachments:e})},openFeaturePreviewModal:p,onEnterPromptArguments:(e,t)=>{r({isOpen:!0,client:e,prompt:t})}}},y=()=>{let{addError:e}=(0,l.Y)(),{setIsUploadingDriveSync:t,setSyncSourceUuids:a}=(0,p.o)(),{mutate:s}=(0,c.EF)({onMutate:()=>{t(!0)},onSuccess:e=>{t(!1),a(t=>[...t,e.uuid])},onError:a=>{t(!1),e((0,g.J)(a))},meta:{noToast:!0}});return e=>s({sync_source_type:r.v8.GDRIVE,sync_source_config:{uri:e}})},b=e=>{var t;null==(t=document.getElementById("chat-input-file-upload-".concat(e)))||t.click()},j=()=>{let{projectUuid:e,setProjectUuid:t}=(0,p.o)();return a=>{e===a?t(void 0):t(a)}},w=()=>{let{addError:e}=(0,l.Y)(),t=(0,d.A)(),{handleUpload:a}=(0,p.o)();return async()=>{let n=null;try{n=await s({width:1568,height:1568})}catch(a){(0,o.Cp)(a),e(t.formatMessage({defaultMessage:"Could not capture screen",id:"GT8HkzCHoM"}))}if(!n)return;let l=new File([await fetch(n.imageDataUrl).then(e=>e.blob())],"screenshot.png",{type:"image/png"});await a([l])}},k=()=>{let{setPersonalizedStyle:e}=(0,p.o)(),t=(0,n.st)(),{personalizedStyleOptions:a,setStoredStyle:s}=(0,x.p)();return n=>{let l=a.find(e=>e.key===n);if(!l)return;e(l);let i=(0,f.X)(l);s({styleKey:i,timestamp:new Date}),t.track({event_key:"styles.selected",style_key:i})}}},35368:(e,t,a)=>{a.d(t,{A6:()=>o,Wi:()=>d});var s=a(75006),n=a(27062),l=a(85544);let i=[],r=[];function o(){let e=d(),t=(0,n.T9)("frontend_fallback_paprika_config","modes",r,c);return e.length>0?e:t}function d(){return(0,n.T9)("paprika_config","modes",i,c)}let c=s.z.array(s.z.object({id:s.z.string(),title:s.z.string(),description:s.z.string(),description_key:s.z.string().optional(),paprika_mode_value:l.T4.optional()}))},35747:(e,t,a)=>{a.d(t,{J:()=>d,j:()=>o});var s=a(85644),n=a(55554),l=a(85544),i=a(35368),r=a(21036);let o=()=>{let{allModelOptions:e}=(0,s.A9)();return t=>{var a;let s=e.find(e=>e.model===t);return!!(null==s||null==(a=s.paprika_modes)?void 0:a.includes("extended"))}},d=()=>{let e=(0,i.A6)(),{selectedTier:t,isTierSelectorEnabled:a,shouldOverrideFeatureAccess:s}=(0,n.t)(),o=(0,r.useExperiment)("freemium");return a&&s&&t?t===l.d7.PRO||t===l.d7.MAX||t===l.d7.ENTERPRISE||t===l.d7.FREE&&o.get("free_thinking",!1):!!e.length}},36208:(e,t,a)=>{a.d(t,{So:()=>i,vv:()=>s,xs:()=>n});let s=function(e,t){let{preferWholeNumber:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=Math.round(e);let s={minimumFractionDigits:2,maximumFractionDigits:2};a&&e/100%1==0&&(s.minimumFractionDigits=0,s.maximumFractionDigits=0);let n=navigator.languages&&navigator.languages.length?navigator.languages:navigator.language?navigator.language:"en-US",l="string"==typeof n?n:n[0];return(["SGD","AUD","NZD"].includes(t)||"USD"===t&&"en-US"!==l)&&(s.currencyDisplay="code"),new Intl.NumberFormat(n||void 0,{style:"currency",currency:t,...s}).format(e/100)};function n(e){let{amount:t,currency:a,preferWholeNumber:n}=e;return s(t,a,{preferWholeNumber:n})}let l={aud:{showIncluded:!0,taxLabel:"GST"},brl:{showIncluded:!1,taxLabel:null},cad:{showIncluded:!1,taxLabel:null},eur:{showIncluded:!1,taxLabel:"VAT"},gbp:{showIncluded:!0,taxLabel:"VAT"},nzd:{showIncluded:!0,taxLabel:"VAT"},sgd:{showIncluded:!0,taxLabel:"GST"},usd:{showIncluded:!1,taxLabel:null}};function i(e){var t;return null!=(t=l[e.toLowerCase()])?t:l.usd}},36769:(e,t,a)=>{a.d(t,{ey:()=>L,$3:()=>W});var s=a(54568),n=a(8027),l=a(11515),i=a(70011),r=a(85644),o=a(1761),d=a(19125),c=a(22529),u=a(34059),m=a(98715),p=a(84403),x=a(27062),h=a(77101),f=a(85544),g=a(24871),v=a(21036),y=a(7620),b=a(46760),j=a(77186);let w=()=>{let{activeOrganization:e}=(0,o.YL)(),t=null==e?void 0:e.uuid,a=(0,o.h0)(),s=(0,v.useExperiment)("freemium"),n=!a&&s.get("free_thinking",!1)&&!!t;return(0,j.Sk)("/api/organizations/".concat(t,"/feature_limits"),{queryKey:["FEATURE_LIMITS",t],enabled:n,staleTime:3e5})},k=()=>{let{data:e,...t}=w(),a=null==e?void 0:e.limits.find(e=>"thinking"===e.feature);return{...t,data:a}};var M=a(99965),A=a(85717),C=a(35747),N=a(92947),_=a(45078),S=a(91768),I=a(43156),E=a(57383),T=a(45727),D=a(1524),O=a(85201);let R="inputMenu",z=()=>({isDisabled:!0,tooltip:(0,b.A)().formatMessage({defaultMessage:"Select a different model to use this feature",id:"/9vSDy2Wm0"}),isChecked:!1}),L=e=>{let{actions:t}=e,a=(0,b.A)(),n=(0,M.lu)(),l=(0,o.O9)(),r=(0,o.zc)(),d=(0,N.sb)(),{conversation:c,model:u}=(0,E.o)(),p=(0,i.Z3)((null==c?void 0:c.id)||null),x=null!=u?u:p,h=P({actions:t,currentModel:x}),f=q(),v=Y({actions:t}),y=B({actions:t}),j=V({currentModel:x}),w=J();if((0,O.gB)())return v;let k=[...y?[y]:[],...j?[j]:[],...w?[w]:[]];h.length&&(k=k.concat([...k.length?[{key:"divider1",type:"divider",label:""}]:[],...h]));let A=n&&(l||r);return(f.length||A||d)&&(k=k.concat([...f,...d?[{key:"divider2",type:"divider",label:""},{key:"addIntegrations",type:"button",icon:(0,s.jsx)(g.c,{size:16}),label:a.formatMessage({defaultMessage:"Add connectors",id:"2dXigF1Pil"}),onClick:t.openMcpDirectoryModal},{key:"manageIntegrations",type:"button",icon:(0,s.jsx)(m.wB_,{size:16}),label:a.formatMessage({defaultMessage:"Manage connectors",id:"cqx+RdJnHp"}),isExternal:!0,onClick:()=>{window.location.href="/settings/connectors"}}]:A?[{key:"divider2",type:"divider",label:""},{key:"addIntegrations",type:"button",icon:(0,s.jsx)(g.c,{size:16}),label:a.formatMessage({defaultMessage:"Add connectors",id:"2dXigF1Pil"}),isExternal:!0,onClick:()=>{window.location.href="/settings/connectors"}}]:[]])),k},P=e=>{let{actions:t,currentModel:a}=e,s=U({currentModel:a}),n=F({currentModel:a}),l=H({actions:t,currentModel:a}),i=G({currentModel:a});return[...s?[s]:[],...n?[n]:[],...l?[l]:[],...i?[i]:[]]},U=e=>{let{currentModel:t}=e,a=(0,b.A)(),{conversation:n}=(0,E.o)(),l=(0,o.h0)(),i=(0,O.Ob)(),r=(0,I.Eu)(t),d=(0,I.be)(),c=(0,I.WJ)(),u=(0,I.fy)(n),{toggleConversationSetting:p}=(0,_.rX)(),x=z(),h=X("web_search");if(!d&&!i)return null;let f=u&&r;return d||!i||l?{key:"webSearch",type:"switch",label:a.formatMessage({defaultMessage:"Web search",id:"x0W7xxxEcv"}),icon:(0,s.jsx)(m.qzq,{size:16}),isChecked:f,onClick:()=>p("enabled_web_search",!f),tag:h,...!c?{isDisabled:!0,tooltip:a.formatMessage({defaultMessage:"This feature has been disabled by your administrator.",id:"Jpvq2WYysx"})}:!r?x:null}:{key:"webSearch",type:"switch",label:a.formatMessage({defaultMessage:"Web search",id:"x0W7xxxEcv"}),icon:(0,s.jsx)(m.qzq,{size:16}),isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}}},F=e=>{let{currentModel:t}=e,a=(0,b.A)(),{conversation:n}=(0,E.o)(),l=(0,o.h0)(),i=(0,O.Ob)(),{toggleConversationSetting:d}=(0,_.rX)(),c=(0,A.K6)(),m=(0,r.Wq)()(t,"gsuite_tools"),p=(0,A.$f)(n),{isDriveAuthenticated:x,initDriveAuth:h}=(0,A.cI)({callerIdentifier:R,handleAuthSuccess:()=>{d("enabled_bananagrams",!0)}}),f=z(),g=X("drive_search");if(!c&&!i)return null;let v={key:"driveSearch",icon:(0,s.jsx)(u.ft,{size:16}),label:a.formatMessage({defaultMessage:"{drive} search",id:"nUykp097rV"},{drive:"Drive"})};if(!c&&i&&!l)return{...v,type:"switch",isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}};if(!x)return{...v,type:"button",isExternal:!0,secondaryText:a.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:h,...m?null:f};let y=x&&p;return{...v,type:"switch",isChecked:y,onClick:()=>{d("enabled_bananagrams",!y)},tag:g,...m?null:f}},G=e=>{let{currentModel:t}=e,a=(0,b.A)(),{conversation:n}=(0,E.o)(),l=(0,o.h0)(),i=(0,O.Ob)(),{toggleConversationSetting:d}=(0,_.rX)(),c=(0,S.Ys)(h.v8.GCAL),m=(0,r.Wq)()(t,"gsuite_tools"),p=(0,S.X0)(h.v8.GCAL,n),{isAuthenticated:x,startAuth:f}=(0,S.ob)(h.v8.GCAL,{callerIdentifier:R,handleAuthSuccess:()=>{d("enabled_foccacia",!0)}}),g=z(),v=X("calendar_search");if(!c&&!i)return null;let y={key:"gcal",label:a.formatMessage({defaultMessage:"Calendar search",id:"b7aUhdL5nd"}),icon:(0,s.jsx)(u.HI,{size:16})};if(!c&&i&&!l)return{...y,type:"switch",isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}};if(!x)return{...y,type:"button",isExternal:!0,secondaryText:a.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:f,...m?null:g};let j=x&&p;return{...y,type:"switch",isChecked:j,onClick:()=>{d("enabled_foccacia",!j)},tag:v,...m?null:g}},H=e=>{let{actions:t,currentModel:a}=e,n=(0,b.A)(),{conversation:l}=(0,E.o)(),i=(0,o.h0)(),d=(0,O.Ob)(),{toggleConversationSetting:c}=(0,_.rX)(),m=(0,S.Ys)(h.v8.GMAIL),p=(0,r.Wq)()(a,"gsuite_tools"),x=(0,S.X0)(h.v8.GMAIL,l),f=z(),g=X("gmail_search"),{isAuthenticated:v}=(0,S.ob)(h.v8.GMAIL,{callerIdentifier:R,handleAuthSuccess:()=>{c("enabled_sourdough",!0)}});if(!m&&!d)return null;let y={key:"gmail",label:n.formatMessage({defaultMessage:"Gmail search",id:"v0qteoUCm+"}),icon:(0,s.jsx)(u.kw,{size:16})};if(!m&&d&&!i)return{...y,type:"switch",isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}};if(!v)return{...y,type:"button",isExternal:!0,secondaryText:n.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:()=>{t.openGmailAuthModal()},...p?null:f};let j=v&&x;return{...y,type:"switch",isChecked:j,onClick:()=>{c("enabled_sourdough",!j)},tag:g,...p?null:f}},Y=e=>{let{actions:t}=e,a=(0,b.A)(),{personalizedStyle:n}=(0,E.o)(),{personalizedStyleOptions:l}=(0,T.p)();return[...l.map(e=>{let a=(null==n?void 0:n.key)===e.key;return{key:e.key,type:"option",label:"default"===e.type&&e.nameKey?(0,s.jsx)(c.X5,{id:e.nameKey}):e.name,icon:(0,s.jsx)(m.P_O,{size:16}),onClick:()=>{a?t.onStyleChange("Default"):t.onStyleChange(e.key)},isChecked:a}}),{key:"divider1",type:"divider",label:""},{key:"add",type:"button",variant:"primary",icon:(0,s.jsx)(m.OMN,{size:16}),label:a.formatMessage({defaultMessage:"Create & edit styles",id:"cY+Fgc8HvE"}),onClick:t.openStyleModal,nonSearchable:!0}]},B=e=>{let{actions:t}=e,a=(0,b.A)(),n=(0,O.Hd)(),{personalizedStyle:l}=(0,E.o)(),i=Y({actions:t}),r=a.formatMessage({defaultMessage:"Use style",id:"f7VY0ldE+0"});return{key:f.xd.STYLES,type:"optionGroup",icon:(0,s.jsx)(m.P_O,{size:16}),label:r,secondaryText:(null==l?void 0:l.isDefault)||null==l?void 0:l.name,children:[...n?[]:[{type:"back",key:"styles-back",label:r}],...i],indicatorActive:l&&"Default"!==l.key}},V=e=>{let t,{currentModel:a}=e,n=(0,b.A)(),l=(0,_.vP)("paprika_mode"),i=(0,C.J)(),r=(0,C.j)()(a),{toggleConversationSetting:d}=(0,_.rX)(),{value:c}=(0,x.fS)("model_selector_enabled"),{data:u}=k(),p=(0,o.h0)(),h=(0,v.useExperiment)("freemium"),g=z(),j=(0,O.Ob)();if((0,y.useEffect)(()=>{let e=!p,t=h.get("free_thinking",!1);e&&t&&(null==u?void 0:u.remaining)===0&&l&&d("paprika_mode",null)},[null==u?void 0:u.remaining,p,h,l,d]),!i||!c||(!i||!c)&&!j)return null;let w=n.formatMessage({defaultMessage:"Extended thinking",id:"5j4WakKa2u"}),M=!p,A=h.get("free_thinking",!1),N=M&&A&&(null==u?void 0:u.remaining)===0,S=!N&&!!l;if(M&&A&&u&&void 0!==u.remaining&&u.resets_at){let e=new Date(1e3*u.resets_at),a=n.formatDate(e,{month:"short",day:"numeric"});t=n.formatMessage({defaultMessage:"{remaining} remaining until {date}",id:"httnsxXSeU"},{remaining:u.remaining,date:a})}let I={key:f.xd.EXTENDED_THINKING,type:"switch",label:w,icon:(0,s.jsx)(m.Sw4,{size:16}),isChecked:S,indicatorActive:S,...t&&{subtitle:t},...N&&{isDisabled:!0,tag:"upgrade",rateLimitReached:!0,onClick:()=>{window.location.href="/upgrade"}}};return i&&c||!j||p?r?{...I,...N?{}:{onClick:()=>{d("paprika_mode",l?null:"extended")},tooltip:n.formatMessage({defaultMessage:"Allow Claude to think out loud for longer for trickier questions and challenges.",id:"bbgQqH7Grg"}),tooltipImage:{src:"/images/feature-preview/extended-thinking.png",width:200,height:108}}}:{...I,...g}:{...I,isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}}},K=e=>{let{showConnectAction:t,mcpToolsSetting:a,toggleMcpToolEnabled:i,remoteOnly:r}=e,o=(0,b.A)(),{servers:d}=(0,N.gt)(),c=(0,N.QD)();return d.filter(e=>(!!e.isConnected||!!e.isAuthless||!!e.isLoading||!!t)&&(!r||"remote"===e.type)).map(e=>{let t={key:e.uuid,label:e.name,icon:(0,s.jsx)(l.d,{url:e.url,fallbackSvg:(0,s.jsx)(n.B,{letter:e.name,size:16}),size:16})};if(!e.isConnected&&!e.isAuthless&&!e.isLoading)return{...t,type:"button",isExternal:!0,secondaryText:o.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:()=>c(e)};let r=e.tools.map(t=>{let l=(0,N.Cc)(e.uuid,t.name),r=!1!==a[l];return{key:l,type:"switch",label:t.name,icon:(0,s.jsx)(n.B,{letter:t.name,size:16}),isChecked:r,onClick:()=>{i(l,!r)}}}),d=r.filter(e=>"switch"===e.type&&e.isChecked).length,u=d>0;return r.length>1?r.unshift({key:"select-all",type:"switch",label:u?o.formatMessage({defaultMessage:"Disable all tools",id:"8A9N39nihk"}):o.formatMessage({defaultMessage:"Enable all tools",id:"x4/g36jIjW"}),icon:(0,s.jsx)(n.p,{letter:e.tools[0].name,size:16}),onClick:()=>{i(e.tools.map(t=>(0,N.Cc)(e.uuid,t.name)),!u)},isChecked:u,skipCloseOnClick:!0,nonSearchable:!0},{key:"divider1",type:"divider",label:""}):0===r.length&&r.push({key:"empty",type:"button",label:o.formatMessage({defaultMessage:"No tools available",id:"+XSkrzcF/0"}),icon:(0,s.jsx)(m.k0E,{size:16}),onClick:()=>void 0,isDisabled:!0}),{...t,type:"toggleGroup",enabledCount:d,children:r}})},q=()=>{var e;let t=null!=(e=(0,_.vP)("enabled_mcp_tools"))?e:{},{toggleMcpToolEnabled:a}=(0,N.es)();return K({showConnectAction:!0,mcpToolsSetting:t,toggleMcpToolEnabled:a})},W=()=>{var e;let{servers:t}=(0,N.gt)(),a=(0,y.useMemo)(()=>t.filter(e=>"remote"===e.type),[t]),s=null!=(e=(0,_.vP)("enabled_mcp_tools"))?e:{},[n,l]=(0,y.useState)(()=>{let e=new Set(a.map(e=>e.uuid));return Object.fromEntries(Object.entries(s).filter(t=>{let[a]=t,s=a.split(":")[0];return e.has(s)}))});return{menuOptions:K({showConnectAction:!1,mcpToolsSetting:n,toggleMcpToolEnabled:function(e,t){l(a=>({...a,...Array.isArray(e)?Object.fromEntries(e.map(e=>[e,t])):{[e]:t}}))},remoteOnly:!0}),getEnabledRemoteTools:()=>{let e=[];for(let t of a)for(let a of t.tools)!1!==n[(0,N.Cc)(t.uuid,a.name)]&&e.push({tool_name:a.name,server_uuid:t.uuid});return e}}},X=e=>(0,v.useDynamicConfig)("claude_ai_beta_tools").get("beta_tools",[]).includes(e)?"beta":void 0,J=()=>{var e;let t=(0,D.f)(),{account:a}=(0,o.YL)(),n=null==a||null==(e=a.settings)?void 0:e.enabled_monkeys_in_a_barrel,l=(0,_.vP)("enabled_monkeys_in_a_barrel"),i=!!(n&&l),{toggleConversationSetting:r}=(0,_.rX)(),[,c]=(0,d.V)(p.L.MONKEYS_IN_A_BARREL,null);return t&&i?{key:"monkeys_in_a_barrel",type:"switch",label:"Disable preview feature",icon:(0,s.jsx)(m.N5l,{size:16}),isChecked:i,indicatorActive:i,onClick:()=>{i||c(!0),r("enabled_monkeys_in_a_barrel",!i)}}:null}},38715:(e,t,a)=>{a.d(t,{V:()=>o});var s=a(54568);a(77101);var n=a(7620),l=a(67455),i=a(57383),r=a(74744);function o(e){let{uuid:t,syncSource:a,onRemove:o,isEditable:d}=e,{mutateAsync:c}=(0,l.Ql)(),u=(0,n.useCallback)(()=>{c(t),null==o||o()},[c,t,o]),{projectUuid:m}=(0,i.o)();return(0,s.jsx)(r.br,{location:"chat",projectUuid:m,syncSource:a,handleRemove:d?u:void 0,isEditable:d})}},40359:(e,t,a)=>{a.d(t,{g:()=>n});var s=a(54568);let n=e=>{let{height:t,className:a}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 139 34",className:a,height:t,fill:"currentColor","aria-label":"Claude",children:(0,s.jsx)("path",{d:"M18.07 30.79c-5.02 0-8.46-2.8-10.08-7.11a19.2 19.2 0 0 1-1.22-7.04C6.77 9.41 10 4.4 17.16 4.4c4.82 0 7.78 2.1 9.48 7.1h2.06l-.28-6.9c-2.88-1.86-6.48-2.81-10.87-2.81-6.16 0-11.41 2.77-14.34 7.74A16.77 16.77 0 0 0 1 18.2c0 5.53 2.6 10.42 7.5 13.15a17.51 17.51 0 0 0 8.74 2.06c4.78 0 8.57-.91 11.93-2.5l.87-7.62h-2.1c-1.26 3.48-2.76 5.57-5.25 6.68-1.22.55-2.76.83-4.62.83Zm21.65-26.4.2-3.39H38.5l-6.33 1.9v1.02l2.8 1.3v23.79c0 1.62-.82 1.98-3 2.25V33h10.75v-1.74c-2.17-.27-3-.63-3-2.25V4.4Zm42.75 29h.83l7.27-1.38v-1.78l-1.03-.07c-1.7-.16-2.13-.52-2.13-1.9V15.58l.2-4.07h-1.15l-6.87.99v1.73l.67.12c1.85.28 2.4.8 2.4 2.1v11.3C80.9 29.13 79.2 30 77.19 30c-2.26 0-3.64-1.15-3.64-3.8V15.58l.2-4.07h-1.19l-6.87.99v1.73l.71.12c1.86.28 2.41.8 2.41 2.1v10.43c0 4.42 2.49 6.52 6.48 6.52 3.04 0 5.53-1.62 7.39-3.88l-.2 3.88Zm-20-14.06c0-5.65-3-7.82-8.4-7.82-4.79 0-8.27 1.97-8.27 5.25 0 1 .36 1.74 1.07 2.25l3.64-.47c-.16-1.1-.24-1.78-.24-2.05 0-1.86.99-2.8 3-2.8 2.97 0 4.47 2.09 4.47 5.44v1.11l-7.51 2.25c-2.49.67-3.91 1.27-4.86 2.65a5 5 0 0 0-.71 2.8c0 3.2 2.21 5.46 5.97 5.46 2.72 0 5.13-1.23 7.23-3.56.75 2.33 1.9 3.56 3.95 3.56 1.66 0 3.16-.68 4.5-1.98l-.4-1.38c-.59.16-1.14.23-1.73.23-1.15 0-1.7-.9-1.7-2.68v-8.26Zm-9.6 10.87c-2.05 0-3.31-1.19-3.31-3.28 0-1.43.67-2.26 2.1-2.73l6.08-1.94v5.85c-1.94 1.46-3.08 2.1-4.86 2.1Zm63.3 1.81v-1.78l-1.02-.07c-1.7-.16-2.14-.52-2.14-1.9V4.4l.2-3.4h-1.42l-6.32 1.9v1.02l2.8 1.3v7.83a8.84 8.84 0 0 0-5.37-1.54c-6.28 0-11.18 4.78-11.18 11.93 0 5.89 3.51 9.96 9.32 9.96 3 0 5.61-1.47 7.23-3.72l-.2 3.72h.83l7.27-1.39Zm-13.15-18.13c3 0 5.25 1.74 5.25 4.94v9a7.2 7.2 0 0 1-5.21 2.1c-4.31 0-6.48-3.4-6.48-7.94 0-5.1 2.48-8.1 6.44-8.1Zm28.52 4.5c-.55-2.64-2.17-4.15-4.42-4.15-3.36 0-5.7 2.53-5.7 6.17 0 5.37 2.85 8.85 7.44 8.85a8.6 8.6 0 0 0 7.38-4.35l1.35.36c-.6 4.66-4.82 8.14-10 8.14-6.08 0-10.27-4.5-10.27-10.9 0-6.45 4.54-11 10.63-11 4.54 0 7.74 2.73 8.77 7.48l-15.84 4.85V21.7l10.66-3.32Z"})})}},42824:(e,t,a)=>{a.d(t,{U:()=>n});var s=a(56147);let n=e=>{let t=(0,s.ED)(e),{maxKbTokens:a}=(0,s.AO)();return void 0!==t&&t>a}},45317:(e,t,a)=>{a.d(t,{x:()=>l});var s=a(42977);function n(){let e=(0,s._)(["\n  font-normal\n  text-[0.65rem]\n  sm:text-xs\n  w-full\n  flex\n  gap-1.5\n  items-center\n  justify-between\n"]);return n=function(){return e},e}let l=a(90510).J.div(n())},45483:(e,t,a)=>{a.d(t,{E:()=>p,I:()=>m});var s=a(7726),n=a(98518),l=a(1761),i=a(87606),r=a(76088),o=a.n(r),d=a(62942),c=a(7620),u=a(47492);let m=()=>{let e="new-conversation-params-for-navigation",t=(0,i.useQueryClient)(),a=(0,c.useCallback)(()=>{let t=localStorage.getItem(e);if(!t)return{};try{let e=JSON.parse(t);return o()(e,e=>Date.now()-e.created_at<6e4)}catch(t){localStorage.removeItem(e)}return{}},[]);return{prepareNewConversation:(0,c.useCallback)((s,n)=>{let l={created_at:Date.now(),...n};t.setQueryData([e,s],l);let i=a();i[s]=l;try{localStorage.setItem(e,JSON.stringify(i))}catch(e){}},[t,a]),getCreateParamsForConvo:(0,c.useCallback)(s=>{let n=a(),l=t.getQueryData([e,s])||n[s];t.removeQueries({queryKey:[e,s]});let i=o()(n,(e,t)=>t!==s);return localStorage.setItem(e,JSON.stringify(i)),l},[t,a])}};function p(){var e;let t=(0,n.st)(),{data:a}=(0,s.Fn)(),{mutateAsync:i}=(0,s.CW)(),[r,o]=(0,u.d)(),{prepareNewConversation:p}=m(),{account:x}=(0,l.YL)(),h=(0,d.useRouter)();return(0,c.useCallback)(async e=>{var s;let{model:n,project_uuid:l,include_conversation_preferences:d,paprika_mode:c,compass_mode:u,create_mode:m,name:f}=e,g=i({uuid:r,name:null!=f?f:"",model:n,project_uuid:l,include_conversation_preferences:d,paprika_mode:c,compass_mode:u,create_mode:m});if(p(r,e),await g,(null==x||null==(s=x.settings)?void 0:s.has_finished_claudeai_onboarding)===!1){let e=new URLSearchParams;e.append("returnTo","/chat/".concat(r));let t="/onboarding?".concat(e.toString());h.push(t)}else h.push("/chat/".concat(r));return o(),(null==a?void 0:a.is_first_conversation)&&await t.track({event_key:"chat.conversation.first_conversation_created",surface:"claude.ai"}),{uuid:r}},[i,r,o,a,t,h,p,null==x||null==(e=x.settings)?void 0:e.has_finished_claudeai_onboarding])}},47492:(e,t,a)=>{a.d(t,{d:()=>i});var s=a(75632),n=a(7620);let l={current:(0,s.N)()};function i(){let e=(0,n.useRef)(l);return[e.current.current,()=>{e.current.current=(0,s.N)()}]}},47959:(e,t,a)=>{a.d(t,{h:()=>o});var s=a(54568),n=a(10158),l=a(1761),i=a(41417);a(7620);var r=a(62971);function o(){let{allowSelfUpgrade:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(function(e){let t=(0,l.UC)(),a=(0,l.wi)(),s=(0,l.bu)(),i=(0,l.tP)();return(0,n.fZ)()?(i||t)&&e?a||s||i?!t&&s?"subscribe-max":!t&&i?"subscribe-max-20x":"subscribe":"subscribe-pro-only":"none":"contact-sales"}(e)){case"contact-sales":return(0,s.jsx)(d,{});case"subscribe":return(0,s.jsx)(c,{});case"subscribe-pro-only":return(0,s.jsx)(u,{});case"subscribe-max":return(0,s.jsx)(m,{});case"subscribe-max-20x":return(0,s.jsx)(p,{});case"none":return null}}function d(){let{websiteBaseUrl:e}=(0,n._r)();return(0,s.jsx)(i.$,{href:"".concat(e,"/contact-sales"),children:(0,s.jsx)(r.A,{defaultMessage:"Contact us to upgrade",id:"VifKcG4Va9"})})}function c(){return(0,s.jsx)(i.$,{href:"/upgrade?hide_free=true",children:(0,s.jsx)(r.A,{defaultMessage:"Upgrade plan",id:"c5+JRMBv/Y"})})}function u(){return(0,s.jsx)(i.$,{href:"/upgrade/pro",children:(0,s.jsx)(r.A,{defaultMessage:"Upgrade plan",id:"c5+JRMBv/Y"})})}function m(){return(0,s.jsx)(i.$,{href:"/upgrade?hide_pro=true",children:(0,s.jsx)(r.A,{defaultMessage:"Subscribe to Max",id:"8ACH3Vf732"})})}function p(){return(0,s.jsx)(i.$,{href:"/upgrade",children:(0,s.jsx)(r.A,{defaultMessage:"Increase usage",id:"Lc0QnIgRuR"})})}},49077:(e,t,a)=>{a.d(t,{V:()=>o});var s=a(54568),n=a(40359),l=a(29242),i=a(27062),r=a(64979);let o=e=>{let{model:t,hasMultiModalContent:a,hideModelNameLogo:o}=e,{value:d}=(0,i.fS)("claude_ai_redacted_model_name_reveal"),c=t.name.replace("Claude",""),u=(0,r.t)(c,t.model,a),m=!d&&c.startsWith("\uD83E\uDD2B")?(0,s.jsx)(l.m,{tooltipContent:u,children:(0,s.jsx)("span",{children:"\uD83E\uDD2B"})}):u;return(0,s.jsxs)("div",{className:"font-claude-response inline-flex gap-[3px] text-[14px] h-[14px] leading-none items-baseline",children:[!o&&(0,s.jsx)(n.g,{className:"claude-logo-model-selector block translate-y-[0.5px]",height:11.5}),(0,s.jsx)("div",{className:"flex items-center gap-[4px]",children:(0,s.jsx)("div",{className:"whitespace-nowrap tracking-tight select-none",children:m})})]})}},49194:(e,t,a)=>{a.d(t,{X:()=>s});function s(e){return"default"===e.type?e.key:e.uuid}},50163:(e,t,a)=>{a.d(t,{L:()=>l,NuxProvider:()=>i});var s=a(54568),n=a(7620);let l=(0,n.createContext)(null);function i(e){let{children:t}=e,[a,i]=(0,n.useState)({items:{},currentlyShowing:null}),o=(0,n.useCallback)((e,t)=>{i(a=>{if(a.items[e])return a;let s={...a.items,[e]:t};return{items:s,currentlyShowing:r(s,!0)}})},[]),d=(0,n.useCallback)(e=>{i(t=>{let{[e]:a,...s}=t.items;return{items:s,currentlyShowing:t.currentlyShowing===e?r(s):t.currentlyShowing}})},[]),c={items:a.items,currentlyShowing:a.currentlyShowing,registerNux:o,unregisterNux:d};return(0,s.jsx)(l.Provider,{value:c,children:t})}let r=(e,t)=>{let a=Object.entries(e).sort((e,t)=>{let a=e[1].priority||0,s=t[1].priority||0;return a!==s?s-a:new Date(t[1].dateAdded).getTime()-new Date(e[1].dateAdded).getTime()});if(t){var s,n;return null!=(n=null==(s=a[0])?void 0:s[0])?n:null}for(let[e,t]of a)if(t.showAfterOthersDismiss)return e;return null}},51699:(e,t,a)=>{a.d(t,{Kk:()=>b,V7:()=>y,bc:()=>v});var s=a(54568),n=a(1761),l=a(9537),i=a(41417),r=a(77101),o=a(57622),d=a(30244),c=a(32987),u=a(7620),m=a(62971),p=a(46760),x=a(92075),h=a(81527),f=a(32805),g=a(60629);let v=(0,s.jsx)(m.A,{defaultMessage:"Everyone in your organization can view and use this project",id:"o6dyBu92Ad"}),y=(0,s.jsx)(m.A,{defaultMessage:"Only invited members can view and use this project",id:"r65HKpZU8I"});function b(e){var t,a,b,j,w,k;let{syncSources:M=[],onProjectCreated:A,onError:C,onCancel:N,strings:_}=e,S=(0,p.A)(),I=(0,n.mV)(),E=(0,g.AI)(),{customInstructions:T,type:D,subtype:O}=null!=E?E:{},[R,z]=(0,u.useState)({name:"",description:null!=(t=_.createProjectDescriptionDefault)?t:"",type:D,subtype:O,is_private:!0}),[L,P]=(0,u.useState)({}),[U,F]=(0,u.useState)(!1),G=M.length>0,H=M.some(e=>e.type===r.v8.GITHUB),Y=M.some(e=>e.type===r.v8.GDRIVE),B=H&&Y?(0,s.jsx)(m.A,{defaultMessage:"Github and GDrive attachments can only be added to private projects",id:"rqNebqAfPF"}):H?(0,s.jsx)(m.A,{defaultMessage:"Github attachments can only be added to private projects",id:"eyujXWQfg4"}):Y?(0,s.jsx)(m.A,{defaultMessage:"GDrive attachments can only be added to private projects",id:"DMBgAV43lL"}):(0,s.jsx)(m.A,{defaultMessage:"Some of these attachments can only be added to private projects",id:"2ssKO1VReL"}),{mutateAsync:V}=(0,h.bL)(),{activeOrganization:K}=(0,n.YL)(),{data:q}=(0,h.BN)(),{data:W,isLoading:X}=(0,h.PL)(),{data:J}=(0,x.q)(),$=J&&!G,Z=e=>t=>{z(a=>({...a,[e]:t.target.value})),P(t=>({...t,[e]:null}))},Q=e=>{z(t=>({...t,is_private:e.target.checked&&"private"===e.target.value}))},ee=()=>{let e={};return""===R.name.trim()&&(e.name=S.formatMessage({defaultMessage:"Project name is required",id:"n5cqkMmIMW"})),P(e),0===Object.keys(e).length},et=async e=>{if(e.preventDefault(),!U&&ee()){F(!0);try{let e={...R};T&&(e.prompt_template=T.replaceAll("{{PROJECT_NAME}}",R.name));let t=await V(e);A(t)}catch(e){C(e)}finally{F(!1)}}};return(0,s.jsxs)("form",{className:"grid grid-cols-1 gap-4",onSubmit:e=>et(e),children:[!X&&0===W&&!E&&(0,s.jsxs)("div",{className:"bg-bg-300 border-border-400/10 text-text-300 flex w-full flex-col items-start justify-start gap-2 rounded-xl border px-5 pb-5 pt-4 text-sm",children:[(0,s.jsx)("div",{className:"flex items-center gap-1 font-medium",children:(0,s.jsx)(m.A,{defaultMessage:"How to use projects",id:"moKJkVk/qB"})}),I?(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("div",{children:(0,s.jsx)(m.A,{defaultMessage:"Use Projects with your team to do things like:",id:"fcUpqajVgl"})}),(0,s.jsxs)("ul",{className:"list-disc pl-4",children:[(0,s.jsx)("li",{children:(0,s.jsx)(m.A,{defaultMessage:"Query and analyze information about customers, sales calls, and project plans",id:"1YyB53/KOc"})}),(0,s.jsx)("li",{children:(0,s.jsx)(m.A,{defaultMessage:"Upload files from your codebase to understand, improve, and contribute",id:"HXj87AQH0P"})}),(0,s.jsx)("li",{children:(0,s.jsx)(m.A,{defaultMessage:"Generate analysis and reports from one consistent set of materials",id:"3XvEQYrcUv"})}),(0,s.jsx)("li",{children:(0,s.jsx)(m.A,{defaultMessage:"Create content informed by company policies and documentation",id:"HrODk029zr"})})]}),(0,s.jsx)("p",{children:(0,s.jsx)(m.A,{defaultMessage:"Start by creating a memorable title and description to organize your project. You can always edit it later.",id:"qEWJMy5mr7"})})]}):(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("p",{children:(0,s.jsx)(m.A,{defaultMessage:"Projects help organize your work and leverage knowledge across multiple conversations. Upload docs, code, and files to create themed collections that Claude can reference again and again.",id:"7HFalNigyO"})}),(0,s.jsx)("p",{children:(0,s.jsx)(m.A,{defaultMessage:"Start by creating a memorable title and description to organize your project. You can always edit it later.",id:"qEWJMy5mr7"})})]}),q&&(0,s.jsx)("div",{children:(0,s.jsx)(m.A,{defaultMessage:"Curious to learn more? <link>Try an example project</link>",id:"+AcqvUzRry",values:{link:e=>(0,s.jsx)(i.$,{variant:"underline",size:"unset",href:"/project/".concat(q),children:e})}})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(l.ks,{autoFocus:!0,name:"name",className:"w-full",label:null!=(a=_.createProjectNameLabel)?a:S.formatMessage({defaultMessage:"What are you working on?",id:"R2IogQsIBI"}),placeholder:null!=(b=_.createProjectNamePlaceholder)?b:S.formatMessage({defaultMessage:"Name your project",id:"BtIbm/e/WX"}),size:"lg",onChange:Z("name"),error:!!L.name,"data-1p-ignore":!0}),L.name&&(0,s.jsx)("div",{className:"text-danger-000 mt-1 text-right text-xs font-medium",children:L.name})]}),!E&&(0,s.jsx)("div",{children:(0,s.jsx)(l.fs,{name:"description",className:"w-full",label:null!=(j=_.createProjectDescriptionLabel)?j:S.formatMessage({defaultMessage:"What are you trying to achieve?",id:"RPsTh+NBxY"}),placeholder:null!=(w=_.createProjectDescriptionPlaceholder)?w:S.formatMessage({defaultMessage:"Describe your project, goals, subject, etc...",id:"WStTnUWlP8"}),minRows:3,onChange:Z("description"),error:L.description})}),I?(0,s.jsxs)("fieldset",{children:[(0,s.jsx)("div",{className:"mb-2 text-sm font-medium",children:(0,s.jsx)(m.A,{defaultMessage:"Visibility",id:"JAkIqbzRj5"})}),(0,s.jsxs)("label",{className:(0,c.A)("mb-2 flex w-full gap-2",!$&&"opacity-40"),children:[(0,s.jsx)("input",{name:"visibility",className:"mt-0.5",type:"radio",value:"open",checked:!R.is_private,onChange:Q,disabled:!$}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)(o.m,{size:16,className:"-mt-1 mr-1 inline-block"}),null!=(k=null==K?void 0:K.name)?k:(0,s.jsx)(m.A,{defaultMessage:"Organization",id:"K56Dims7Up"})]}),(0,s.jsx)("div",{className:"text-text-300 text-xs",children:J?G?B:v:(0,s.jsx)(m.A,{defaultMessage:"Public projects are disabled by your organization",id:"c2HBgZtgDR"})})]})]}),(0,s.jsxs)("label",{className:"flex w-full gap-2",children:[(0,s.jsx)("input",{name:"visibility",className:"mt-0.5",type:"radio",value:"private",checked:R.is_private,onChange:Q}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)(d.W,{size:16,className:"-mt-1 mr-1 inline-block"}),(0,s.jsx)(m.A,{defaultMessage:"Private",id:"viXE3205/2"})]}),(0,s.jsx)("div",{className:"text-text-300 text-xs",children:y})]})]})]}):null,(0,s.jsx)("div",{className:"mt-2 flex justify-end",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(i.$,{onClick:N,href:N?void 0:"/projects",variant:"secondary",disabled:U,children:(0,s.jsx)(m.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,s.jsx)(f.i,{children:(0,s.jsx)(i.$,{type:"submit",loading:U,children:(0,s.jsx)(m.A,{defaultMessage:"Create project",id:"VUN1K7kSzC"})})})]})})]})}},53600:(e,t,a)=>{a.d(t,{R:()=>m,V:()=>u});var s=a(54568),n=a(89674),l=a(91961),i=a(46612),r=a(72638),o=a(89598),d=a(7620);let c=(0,d.createContext)({isExpanded:!1,setIsExpanded:()=>void 0,closeSidebarOnMobile:()=>void 0,isMobile:!1,setForceMobileLayout:()=>void 0});function u(){return(0,d.useContext)(c)}function m(e){let{children:t}=e,[a,u]=(0,n.j)(i.eT.SIDEBAR_PINNED,!1),[m,p]=(0,n.j)(i.eT.SIDEBAR_VISIBLE_ON_LOAD,!1),{width:x}=(0,r.l)(),[h,f]=d.useState(!1),g=h||(0===x?!m:x<1024),[v,y]=d.useState(m&&a);(0,o.M)("keydown",e=>{var t,a;let s=(0,l.cX)()?e.metaKey:e.ctrlKey;if((null==(t=e.key)?void 0:t.toLowerCase())==="."&&s&&(e.preventDefault(),y(e=>!e)),"Escape"===e.key&&v&&(e.preventDefault(),y(!1)),(null==(a=e.key)?void 0:a.toLowerCase())==="u"&&s){let t=document.getElementById("chat-input-file-upload-onpage")||document.getElementById("chat-input-file-upload-modal")||document.getElementById("chat-input-file-upload-bottom");t instanceof HTMLInputElement&&(e.preventDefault(),t.click())}});let b=(0,d.useMemo)(()=>({isExpanded:v,setIsExpanded:e=>{y(e),g||u(e)},closeSidebarOnMobile:()=>{g&&v&&y(!1)},isMobile:g,setForceMobileLayout:f}),[v,y,g,u,f]);return(0,d.useEffect)(()=>{g?(p(!1),y(!1)):(p(!0),y(a))},[g,p,y,a]),(0,s.jsx)(c.Provider,{value:b,children:t})}},53685:(e,t,a)=>{a.d(t,{$z:()=>o,cY:()=>r});var s=a(77186),n=a(1761),l=a(27062),i=a(21036);function r(){let e=(0,i.useLayer)("frontend"),{value:t}=(0,l.fS)("chat_suggestion_chips_enabled"),a=e.get("chat_suggestion_chips",!1);return t||a}function o(e){let{mutateAsync:t,enabled:a}=function(){let{activeOrganization:e}=(0,n.YL)(),{value:t}=(0,l.fS)("chat_autocomplete"),a=(0,s.L2)("/api/organizations/".concat(null==e?void 0:e.uuid,"/dust/chat_autocomplete"),"POST",{enabled:t,onError:()=>{console.warn("Failed to fetch completion")},meta:{noToast:!0}});return{mutateAsync:a.mutateAsync,isPending:a.isPending,isIdle:a.isIdle,enabled:t}}();return{fetchInputAutocompletion:async s=>{if(!a||!e)return"";let[n,l]=(await t({conversationUUID:null!=e?e:"",prompt:s})).prompt.split("\n").map(e=>e.trim());return"Yes"===n?" "===s[s.length-1]?l||"":" "+(l||""):"No"===n&&l||""}}}},56704:(e,t,a)=>{a.d(t,{CD:()=>d});var s=a(77186),n=a(1761),l=a(71473),i=a(77101),r=a(85717);let o=e=>[i.I5.CREATED,i.I5.PENDING,i.I5.UPDATING].includes(e),d=()=>{let e=(0,r.$f)(),t=(0,r.vT)(),a=(0,r.K6)(),{data:s}=c(i.v8.GDRIVE),n=null==s?void 0:s.state;return!!(e&&t&&a&&n&&[i.I5.CREATED,i.I5.UPDATING,i.I5.PENDING].includes(n))},c=e=>{let{account:t,activeOrganization:a}=(0,n.YL)(),i=null==t?void 0:t.uuid,r=null==a?void 0:a.uuid;return(0,s.Sk)("/api/organizations/".concat(r,"/sync/ingestion/").concat(e,"/progress"),{queryKey:[l.hx,{orgUuid:r,accountUuid:i,syncSourceType:e}],enabled:!!a,refetchInterval:e=>!!(e.state.data&&o(e.state.data.state))&&6e4,meta:{noToast:!0}})}},59296:(e,t,a)=>{a.d(t,{Q:()=>eV,I:()=>eB});var s=a(54568),n=a(85644),l=a(9896),i=a(98518),r=a(1761),o=a(46612),d=a(23661),c=a(27062),u=a(77101),m=a(90119),p=a(10097),x=a(7620),h=a(62971),f=a(34116),g=a(52909),v=a(85717),y=a(92947),b=a(91768),j=a(56704),w=a(56147),k=a(56273),M=a(11091),A=a(32987),C=a(49645),N=a(37463);function _(e){let{warning:t,placement:a,theme:n,onClick:l}=e,i=(0,A.A)("w-full border-0.5 relative z-[5] px-3.5","bottom"===a?"-mb-1 rounded-t-xl border-b-0 pb-2.5 pt-2":"-mb-1 -mt-1 rounded-b-xl border-t-0 pb-2 pt-2.5",{"bg-danger-900 border-danger-100/20":"danger"===n,"text-text-200 border-accent-pro-100/20 bg-accent-pro-900":"pro"===n,"bg-bg-200 border-border-300":"info"===n,"bg-bg-200 border-transparent":"chin"===n,"hover:bg-bg-300 transition-colors":"chin"===n&&!!l});return(0,s.jsx)(C.N,{children:t&&(0,s.jsx)(N.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:l?(0,s.jsx)("button",{className:(0,A.A)(i),onClick:l,children:t}):(0,s.jsx)("div",{className:i,children:t})})})}var S=a(57383),I=a(41417),E=a(21036),T=a(68864),D=a(14786),O=a(80079),R=a(51121),z=a(18179),L=a(37076),P=a(36208),U=a(96712),F=a(78730),G=a(90384),H=a(74027),Y=a(23952),B=a(9537);function V(e){let{onReady:t,children:a,onSuccess:n}=e,l=(0,Y.useStripe)(),i=(0,Y.useElements)(),{account:o}=(0,r.YL)(),[d,c]=(0,x.useState)(null),[u,m]=(0,x.useState)(!1),[p,g]=(0,x.useState)(!1),{mutateAsync:v}=(0,f.k0)(),y=async()=>{if(!u&&l&&i){m(!0);try{let e=await i.submit();if(e.error){e.error.message&&c(e.error.message);return}let t=await v(),{error:a}=await l.confirmPayment({elements:i,clientSecret:t.clientSecret,redirect:"if_required"});(null==a?void 0:a.message)&&"validation_error"!==a.type&&c(a.message),a||n()}catch(e){c(e.message)}finally{m(!1)}}};return(0,s.jsxs)(B.lV,{onSubmit:()=>{u||y()},children:[(0,s.jsx)(Y.PaymentElement,{id:"payment-element",options:{readOnly:u,layout:"tabs",terms:{card:"never"},defaultValues:{billingDetails:{email:null==o?void 0:o.email_address,name:null==o?void 0:o.full_name}}},onReady:()=>{g(!0),t&&t()}}),d&&(0,s.jsx)("div",{className:"text-danger-000 mt-4",id:"payment-message",children:d}),(0,s.jsxs)("div",{className:"mt-5 flex flex-row flex-wrap items-center justify-end gap-3",children:[a,(0,s.jsx)(I.$,{type:"submit",loading:u,variant:"flat",className:"bg-accent-pro-100 hover:bg-accent-pro-200 w-full py-6",disabled:!p,children:(0,s.jsx)(h.A,{defaultMessage:"Confirm payment",id:"Dja1nAdMHW"})})]}),(0,s.jsx)("div",{className:"mt-3 text-text-500 text-sm text-center",children:(0,s.jsx)(h.A,{defaultMessage:"By providing your payment information, you allow Anthropic to charge your card in the amount above. Purchase non-refundable.",id:"0L0VGgMTRs"})})]})}function K(e){let{amount:t,currency:a,children:n,className:l,onSuccess:i}=e,r=(0,F.ib)(),[d,c]=(0,x.useState)(!0),{theme:u,mode:m}=(0,H.D)(),p=(0,U.l)().get(o.eT.COLOR_MODE),h={fontSizeBase:"16px",colorBackground:(0,G.w)(u,m,p,"bg-000"),colorText:(0,G.w)(u,m,p,"text-100")},f={mode:"payment",amount:t,currency:null==a?void 0:a.toLowerCase(),payment_method_types:["card","link"],loader:"never",appearance:{theme:"stripe",variables:h}};return(0,s.jsxs)("div",{className:(0,A.A)("relative",l),children:[(0,s.jsx)("div",{className:(0,A.A)("w-full pt-1 transition-opacity duration-1000",{"opacity-0":d}),children:(0,s.jsx)(Y.Elements,{options:f,stripe:r,children:(0,s.jsx)(V,{onReady:()=>c(!1),onSuccess:i,children:n})})}),d&&(0,s.jsx)(q,{})]})}let q=()=>(0,s.jsx)("div",{className:"absolute inset-0 flex h-full w-full items-center justify-center",children:(0,s.jsx)(z.Loading,{})});function W(e){var t,a;let n,{isOpen:l,onClose:i,conversationUUID:o}=e,d=(0,R.Y)(),{activeOrganization:c}=(0,r.YL)(),u=(0,O.$)(),m=(0,x.useCallback)(()=>{d.addSuccess((0,s.jsx)(h.A,{defaultMessage:"Message limits reset. Let’s chat!",id:"LGCoQdVha4"})),(null==c?void 0:c.uuid)&&o&&u({type:"within_limit"},c.uuid,o),i()},[null==c?void 0:c.uuid,o,i,d,u]),{data:p,isLoading:g}=(0,f.Zr)();return p&&(n=(0,P.vv)(p.price+(null!=(t=p.taxAmount)?t:0),p.currency,{preferWholeNumber:!0})),(0,s.jsx)(L.aF,{isOpen:l,onClose:i,title:(0,s.jsx)("div",{className:"text-text-200 font-ui-serif text-xl font-medium tracking-tight mt-2",children:(0,s.jsx)(h.A,{defaultMessage:"Reset usage limits",id:"YKpO8tTise"})}),hasCloseButton:!0,modalSize:"lg",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex p-3 justify-center items-center gap-10 self-stretch rounded-xl border border-accent-pro-100 bg-accent-pro-900 mt-6",children:[(0,s.jsx)("div",{className:"flex flex-col px-5 gap-2",children:g||!p?(0,s.jsx)(z.Loading,{size:"sm"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-text-100 text-3xl/6 font-medium tracking-tighter",children:n}),null===p.taxAmount&&(0,s.jsx)("p",{className:"text-text-500 text-sm/3 tracking-tight text-nowrap",children:(0,s.jsx)(h.A,{defaultMessage:"+ tax",id:"H/9uGFjKzR"})})]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("p",{className:"text-text-200 text-sm tracking-tight",children:(0,s.jsx)(h.A,{defaultMessage:"Immediately get access to Claude instead of waiting for usage limits to reset.",id:"6Gj58FRZ27"})}),(0,s.jsx)("p",{className:"text-text-200 text-sm tracking-tight",children:(0,s.jsx)(h.A,{defaultMessage:"This is a one-time payment.",id:"lVfQHZlUq0"})})]})]}),(0,s.jsx)(K,{amount:p?p.price+(null!=(a=p.taxAmount)?a:0):500,currency:(null==p?void 0:p.currency)||"USD",onSuccess:m})]})})}function X(e){let{messageLimit:t,placement:a,defaultWarning:n,defaultTheme:l}=e,i=(0,E.useExperiment)("rate_limit_resets").get("allow_rate_limit_resets",!1);return i&&("exceeded_limit"===t.type||"approaching_limit"===t.type&&0===t.remaining)?(0,s.jsx)(_,{theme:"pro",placement:a,warning:(0,s.jsx)($,{messageLimit:t})}):i&&"approaching_limit"===t.type?(0,s.jsx)(_,{theme:"info",placement:a,warning:(0,s.jsx)(J,{messageLimit:t})}):(0,s.jsx)(_,{theme:l,warning:n,placement:a})}let J=e=>{let{messageLimit:t}=e,[a,n]=(0,x.useState)(!1);return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"flex w-full flex-col items-center md:flex-row gap-2",children:[(0,s.jsx)("div",{className:"flex flex-row items-center gap-2 md:w-full",children:(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"text-sm",children:1===t.remaining?(0,s.jsx)(h.A,{id:"RoowG4DICE",defaultMessage:"You have 1 message left before hitting usage limits"}):(0,s.jsx)(h.A,{id:"4rS9S85sm+",defaultMessage:"You have {numMessagesRemaining} messages left before hitting usage limits",values:{numMessagesRemaining:t.remaining}})})})}),(0,s.jsx)("div",{className:"-mt-px w-full whitespace-nowrap md:w-fit",children:(0,s.jsx)(I.$,{variant:"unstyled",className:(0,A.A)("@lg:w-fit w-full shrink-0","text-sm font-medium","text-accent-pro-000","hover:text-accent-pro-000 hover:bg-bg-500/40"),onClick:()=>{n(!0)},children:(0,s.jsx)(h.A,{id:"0Lg76lu7jn",defaultMessage:"Reset limits"})})})]}),(0,s.jsx)(W,{isOpen:a,onClose:()=>n(!1),conversationUUID:t.conversationUUID})]})},$=e=>{let{messageLimit:t}=e,a=T.c9.fromSeconds(t.resetsAt),[n,l]=(0,x.useState)(!1);return(0,s.jsxs)(D.q,{minimalUi:!0,actionButton:(0,s.jsxs)(I.$,{variant:"unstyled",size:"sm",className:(0,A.A)("@lg:w-fit w-full shrink-0","bg-accent-pro-100 text-oncolor-100 font-medium font-ui tracking-tight transition-colors hover:bg-accent-pro-200"),onClick:()=>{l(!0)},children:[(0,s.jsx)(h.A,{id:"0Lg76lu7jn",defaultMessage:"Reset limits"}),(0,s.jsx)("span",{className:"inline-block text-[0.65rem] bg-bg-000/20 ml-2 px-1.5 py-0.5 rounded",children:(0,s.jsx)(h.A,{id:"vroSRZd5vI",defaultMessage:"BETA"})})]}),children:[(0,s.jsx)(h.A,{id:"74NSYSM2xX",defaultMessage:"You can reset usage limits now or wait until {time}.",values:{time:(0,s.jsx)("span",{className:"inline-block",children:a.toLocaleString(T.c9.TIME_SIMPLE)})}}),(0,s.jsx)(W,{isOpen:n,onClose:()=>l(!1),conversationUUID:t.conversationUUID})]})};var Z=a(42824),Q=a(45317),ee=a(18472),et=a(11515),ea=a(62094),es=a(61773),en=a(99965);let el=()=>{let e=(0,en.lu)();return(0,s.jsxs)(Q.x,{children:[(0,s.jsx)("p",{className:"text-[13px] text-text-200",children:(0,s.jsx)(h.A,{defaultMessage:"Connect your tools to Claude",id:"exSmFaQCLC"})}),(0,s.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex flex-row",children:[e&&["https://mcp.notion.com/mcp","https://mcp.canva.com/mcp","https://mcp.linear.app/sse","https://mcp.atlassian.com/v1/sse","https://mcp.asana.com/sse"].map(e=>(0,s.jsx)("div",{className:"w-3",children:(0,s.jsx)(ee.O,{size:18,children:(0,s.jsx)(et.d,{url:e,size:13,fadeInOnLoad:!0})},e)},e)),["/images/icons/messages-app.svg","/images/icons/notes-app.svg","/images/icons/chrome-app.svg"].map(e=>(0,s.jsx)("div",{className:"w-3",children:(0,s.jsx)(ee.O,{size:18,children:(0,s.jsx)(es.default,{src:e,alt:"",width:13,height:13})},e)},e))]}),(0,s.jsx)(ea.J,{size:16,className:"text-text-500"})]})]})};var ei=a(27261),er=a.n(ei),eo=a(46760);function ed(){let e=(0,r.Kq)(),t=(0,eo.A)();return(0,s.jsx)(D.q,{actionButton:null,title:t.formatMessage({defaultMessage:"Team plan canceled",id:"KuqVOfg9/0"}),children:e?(0,s.jsx)(h.A,{defaultMessage:"You can no longer chat with Claude. To restore full access, <link>renew your subscription</link>.",id:"L2pC0kiNNO",values:{link:e=>(0,s.jsx)(er(),{className:"whitespace-nowrap font-medium underline",href:"/settings/billing",children:e})}}):(0,s.jsx)(h.A,{defaultMessage:"You can no longer chat with Claude.",id:"hxcpUUnV0b"})})}var ec=a(47959);let eu=()=>{let e=(0,ec.h)({allowSelfUpgrade:!1});return(0,s.jsx)(D.q,{actionButton:e,children:(0,s.jsx)(h.A,{defaultMessage:"Due to capacity constraints, chatting with Claude is currently not available. Please try again shortly.",id:"kfyWX0MxKQ"})})};var em=a(45078),ep=a(95675);let ex=e=>{let{className:t,...a}=e;return(0,s.jsx)("a",{className:(0,A.A)("text-text-100 font-medium hover:underline",t),...a})},eh=e=>{var t;let a,{inaccessibleSyncSources:n}=e,{chatResourceState:l}=(0,k.i)(),i=(0,em.v2)(),{isDrawerExpanded:r,setIsDrawerExpanded:o}=(0,ep.x)(),d=n.every(e=>e.status.state===u.I5.UNAUTHENTICATED)&&1===new Set(n.map(e=>e.type)).size,c=null==(t=n[0])?void 0:t.type,m=(0,s.jsx)("button",{onClick:()=>{o(!0)},children:(0,s.jsx)(ex,{children:(0,s.jsx)(h.A,{defaultMessage:"Show {count, plural, one {# Item} other {# Items}}",id:"1HlfJxfH7H",values:{count:n.length}})})});return d&&null!==c?a=(0,s.jsx)("button",{onClick:()=>i(c),children:(0,s.jsx)(ex,{children:(0,s.jsx)(h.A,{defaultMessage:"Reconnect with {sourceName}",id:"dUareRZF9G",values:{sourceName:u.sb[c]}})})}):l.conversationUUID&&!r&&(a=m),(0,s.jsx)(Q.x,{children:(0,s.jsx)(h.A,{defaultMessage:"Some of your content could not be loaded. {actionButton}",id:"Ibsz06ys2B",values:{actionButton:a}})})};var ef=a(75006);let eg=ef.z.array(ef.z.object({text:ef.z.string(),href:ef.z.string().optional(),button:ef.z.boolean().optional()})).nullable();function ev(e){let{messageComponents:t}=e;return(0,s.jsx)(Q.x,{children:(0,s.jsx)(ey,{messageComponents:t})})}function ey(e){let{messageComponents:t}=e;return(0,s.jsx)("div",{children:t.map((e,t)=>e.button?(0,s.jsx)(I.$,{href:e.href,target:"_blank",children:e.text},t):e.href?(0,s.jsx)(er(),{href:e.href,className:"underline",target:"_blank",children:e.text},t):(0,s.jsx)("span",{children:e.text},t))})}var eb=a(74039),ej=a(7726);function ew(e){let t=(0,ej.bT)("push"),a=()=>{t()},n=e=>(0,s.jsx)("a",{onClick:a,className:"underline cursor-pointer",children:e});return(0,s.jsx)(D.q,{actionButton:null,children:(0,s.jsx)("div",{className:"text-text-200 flex w-full items-center justify-between",children:(0,s.jsx)("div",{className:"flex items-center gap-1",children:(0,s.jsx)("span",{children:"refusal"===e.stopReason?(0,s.jsx)(h.A,{defaultMessage:"Claude is unable to respond to this request, which appears to violate our <policyLink>Usage Policy</policyLink>. Please <newChat>start a new chat</newChat>.",id:"JQtAKVGSTL",values:{policyLink:e=>(0,s.jsx)("a",{href:"https://www.anthropic.com/legal/aup",target:"_blank",className:"underline cursor-pointer",children:e}),newChat:n}}):(0,s.jsx)(h.A,{defaultMessage:"Claude is unable to respond to this request. Please <newChat>start a new chat</newChat>.",id:"VZKromeiwV",values:{newChat:n}})})})})})}var ek=a(61125),eM=a(41932),eA=a(80047);function eC(e){let{isOpen:t,setIsOpen:a,files:n,isNewConversation:l}=e,i=(0,eo.A)();return(0,s.jsxs)(L.aF,{isOpen:t,hasCloseButton:!0,title:i.formatMessage({defaultMessage:"Analysis tool required",id:"jvGhSl5Gpz"}),onClose:()=>a(!1),children:[(0,s.jsxs)("div",{className:"my-4 text-pretty flex flex-col gap-2",children:[(0,s.jsx)("div",{children:(0,s.jsx)(h.A,{defaultMessage:"Claude requires the analysis tool to be enabled to analyze the following files:",id:"DWgtKtw1y9"})}),(0,s.jsx)("ul",{className:"list-disc pl-4",children:n.map(e=>(0,s.jsx)("li",{children:e.file_name},e.file_uuid))}),(0,s.jsx)("div",{children:l?i.formatMessage({defaultMessage:"If you start this conversation without turning on the analysis tool, these files will not be available to Claude.",id:"0r1iTiKoSi"}):i.formatMessage({defaultMessage:"Please enable the analysis tool and then start a new chat in this project to analyze these files.",id:"YLHCS8L8fc"})})]}),(0,s.jsx)(L.vW,{layout:"right",children:(0,s.jsx)(L.yl,{type:"button",size:"lg",onClick:()=>a(!1),children:(0,s.jsx)(h.A,{defaultMessage:"OK",id:"kAEQyVFWDv"})})})]})}function eN(e){let{files:t,isNewConversation:a}=e,{track:n}=(0,i.st)(),{openFeaturePreviewModal:l}=(0,eA.go)(),[r,o]=(0,x.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eC,{isOpen:r,setIsOpen:o,isNewConversation:a,files:t}),(0,s.jsx)(Q.x,{children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsx)(h.A,{defaultMessage:"Claude cannot access some of the <a>files attached</a> to this conversation",id:"dlrqZaDnOO",values:{a:e=>(0,s.jsx)("a",{className:"underline",href:"#",onClick:()=>o(!0),children:e})}})}),(0,s.jsx)("div",{children:(0,s.jsx)("a",{className:"text-accent-secondary-000 font-medium",href:"#",onClick:()=>{n({event_key:"claudeai.settings.preview_feature.opened",source:"ooc_files_warning"}),l()},children:(0,s.jsx)(h.A,{defaultMessage:"Enable analysis tool",id:"UDUWEABw3p"})})})]})})]})}var e_=a(9946),eS=a(70011),eI=a(19125),eE=a(76761),eT=a(5081);let eD=ef.z.object({id:ef.z.string(),bodyMd:ef.z.string(),isDismissable:ef.z.boolean(),proUpsell:ef.z.boolean(),alertForModels:ef.z.array(ef.z.string())}).nullable(),eO=e=>{let t=(0,c.T9)("claude_ai_system_alerts","alert",null,eD),[a,n]=(0,eI.V)("".concat(e,":").concat(null==t?void 0:t.id,":hideAlertOnConversation"),!1),l=null==t?void 0:t.alertForModels,i=(0,eS.Z3)(e);return e&&(!l||l.includes(i))&&t&&!a?{systemAlertFromConfig:{alert:t,component:(0,s.jsx)(eR,{alert:t,setHideAlert:n})}}:{}},eR=e=>{let{alert:t,setHideAlert:a}=e,n=(0,r.UC)(),l=(0,ec.h)();return(0,s.jsxs)(Q.x,{children:[(0,s.jsx)(e_.Lv,{children:(0,s.jsx)(eT.o,{children:t.bodyMd})}),n&&t.proUpsell&&l,t.isDismissable&&(0,s.jsx)(I.$,{className:"ml-2 h-4 w-4 translate-y-[0.5px] rounded",size:"unset",variant:"ghost",onClick:()=>a(!0),children:(0,s.jsx)(eE.X,{size:12})})]})},ez=e=>{let{className:t,...a}=e;return(0,s.jsx)("button",{className:"text-text-100 text-sm font-medium hover:underline text-nowrap",...a})};var eL=a(6568);let eP=e=>{let t=(0,eL.tA)(e.projectKnowledgebaseTokens,e.maxConversationTokens),a=(0,ej.bT)("push");return(0,s.jsx)(D.q,{actionButton:(0,s.jsx)(ez,{onClick:()=>a({projectUuid:e.projectUuid}),children:(0,s.jsx)(h.A,{defaultMessage:"Start a new conversation",id:"Lc72GmPP25"})}),children:t?(0,s.jsx)(h.A,{defaultMessage:"This conversation has reached its <link>maximum length</link>. You may want to remove some files from your project’s knowledge base.",id:"8KrIIDzvA1",values:{link:e=>(0,s.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:o.q4,children:e})}}):(0,s.jsx)(h.A,{defaultMessage:"This conversation has reached its <link>maximum length</link>.",id:"h7H72fz8l5",values:{link:e=>(0,s.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:o.q4,children:e})}})})},eU=()=>(0,s.jsx)(Q.x,{children:(0,s.jsx)(h.A,{defaultMessage:"Long prompts or documents may take multiple minutes to respond",id:"bw4uiEG/kB"})});var eF=a(4708);let eG=e=>{let t,a=(0,ej.bT)("push"),{tokenTotals:n,numAttachments:l,projectKnowledgebaseTokens:i}=e,{msgTokens:r,totalTokens:d,maxConversationTokens:c}=n,u=null!=i?i:0,m=(0,eL.tA)(u,c),p=d/c-1;return t=l&&m?(0,s.jsx)(h.A,{defaultMessage:"Try replacing the attached {numAttachments, plural, one {file} other {files}} with smaller excerpts or removing files from your project’s knowledge base.",id:"LZJa/izuge",values:{numAttachments:l}}):l?(0,s.jsx)(h.A,{defaultMessage:"Try replacing the attached {numAttachments, plural, one {file} other {files}} with smaller excerpts.",id:"doIlMUx6Hu",values:{numAttachments:l}}):m?(0,s.jsx)(h.A,{defaultMessage:"Try removing files from your project’s knowledge base.",id:"rTmS1cuCeD"}):(0,s.jsx)(h.A,{defaultMessage:"Try shortening your message.",id:"vd0y42PhHK"}),(0,s.jsx)(Q.x,{children:(0,s.jsxs)("span",{children:[(0,s.jsx)(h.A,{defaultMessage:"Conversation is {percentage}% over the <link>length limit</link>.",id:"IGar1JqHAm",values:{percentage:Math.ceil(100*p),link:e=>(0,s.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:o.q4,children:e})}}),"\xa0",t,"\xa0",r+u<c&&(0,s.jsx)("a",{className:"underline",href:"#",onClick:()=>a({projectUuid:e.projectUuid}),children:(0,s.jsx)(h.A,{defaultMessage:"Start a new conversation?",id:"8ha4a4N9Uq"})})]})})};var eH=a(40459);let eY=e=>{let{switchModel:t,copyText:a,modelName:n}=e;return(0,s.jsx)(Q.x,{children:(0,s.jsxs)("div",{className:"text-text-200 flex w-full items-center flex-wrap justify-between",children:[(0,s.jsx)("div",{className:"flex items-center gap-1",children:a}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("button",{className:"text-text-100 text-sm font-medium hover:underline text-nowrap",onClick:t,children:(0,s.jsx)(h.A,{defaultMessage:"Switch to {modelName}",values:{modelName:n},id:"1APwtKAkCy"})}),"\xa0"]})]})})},eB=()=>{let e=(0,b.X0)(u.v8.GMAIL),t=(0,b.X0)(u.v8.GCAL),a=(0,v.$f)();return!(0,m.V)()&&(e||t||a)},eV=e=>{var t,a,m,v,b,A,C,N,I,E,T,D,O,R,z,L,P,U,F,G,H,Y,B,V,K;let q,{placement:W}=e,{prompt:J,isPromptUnsafe:$,model:ee,setModel:et,attachments:ea,conversation:es,projectUuid:en,syncSourceUuids:ei,files:er}=(0,S.o)(),{setMcpDirectoryModalIsOpen:eo}=(0,M.tl)(),ec=(0,w.ED)(en),em=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=(0,ej.mz)(t||""),s=null==a||null==(e=a.chat_messages)?void 0:e.at(-1);return s&&"assistant"===s.sender&&("prompt_injection_risk"===s.stop_reason||"refusal"===s.stop_reason)?s.stop_reason:null}(null==es?void 0:es.id),ep=em?(0,s.jsx)(ew,{stopReason:em}):null,[ex,ef]=(0,eF.q)({projectUuid:en,conversationUUID:null!=(a=null==es?void 0:es.id)?a:null,conversationTokensSoFar:null!=(m=null==es?void 0:es.tokensSoFar)?m:0,conversationFiles:(null!=(v=null==es?void 0:es.files)?v:[]).concat(er),projectKnowledgebaseTokens:null!=(b=null==es?void 0:es.projectKnowledgebaseTokens)?b:ec,input:J,attachments:ea,syncSourceUuids:ei,chatInputModel:ee}),ey=(0,i.st)();(0,x.useEffect)(()=>{"exceeded"===ex?ey.track({event_key:"chat.conversation.token_limit_exceeded",conversation_uuid:null==es?void 0:es.id,project_uuid:en}):"will-exceed"===ex&&ey.track({event_key:"chat.conversation.token_limit_will_exceed",conversation_uuid:null==es?void 0:es.id,project_uuid:en})},[ey,null==es?void 0:es.id,en,ex]);let{exceededMessageLimitWarning:eA,approachingMessageLimitWarning:eC,messageLimit:e_}=(0,eb.I)(null!=(A=null==es?void 0:es.id)?A:null),eS="exceeded"===ex?(0,s.jsx)(eP,{projectKnowledgebaseTokens:null!=(C=null==es?void 0:es.projectKnowledgebaseTokens)?C:0,maxConversationTokens:ef.maxConversationTokens,projectUuid:en}):null,{isRavenCanceled:eI}=(0,f.bF)(),eE=eI?(0,s.jsx)(ed,{}):void 0,eT=(0,r.r$)()?(0,s.jsx)(eu,{}):void 0,eD=(()=>{let{chatResourceState:e}=(0,k.i)();return[...e.syncSources||[],...(0,g.CO)(en).data||[]].filter(e=>{var t;return u.xj.includes(null==e||null==(t=e.status)?void 0:t.state)})})(),eR=eD.length?(0,s.jsx)(eh,{inaccessibleSyncSources:eD}):void 0,{maxKbTokens:ez,modelWithLargestContext:eL}=(0,w.AO)(),{setStickyModelPreference:eV}=(0,l.F)(),eK=!eL||(null==ee?void 0:ee.toLowerCase())===eL.toLowerCase(),eq="exceeded"===ex||"will-exceed"===ex,eW=!eK&&eq&&ef.totalTokens<ez,{allModelOptions:eX}=(0,n.A9)(),eJ=null==(t=eX.find(e=>e.model===eL))?void 0:t.name,e$=(0,x.useCallback)(()=>{eL&&(et(eL),eV(eL))},[et,eV,eL]),eZ=eJ&&eW?(0,s.jsx)(eY,{switchModel:e$,modelName:eJ,copyText:(0,s.jsx)("span",{children:(0,s.jsx)(h.A,{defaultMessage:"Your message is over the <link>length limit</link>",id:"sFF+OamRk1",values:{link:e=>(0,s.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:o.q4,children:e})}})})}):void 0,eQ="will-exceed"===ex?(0,s.jsx)(eG,{tokenTotals:ef,numAttachments:ea.length,projectKnowledgebaseTokens:null==es?void 0:es.projectKnowledgebaseTokens,projectUuid:en}):null,e0=ef.msgTokens<1e5?null:(0,s.jsx)(eU,{}),e1=(0,j.CD)(),e2=(0,r.mV)(),e5=e1&&!e2?(0,s.jsx)(Q.x,{children:(0,s.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,s.jsx)(p.N,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,s.jsx)("span",{children:(0,s.jsx)(h.A,{defaultMessage:"Less accurate Google Drive search results while Claude catalogs your Drive files",id:"ljvRWwDUyf"})})]})}):void 0,e7=(0,Z.U)(en)?(0,s.jsx)(Q.x,{children:(0,s.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,s.jsx)(p.N,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,s.jsx)("span",{children:(0,s.jsx)(h.A,{defaultMessage:"Project knowledge exceeds maximum. Remove files to continue.",id:"IqUMWBoy4d"})})]})}):void 0,{systemAlertFromConfig:e6}=eO(null!=(N=null==es?void 0:es.id)?N:null),e4=e6?e6.component:null,e3=function(e,t,a){let{data:n=[]}=(0,eM.uE)(a),l=(0,ek.cV)(),i=[...e,...t?t.files:[],...n].filter(e=>e.file_kind===d.M.Blob);return!l&&i.length?(0,s.jsx)(eN,{files:i,isNewConversation:!t}):null}(er,es,en),e8=function(){let e=(0,c.T9)("claudeai_warning_message","components",null,eg);return e?(0,s.jsx)(ev,{messageComponents:e}):null}(),e9=eB(),te=(0,c.fS)("claudeai_unsafe_prompt_inline"),tt=$()&&e9&&te?(0,s.jsx)(Q.x,{children:(0,s.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,s.jsx)(p.N,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,s.jsx)("span",{children:(0,s.jsx)(h.A,{defaultMessage:"Use caution before running this prompt. Malicious conversation content could trick Claude into attempting harmful actions or sharing your data.",id:"bWRp6wwzXA"})})]})}):null,ta=ea.some(e=>e.origin===d.R.URLParameter)?(0,s.jsx)(Q.x,{children:(0,s.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,s.jsx)(p.N,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,s.jsx)("span",{children:(0,s.jsx)(h.A,{defaultMessage:"Artifacts are user-generated and may contain unverified or potentially unsafe content.",id:"/0GesG9R4n"})})]})}):null,ts=null!=(E=null!=(I=null!=ep?ep:tt)?I:ta)?E:null,tn=null!=e7?e7:null,tl=(0,y.ko)({shouldTrack:"onpage"===W})&&"onpage"===W?(0,s.jsx)(el,{}):null,ti=null!=(K=null!=(V=null!=(B=null!=(Y=null!=(H=null!=(G=null!=(F=null!=(U=null!=(P=null!=(L=null!=(z=null!=(R=null!=(O=null!=(D=null!=(T=null!=ts?ts:tn)?T:eA)?D:eZ)?O:eS)?R:eE)?z:eT)?L:eR)?P:eQ)?U:e3)?F:e0)?G:e4)?H:e5)?Y:e8)?B:eC)?V:tl)?K:null;ti===tl&&(q=()=>eo(!0));let tr=e6&&e6.alert.proUpsell?"pro":eA||e3||e5||eC?"info":tl?"chin":"danger",to=(0,r.O9)(),td=(0,r.zc)();return!tn&&e_&&(to||td)&&(eC||eA)&&!eH.env.NEXT_PUBLIC_DISABLE_PAYMENTS?(0,s.jsx)(X,{messageLimit:e_,defaultWarning:ti,defaultTheme:tr,placement:W}):(0,s.jsx)(_,{warning:ti,placement:W,theme:tr,onClick:q})}},59448:(e,t,a)=>{a.d(t,{Bz:()=>u,f$:()=>m,n$:()=>c});var s=a(61125),n=a(98518),l=a(51121),i=a(55810),r=a(7620),o=a(57383),d=a(86628);function c(e){let{track:t}=(0,n.st)(),[a,s]=(0,r.useState)({}),[l,o]=(0,r.useState)({});return(0,r.useEffect)(()=>{let a=!1;async function n(){if(!e)return;let n=await (0,d.D)(e,{method:"resources/list",params:{}},i.cv,{timeout:6e5}),l=await (0,d.D)(e,{method:"prompts/list",params:{}},i.Yu,{timeout:6e5});if(a)return;let r={},c={};Object.entries(n).forEach(e=>{var a,s,n;let[l,i]=e;t({event_key:"mcp.resources.listed",resource_count_on_server:null!=(s=null==(a=i.resources)?void 0:a.length)?s:0}),r[l]=(null!=(n=i.resources)?n:[]).sort((e,t)=>e.name.localeCompare(t.name))}),Object.entries(l).forEach(e=>{var a,s,n;let[l,i]=e;t({event_key:"mcp.prompts.listed",prompt_count_on_server:null!=(s=null==(a=i.prompts)?void 0:a.length)?s:0}),c[l]=(null!=(n=i.prompts)?n:[]).sort((e,t)=>e.name.localeCompare(t.name))}),s(r),o(c)}n();let l=setInterval(()=>void n(),6e5);return()=>{a=!0,clearInterval(l)}},[e,t]),{resources:a,prompts:l}}function u(){let{addError:e}=(0,l.Y)(),{track:t}=(0,n.st)(),{handleUpload:a}=(0,o.o)();return(0,r.useCallback)(async(s,n)=>{try{let e=(await s.request({method:"resources/read",params:{uri:n.uri}},i.ve,{timeout:15e3})).contents.map(e=>{let a;return"text"in e?(a=String(e.text),t({event_key:"mcp.resources.read",type:"text",mime_type:e.mimeType})):(a=p(e.blob),t({event_key:"mcp.resources.read",type:"binary",mime_type:e.mimeType})),new File([a],n.name,{type:e.mimeType})});e.length>0&&await a(e)}catch(t){e("Error uploading resource: ".concat(t))}},[t,e,a])}function m(e){let{track:t}=(0,n.st)(),{addError:a}=(0,l.Y)(),{handleUpload:d}=(0,o.o)();return(0,r.useCallback)(async(n,l,r)=>{if(n&&l)try{let a=await n.request({method:"prompts/get",params:{name:l.name,arguments:r}},i.HM,{timeout:15e3});t({event_key:"mcp.prompts.used",argument_count:Object.keys(r).length,assistant_messages:a.messages.filter(e=>"assistant"===e.role).length,user_messages:a.messages.filter(e=>"user"===e.role).length,text_messages:a.messages.filter(e=>"text"===e.content.type).length,image_messages:a.messages.filter(e=>"image"===e.content.type).length});let o=(e,t)=>{let a=e=>{let t=s._F[e];if(!t)throw Error("Unsupported MIME type: ".concat(e));return t},n=e=>"".concat(l.name).concat(t?"_".concat(t):"",".").concat(e);switch(e.content.type){case"text":return new File([e.content.text],n("txt"),{type:"text/plain"});case"image":{let t=a(e.content.mimeType);return new File([p(e.content.data)],n(t),{type:e.content.mimeType})}case"resource":if("text"in e.content.resource){var i;let t=e.content.resource;return new File([t.text],"".concat(t.uri,".txt"),{type:null!=(i=t.mimeType)?i:"text/plain"})}if("blob"in e.content.resource){let t=e.content.resource;if(!t.mimeType)throw Error("Missing MIME type for embedded resource");let s=a(t.mimeType);return new File([p(t.blob)],"".concat(t.uri,".").concat(s),{type:t.mimeType})}throw Error("Invalid resource content")}};if(1===a.messages.length)await d([o(a.messages[0],0)]);else if(a.messages.length>1){let e=a.messages.flatMap((e,t)=>"image"===e.content.type||"resource"===e.content.type&&"blob"in e.content.resource?[o(e,t)]:[]),t=a.messages.filter(e=>"text"===e.content.type||"resource"===e.content.type&&"text"in e.content.resource);if(t.length>0){let a=JSON.stringify(t,null,2);e.push(new File([a],"".concat(l.name,"_messages.json"),{type:"application/json"}))}await d(e)}null==e||e()}catch(e){a("Error getting prompt: ".concat(e))}},[t,a,d,e])}function p(e){let t=window.atob(e),a=new ArrayBuffer(t.length),s=new Uint8Array(a);for(let e=0;e<t.length;e++)s[e]=t.charCodeAt(e);return a}},61162:(e,t,a)=>{a.d(t,{y:()=>l});var s=a(27062),n=a(21036);let l=()=>{let e=(0,n.useLayer)("frontend"),{value:t}=(0,s.fS)("artifacts_enabled");return!!t||e.get("artifacts_enabled_by_default",!1)}},63374:(e,t,a)=>{a.d(t,{X3:()=>c,_7:()=>l.XY,_x:()=>u,hm:()=>d});var s=a(42977),n=a(90510),l=a(98411);function i(){let e=(0,s._)(["p-4 bg-bg-300 rounded-xl"]);return i=function(){return e},e}function r(){let e=(0,s._)(["basis-0 flex-col gap-1 inline-flex"]);return r=function(){return e},e}function o(){let e=(0,s._)(["items-center gap-2 inline-flex text-text-000 font-large-bold"]);return o=function(){return e},e}let d=n.J.div(i()),c=n.J.div(r()),u=n.J.div(o())},64979:(e,t,a)=>{a.d(t,{t:()=>o});var s=a(54568),n=a(29242),l=a(27062),i=a(4705),r=a(62971);function o(e,t,a){let{value:o}=(0,l.fS)("claude_ai_cinnamon"),{value:d}=(0,l.fS)("claude_ai_chili");return o&&d&&void 0!==a&&"claude-3-5-haiku-20241022"===t&&a?(0,s.jsxs)(s.Fragment,{children:[e.replace("3.5 Haiku","3 Haiku"),(0,s.jsx)(n.m,{tooltipContent:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(r.A,{defaultMessage:"Claude 3.5 Haiku does not support images",id:"VkrkeY0z6g"})}),children:(0,s.jsx)(i.N,{className:"inline-block ml-1 translate-y-[-1px]"})})]}):e}},73212:(e,t,a)=>{a.d(t,{l:()=>l});var s=a(91961),n=a(96406);let l=()=>{if((0,s.fJ)())return;let e=document.getElementById(n.I);e&&e.focus()}},73817:(e,t,a)=>{a.d(t,{s:()=>c});var s=a(54568),n=a(98715),l=a(91961),i=a(85544),r=a(32987),o=a(46760),d=a(96406);let c=e=>{let{path:t,inputMenuSearchQuery:a,setInputMenuSearchQuery:c,handleBack:u,className:m}=e,p=(0,o.A)(),x=(0,l.fJ)(),h={[i.xd.DRIVE]:p.formatMessage({defaultMessage:"Search Google Drive",id:"1bbXc6Z3S1"}),[i.xd.PROJECTS]:p.formatMessage({defaultMessage:"Search projects",id:"doPT7U8q21"}),[i.xd.STYLES]:p.formatMessage({defaultMessage:"Search styles",id:"9oQ0JkPwFY"})},f=t&&t in h?h[t]:p.formatMessage({defaultMessage:"Search menu",id:"lL4HM3zEqr"}),g=null===t||!!a.trim().length;return(0,s.jsxs)("div",{className:(0,r.A)("flex flex-row items-center gap-2.5 px-1.5 w-full rounded-md h-[2rem]",m),children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,s.jsx)(n.vji,{className:(0,r.A)("text-text-500/50 transition-opacity",g?"opacity-100":"opacity-0")})}),(0,s.jsx)("button",{onClick:u,className:(0,r.A)("transition-opacity text-text-500 hover:text-text-100 absolute left-0 top-0",g?"opacity-0":"opacity-100"),disabled:g,children:(0,s.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,s.jsx)(n.nkM,{})})})]}),(0,s.jsx)("input",{autoFocus:!x,id:d.I,className:"block bg-transparent hide-focus-ring leading-6 placeholder:text-text-500/70 text-[15px] text-text-300 w-full",placeholder:f,value:a,onChange:e=>c(e.target.value)})]})}},74039:(e,t,a)=>{a.d(t,{I:()=>j,h:()=>A});var s=a(54568),n=a(70011),l=a(80079),i=a(1761),r=a(55554),o=a(41417),d=a(46612),c=a(27062),u=a(76761),m=a(68864),p=a(27261),x=a.n(p),h=a(7620),f=a(62971),g=a(17411),v=a(45317),y=a(14786),b=a(47959);let j=e=>{let{messageLimit:t}=(0,i.YL)(),{isTierSelectorEnabled:a}=(0,r.t)(),[l,o]=(0,h.useState)(!0),d=(null==t?void 0:t.type)==="within_limit",c=(0,n.Z3)(e),u=d?null:null==t?void 0:t.conversationUUID,m=(0,n.Z3)(null!=u?u:null);return(null==t?void 0:t.type)!=="within_limit"&&(null==t?void 0:t.perModelLimit)&&c!==m?{}:(null==t?void 0:t.type)==="exceeded_limit"||(null==t?void 0:t.type)==="approaching_limit"&&0===t.remaining?{messageLimit:t,exceededMessageLimitWarning:(0,s.jsx)(w,{messageLimit:t,showTierSelector:a})}:(null==t?void 0:t.type)==="approaching_limit"?{messageLimit:t,approachingMessageLimitWarning:l?(0,s.jsx)(k,{messageLimit:t,onDismiss:()=>o(!1)}):void 0}:{}};function w(e){let{messageLimit:t,showTierSelector:a=!1}=e,n=(0,i.mV)(),l=(0,i.O9)(),r=(0,i.zc)(),o=(0,i.tP)(),c=(0,b.h)(),u=m.c9.fromSeconds(t.resetsAt),{hasOAuthTokens:p}=function(){var e;let{data:t,isLoading:a}=(0,g.Jh)();return{hasOAuthTokens:null!=(e=null==t?void 0:t.some(e=>!e.is_revoked))&&e,isLoading:a}}();return(0,s.jsxs)(y.q,{actionButton:c,minimalUi:!0,children:[a?(0,s.jsx)(f.A,{defaultMessage:"Usage limit reached — your limit will reset at {time}. As an internal user, you can change your tier in the user menu to test different rate limits.",id:"Um8zFcRLL/",values:{time:(0,s.jsx)("span",{className:"inline-block",children:u.toLocaleString(m.c9.TIME_SIMPLE)})}}):r&&o?(0,s.jsx)(f.A,{defaultMessage:"Increase usage for uninterrupted work or continue at {time}.",id:"5QbZN4LMkt",values:{time:(0,s.jsx)("span",{className:"inline-block",children:u.toLocaleString(m.c9.TIME_SIMPLE)})}}):l||n||r?p?(0,s.jsx)(f.A,{defaultMessage:"Usage limit reached — your limit will reset at {time}. <link>Your limits are shared with Claude Code</link>",id:"UrobydPO9o",values:{time:(0,s.jsx)("span",{className:"inline-block",children:u.toLocaleString(m.c9.TIME_SIMPLE)}),link:e=>(0,s.jsx)(x(),{className:"underline",href:"/settings/claude-code",children:e})}}):(0,s.jsx)(f.A,{defaultMessage:"Usage limit reached — your limit will reset at {time}.",id:"bXAswF0AK8",values:{time:(0,s.jsx)("span",{className:"inline-block",children:u.toLocaleString(m.c9.TIME_SIMPLE)})}}):(0,s.jsx)(f.A,{defaultMessage:"You are out of free <link>messages</link> until {time}",id:"PKaisys/Ji",values:{time:(0,s.jsx)("span",{className:"inline-block",children:u.toLocaleString(m.c9.TIME_SIMPLE)}),link:e=>(0,s.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:d.Kf,children:e})}}),(0,s.jsx)(M,{messageLimit:t})]})}let k=e=>{let{messageLimit:t,onDismiss:a}=e,n=(0,b.h)(),l=m.c9.fromSeconds(t.resetsAt);return(0,s.jsxs)(v.x,{children:[(0,s.jsx)("span",{className:"font-medium",children:(0,s.jsx)(f.A,{defaultMessage:"You’re almost out of usage - your limits will reset at {time}",id:"jKI2rDp1ds",values:{time:(0,s.jsx)("span",{className:"inline-block",children:l.toLocaleString(m.c9.TIME_SIMPLE)})}})}),(0,s.jsxs)("span",{children:[n,(0,s.jsx)(o.$,{className:"ml-2 h-4 w-4 translate-y-[0.5px] rounded !bg-transparent",size:"unset",variant:"ghost",onClick:a,children:(0,s.jsx)(u.X,{size:12})})]})]})},M=e=>{let{messageLimit:t}=e,{mutate:a}=(0,l.T)(t.conversationUUID),{value:n}=(0,c.fS)("can_reset_rate_limits");return n?(0,s.jsx)(o.$,{className:"ml-2",variant:"secondary",size:"sm",onClick:()=>a(),children:(0,s.jsx)(f.A,{defaultMessage:"Reset limits",id:"0Lg76lu7jn"})}):null},A=e=>{var t;let{messageLimit:a,activeOrganization:s}=(0,i.YL)(),r=(0,l.$)(),o=(0,n.Z3)(e),d=(null==a?void 0:a.type)!=="within_limit"&&null!=(t=null==a?void 0:a.conversationUUID)?t:null,c=(0,n.Z3)(d);(0,h.useEffect)(()=>{(null==s?void 0:s.uuid)&&a&&"within_limit"!==a.type&&c!==o&&r({type:"within_limit"},s.uuid,e)},[e,c,s,a,o,r])}},78730:(e,t,a)=>{a.d(t,{bN:()=>x,Ri:()=>u,ib:()=>p});var s=a(71473),n=a(7620),l=a(77186),i=a(10158),r=a(1761),o=a(40459);let d=async e=>{if(o.env.NEXT_PUBLIC_DISABLE_PAYMENTS)return Promise.resolve(null);let{loadStripe:t}=await a.e(2045).then(a.bind(a,52045));return t(e)},c=["ar","bg","cs","da","de","el","en","en-AU","en-CA","en-NZ","en-GB","es","es-ES","es-419","et","fi","fil","fr","fr-CA","fr-FR","he","hu","hr","id","it","it-IT","ja","ko","lt","lv","ms","mt","nb","nl","no","pl","pt","pt-BR","ro","ru","sk","sl","sv","th","tr","vi","zh","zh-HK","zh-TW"],u=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],{activeOrganization:t}=(0,r.YL)(),{data:a,mutate:i,isIdle:o}=(0,l.L2)("/api/stripe/".concat(null==t?void 0:t.uuid,"/intent"),"POST",{enabled:!!(null==t?void 0:t.uuid),retry:2,retryDelay:2e3,mutationKey:[s.$k,null==t?void 0:t.uuid]});return(0,n.useEffect)(()=>{o&&e&&i()},[i,o,e]),a},m=null,p=()=>{let{stripePublishableKey:e}=(0,i._r)();return m||(m=d(e)),m},x=e=>{if(c.includes(e))return e;let t=e.split("-")[0];return c.includes(t)?t:"en"}},80047:(e,t,a)=>{a.d(t,{TW:()=>T,go:()=>E,wU:()=>I});var s=a(54568),n=a(68096),l=a(33200),i=a(98518),r=a(1761),o=a(51121),d=a(15046),c=a(22529),u=a(63374),m=a(37076),p=a(98411),x=a(29242),h=a(27062),f=a(32987),g=a(89256),v=a.n(g),y=a(61773),b=a(7620),j=a(62971),w=a(46760),k=a(75006),M=a(80731),A=a(61162);let C=k.z.object({title:k.z.string(),description:k.z.string(),shortDescription:k.z.string().optional(),titleKey:k.z.string().optional(),descriptionKey:k.z.string().optional(),shortDescriptionKey:k.z.string().optional()}),N=k.z.object({preview_feature_uses_artifacts:C.optional(),preview_feature_uses_latex:C.optional(),preview_feature_uses_citations:C.optional(),preview_feature_uses_harmony:C.optional(),enabled_artifacts_attachments:C.optional(),enabled_turmeric:C.optional(),enabled_gdrive:C.optional(),enabled_bananagrams:C.optional(),enabled_web_search:C.optional(),enabled_sourdough:C.optional(),enabled_foccacia:C.optional(),enabled_monkeys_in_a_barrel:C.optional()}),_={},S=(0,b.createContext)({openFeaturePreviewModal:v()}),I=e=>{let{children:t}=e,[a,n]=(0,b.useState)(!1);return(0,s.jsxs)(S.Provider,{value:{openFeaturePreviewModal:()=>n(!0)},children:[t,(0,s.jsx)(m.aF,{modalSize:"xl",isOpen:a,onClose:()=>n(!1),hasCloseButton:!0,title:(0,s.jsx)(j.A,{defaultMessage:"Feature preview",id:"3H/t1552xG"}),children:(0,s.jsx)(T,{})})]})},E=()=>(0,b.useContext)(S);function T(e){let{includeTitle:t}=e,a=function(){let{value:e}=(0,h.fS)("latex_ga"),t=(0,h.T9)("fp_menu","features",_,N),a=(0,A.y)(),s=(0,M.K)(),{value:n,source:i}=(0,l.N)({}),{preview_feature_uses_artifacts:r,enabled_artifacts_attachments:o,preview_feature_uses_harmony:d,preview_feature_uses_latex:c,...u}=t,m={...u};return!a&&r&&(m.preview_feature_uses_artifacts=r),n&&"experiment"===i&&r||(m.enabled_artifacts_attachments=o),s&&d&&(m.preview_feature_uses_harmony=d),!e&&c&&(m.preview_feature_uses_latex=c),m}();if(!(Object.keys(a).length>0))return;let n=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{id:"feature-preview",className:"text-text-400 font-base pt-4 pb-8",children:(0,s.jsx)(j.A,{defaultMessage:"Preview and provide feedback on upcoming enhancements to our platform. Please note: experimental features might influence Claude’s behavior and some interactions may differ from the standard experience.",id:"TJ0Nj7aQ5C"})}),(0,s.jsx)("div",{className:"flex flex-col gap-4",children:Object.entries(a).map((e,t)=>{let[a,n]=e;return(0,s.jsxs)(s.Fragment,{children:[t>0&&(0,s.jsx)("div",{className:"border-t border-border-300"}),(0,s.jsx)(D,{label:a,...n},a)]})})})]});return t?(0,s.jsxs)(p.XY,{children:[(0,s.jsx)(u._x,{children:(0,s.jsx)(j.A,{defaultMessage:"Feature preview",id:"3H/t1552xG"})}),n]}):n}function D(e){var t;let{label:a,...l}=e,u=(0,w.A)(),{track:m}=(0,i.st)(),{addSuccess:p}=(0,o.Y)(),{account:h}=(0,r.YL)(),{mutate:g}=(0,n.Jy)(),{checked:v,disabled:j,tooltipContent:k}=O(a),M=(0,b.useCallback)(()=>{h&&(m({event_key:"claudeai.settings.preview_feature.toggled",account_uuid:h.uuid,feature_id:a,action:!0===v?"disable":"enable"}),p(u.formatMessage({defaultMessage:"{title} {action}",id:"XuGv50sPs9"},{title:l.title,action:v?"disabled":"enabled"})),g({...h.settings,[a]:!v}))},[h,m,a,v,p,u,l.title,g]);return(0,s.jsxs)("div",{className:"flex flex-row w-full gap-4 items-center",children:[(0,s.jsx)(y.default,{src:"/images/feature-preview/square/".concat(null!=(t=R[a])?t:"generic",".png"),style:{objectFit:"cover",width:62,height:62},className:"rounded-lg border border-border-300",width:248,height:248,alt:u.formatMessage({defaultMessage:"Preview image of feature",id:"6VliGZPeZA"})}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 flex-grow",children:[(0,s.jsx)("h3",{className:"text-text-100 font-base-bold",id:"feature-".concat(a,"-title"),children:l.titleKey?(0,s.jsx)(c.X5,{id:l.titleKey}):l.title}),(0,s.jsx)("p",{className:"text-text-300 font-base",children:l.descriptionKey?(0,s.jsx)(c.X5,{id:l.descriptionKey}):l.description})]}),(0,s.jsx)(x.m,{tooltipContent:k?(0,s.jsx)("div",{className:"text-center",children:k}):null,children:(0,s.jsx)("label",{className:(0,f.A)(!j&&"cursor-pointer"),children:(0,s.jsx)(d.j,{disabled:j,checked:!!v,onChange:M,"aria-labelledby":"feature-".concat(a,"-title")},a)})})]})}let O=e=>{var t,a,s;let{account:n}=(0,r.YL)(),{value:i}=(0,h.fS)("force_harmony"),{value:o,source:d}=(0,l.N)(null!=(a=null==n?void 0:n.settings)?a:{}),c=null!=(s=null==n||null==(t=n.settings)?void 0:t[e])&&s,u="preview_feature_uses_harmony"===e&&i;switch(e){case"preview_feature_uses_harmony":return{checked:i||c,disabled:u,tooltipContent:null};case"enabled_artifacts_attachments":return{checked:"flag"===d&&!!o||c,disabled:u,tooltipContent:null};default:return{checked:c,disabled:u,tooltipContent:null}}},R={preview_feature_uses_artifacts:"artifacts",preview_feature_uses_latex:"latex",preview_feature_uses_citations:"generic",preview_feature_uses_harmony:"harmony",enabled_artifacts_attachments:"analyse",enabled_turmeric:"turmeric",enabled_gdrive:"google-drive",enabled_web_search:"web-search",enabled_bananagrams:"bananagrams",enabled_foccacia:"foccacia",enabled_sourdough:"sourdough"}},84403:(e,t,a)=>{a.d(t,{L:()=>s,f:()=>n});var s=function(e){return e.CLAUDE_CODE="claude_code",e.ORG_ENABLE_INTEGRATIONS="org_enable_integrations",e.MONKEYS_IN_A_BARREL="monkeys_in_a_barrel",e.AZURE_KNIGHT_GALLANT="azure_knight_gallant",e.RESEARCH_AND_MCP="research_and_mcp",e.ARTIFACTS_GALLERY="artifacts_gallery",e.MCP_DIRECTORY="mcp_directory",e}({}),n=function(e){return e.INTERACTED="interacted",e.DISMISSED="dismissed",e}({})},85201:(e,t,a)=>{a.d(t,{Hd:()=>d,Ob:()=>c,gB:()=>o});var s=a(1761),n=a(21036),l=a(92947),i=a(43156);let r=()=>{let{servers:e}=(0,l.gt)();return e.length>0},o=()=>{let e=(0,s.h0)(),t=(0,i.be)(),a=r();return!e&&!t&&!a},d=()=>{let e=(0,s.h0)(),t=r();return e||t},c=()=>(0,n.useExperiment)("tools_menu_upgrade_buttons_experiment").get("show_upgrade_buttons",!1)},86628:(e,t,a)=>{a.d(t,{D:()=>n});var s=a(55810);async function n(e,t,a,n){return e?Object.fromEntries((await Promise.all(Object.entries(e).map(async e=>{let[l,i]=e;try{let e=await i.request(t,a,{timeout:5e3,...n});return[l,e]}catch(e){if(e instanceof s.Nh&&e.code===s.O4.MethodNotFound)return null;return console.error("Request ".concat(t.method," to ").concat(l," failed: ").concat(e)),null}}))).filter(e=>null!==e)):{}}},90384:(e,t,a)=>{a.d(t,{w:()=>n});var s=a(7620);let n=(e,t,a,n)=>(0,s.useMemo)(()=>{{let e=getComputedStyle(document.body);return"hsl(".concat(e.getPropertyValue("--".concat(n)),")")}},[a,n,t,e])},90517:(e,t,a)=>{a.d(t,{I:()=>s});var s=function(e){return e.CREATE="create",e.CREATE_MANUALLY="create_manually",e.LIST="list",e.EDIT="edit",e}({})},93877:(e,t,a)=>{a.d(t,{e:()=>i});var s=a(54568),n=a(16836),l=a(32987);let i=e=>{let{name:t,size:a="md",variant:i="default"}=e,r=null==t?void 0:t.split(" ").map(e=>0===e.length?"":e[0]).join("").substring(0,2).toLocaleUpperCase();return(0,s.jsx)("div",{className:(0,l.$)("flex shrink-0 items-center justify-center rounded-full font-bold select-none",{"h-4 w-4 text-[7px]":"xs"===a,"h-7 w-7 text-[12px]":"sm"===a,"h-8 w-8 text-[14px]":"md"===a,"h-10 w-10 text-lg":"lg"===a,"h-16 w-16 text-2xl":"xl"===a,"bg-text-200 text-bg-100":"default"===i,"bg-accent-pro-100 text-oncolor-100":"pro"===i,"bg-transparent text-text-300":"cardamom"===i}),children:r||(0,s.jsx)(n.K,{weight:(0,l.$)({regular:"xs"===a||"sm"===a,light:"md"===a,thin:"lg"===a||"xl"===a}),size:(0,l.$)({12:"xs"===a||"sm"===a,20:"md"===a,40:"lg"===a||"xl"===a})})})}},95675:(e,t,a)=>{a.d(t,{_:()=>c,x:()=>d});var s=a(54568),n=a(19125),l=a(62942),i=a(7620),r=a(53600);let o=(0,i.createContext)({isDrawerExpanded:!1,setIsDrawerExpanded:()=>void 0});function d(){return(0,i.useContext)(o)}function c(e){let{children:t,conversationUUID:a}=e,d=function(e){let t=!!(0,l.useSearchParams)().get("controls")&&!(window.matchMedia&&window.matchMedia("(max-width: 767px)").matches),[a]=(0,n.V)("".concat(e,":chatControlsSidebarIsOpen"),t);return a}(a),{isExpanded:c,setIsExpanded:u}=(0,r.V)(),[m,p]=(0,i.useState)(d),x=(0,i.useRef)({reopenMain:!1}),h=(0,i.useCallback)(e=>{e&&(c&&(x.current.reopenMain=!0),u(!1)),!e&&x.current.reopenMain&&(x.current.reopenMain=!1,u(!0)),p(e)},[c,u,p]);return(0,s.jsx)(o.Provider,{value:{isDrawerExpanded:m,setIsDrawerExpanded:h},children:t})}},96406:(e,t,a)=>{a.d(t,{I:()=>s});let s="chat-input-menu-search-input"},98769:(e,t,a)=>{a.d(t,{A:()=>s});let s={snappyOut:[.19,1,.22,1],inOutQuart:[.77,0,.175,1],outCirc:[.075,.82,.165,1],inOutBase:[.25,.1,.25,1]}}}]);